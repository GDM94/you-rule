{"version":3,"sources":["UserLoginProcess.js","UserRegisterProcess.js","yourule_logo2.png","UserAccessProcess.js","CreateRuleProcess.js","AddRuleConsequentProcess.js","AddRuleAntecedentProcess.js","RegisterDeviceProcess.js","ViewRules.js","ViewAntecedents.js","ViewConsequents.js","LateralMenu.js","DeviceAntecedents.js","DeviceAntecedentPopUp.js","SetRuleProcess.js","AddAlertEmailProcess.js","DeviceConsequentPopUp.js","ElementDetails.js","AppNew.js","Main.js","index.js"],"names":["UserLoginProcess","props","setUserName","userName","setState","setPassword","password","loginSubmit","event","UserLoginRequest","state","preventDefault","Modal","show","this","userLoginPopUp","onHide","handleLoginPopUp","Header","closeButton","Title","Body","style","display","userLoginError","name","onSubmit","type","id","placeholder","onChange","e","handleUserLoginError","NewName","target","value","visibility","Footer","onClick","React","Component","UserRegisterProcess","setName","setSurname","surname","setEmail","email","setRepeatPassword","repeatPassword","registrationSubmit","registrationFunction","duplicateUserError","length","password_length","includes","checkError","UserRegistrationRequest","errorMessage","userRegisterPopUp","handleRegisterPopUp","jwt","require","UserAccessProcess","a","console","log","access_token","encode","process","url","axios","get","res","tokenId","data","setUser","warn","handleMenuPopUp","menuPopUp","anchorEl","currentTarget","check","idToken","redirect","userNameList","undefined","AppDiv","TopBar","TopBarElement","TopBarButton","fontSize","color","PopperStyled","placement","open","List","component","aria-label","ListItem","button","ListItemIcon","ListItemText","primary","Divider","GreatBody","src","yourule_logo2","alt","to","pathname","styled","Popper","div","IconButton","CreateRuleProcess","createRule","checkCreateNewRule","ruleName","createRuleRequest","rules","some","rule","AddRulePopUp","handleAddRulePopUp","className","htmlFor","checkCreateRuleFunction","AddRuleConsequentProcess","addRuleConsequentPopUp","handleAddRuleConsequentPopUp","handleSetRulePopUp","AddRuleConsequentDevice","newRuleIdx","consequents","setConsequentRuleLocal","handleModify","i","ruleIdx","consequentRule","consequent","consequent_order","toString","consequentsId","map","item","device_id","c","automatic","measure","newConsequent","if_value","else_value","order","delay","AddRuleAntecedentProcess","addRuleAntecedentPopUp","handleAddRuleAntecedentPopUp","AddRuleAntecedentsDevice","antecedents","setAntecedentRuleLocal","AddRuleAntecedentSwitchLastTimeOn","antecedentRule","antecedent","antecedentsId","newAntecedent","start_value","stop_value","condition","RegisterDeviceProcess","createDevice","CheckRegisterDeviceRecognition","deviceInitialization","newDeviceId","handleRegisterDevicePopUp","registerDeviceError","allDeviceId","deviceId","deviceRecognition","el","render","registerDevicePopUp","NewDeviceIdRegistration","newDevice","manual_measure","setting","absolute_measure","error","registerDeviceRequest","ViewRules","MyList","ItemList","setNewRule","getRuleById","newRuleId","modify","AntecedentRulePopUpBody","deleteRuleRequest","setRuleRequest","MyListItem","ViewAntecedents","handleDeviceAntecedentPopUp","setNewAntecedent","getAntecedentById","antecedentId","modifyDevice","updateDeviceRequest","handleModifyDevice","deleteDeviceRequest","deviceIdList","index","indexOf","ViewConsequents","handleDeviceConsequentPopUp","setNewConsequent","getConsequentById","consequentId","LateralMenu","handlePopper","popper","handleAncorPopper","AddFunction","routeUrl","LateralMenuDiv","RouteSelection","sensorRoute","ruleRoute","switchRoute","route","RouteTitle","AddButton","Button","DeviceAntecedents","operation","idx","checkDeviceStatusAndMeasure","measure_device","status","compute_relative_measure","checkMeasure","Math","round","parseInt","relative_measure","device","settings","error_measure","measure_type","measure_settings","measure_unit","max_measure","max_measure_time","min_measure","min_measure_time","today","Date","getHours","getMinutes","getSeconds","checkStatusDevice","device_details","device_relative_measure","DeviceAntecedentPopUp","checkDeviceNameFunction","devices","newName","checkDeviceName","deviceAntecedentPopUp","antecedentIdx","rulesName","rulesNameList","ruleId","GetRulesName","DeviceDetails","antecedentName","modifyAntecedentName","modifyAntecedentSetting","modifyAntecedentSettingError","ContentContainer","deviceDetail","submitFunction","defaultValue","newMaxMeasure","ModifyMaxMeasureSetting","ModifyErrorSetting","useState","openRule","handleOpenRule","ElementTitle","ButtonGroup","variant","ElementContent","ModifyName","ElementMeasure","margin","ElementSettings","Collapse","in","timeout","unmountOnExit","SetRuleProcess","ruleBody","classButtonRuleSelection","ConsequentRulePopUpBody","checkRuleNameFunction","checkRuleName","updateRuleName","update","updateName","setRulePopUp","RuleContent","newRuleName","modifyRuleName","deleteRuleConsequentRequest","deleteRuleAntecedentRequest","setNewRuleCondition","setNewStartValue","setNewStopValue","setNewRuleMeasure","getAntecedents","getConsequents","setRuleConsequentDelay","RuleTitle","RuleContentDiv","evaluation","ModifyNewRuleName","last_true","last_false","AddRuleElementButtonStyled","RuleBody","RuleConsequentDetails","RuleAntecedentDetails","consequents_list","sort","b","element","setConsequentDelay","antecedents_list","element_idx","SetRuleCondition","SetStartValueRuleAntecedent","SetStopValueRuleAntecedent","oldDelay","min","oldCondition","oldValue","elementId","max","step","AddAlertEmailProcess","checkAddEmailFunction","addNewAlertEmail","checkAddNewEmail","modifyEmailRequest","handleModifyAlertEmail","modifyAlertEmail","email_init","key_count","FormModifyEmail","removeAlertEmailRequest","DeviceConsequentPopUp","deviceConsequentPopUp","consequentIdx","DeviceDetail","consequentName","setConsequentAutomaticRequest","setConsequentManualMeasureRequest","handleAddAlertEmailPopUp","modifyConsequentName","addEmailLocal","addNewAlertEmailRequest","deviceDetails","handleClick","last_on","last_off","set_automatic_button","SetManualMeasureButton","SwitchDetails","EmailTitle","EmailDetail","AlertDetails","consequent_idx","email_list","email_element","align","FormControlLabel","control","Switch","checked","label","disabled","ElementDetails","getDeviceMeasureRequest","setRuleAntecedentRequest","setRuleConsequentRequest","onDragEnd","AppNew","antecedentId_list","antecedent_idx","concat","refreshAntecedents","consequentId_list","refreshConsequents","getRules","rules_list","rulesId_list","refreshRules","newRule","newMeasure","rule_name","post","newRulesList","rule_json","JSON","stringify","params","rule_id","device_name","registerNewDeviceLocal","newAntecedents","newIndex","newConsequents","delete","NewRules","splice","deleteRuleConsequentLocal","idx_rule","rule_consequent","idx_consequent","newRuleConsequents","deleteRuleAntecedentLocal","idx_antecedent","rulesList","push","newCondition","newStart","newStop","result","destination","source","reason","droppableId","Corder","newSetting","antecendents","handleLogOut","logout","addAlertEmailPopUp","handleRefreshAntecedents","refresh","handleRefreshConsequents","handleRefreshRules","handleServerErrorPopUp","server_error","decoded","decode","uid","defaults","headers","common","toFixed","TopBar1","TopBar1Element","TopBar1Button","ServerErrorPopUp","base_url","Main","path","PrivateRoute","useRouteMatch","useLocation","user_id","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c3da34a2.chunk.js","sourcesContent":["import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class UserLoginProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"\",\r\n            password: \"\"\r\n        }\r\n    }\r\n\r\n    setUserName = (userName) => {\r\n        this.setState({ userName: userName })\r\n    }\r\n    setPassword = (password) => {\r\n        this.setState({ password: password })\r\n    }\r\n\r\n    loginSubmit = (event) => {\r\n        this.props.UserLoginRequest(this.state.userName, this.state.password);\r\n        event.preventDefault();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.userLoginPopUp} onHide={() => this.props.handleLoginPopUp()}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        \"LOGIN\"\r\n                        </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div>\r\n                        <p style={{ display: this.props.userLoginError ? '' : 'none' }}> Error: User Name or Password are not correct!</p>\r\n                    </div>\r\n                    <div>\r\n                        <form name=\"login\" onSubmit={this.loginSubmit}>\r\n                            <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"email\"\r\n                                onChange={(e) => {\r\n                                    this.props.handleUserLoginError(false);\r\n                                    const NewName = e.target.value;\r\n                                    this.setUserName(NewName)\r\n                                }}\r\n                            />\r\n                            <br></br>\r\n                            <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"password\"\r\n                                onChange={(e) => {\r\n                                    this.props.handleUserLoginError(false);\r\n                                    const password = e.target.value;\r\n                                    this.setPassword(password)\r\n                                }}\r\n                            />\r\n                            <br></br>\r\n                            <input type=\"submit\" style={{visibility:\"hidden\"}}/>\r\n                        </form>\r\n                    </div>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <div>\r\n                        <button onClick={() => {\r\n                            this.props.UserLoginRequest(this.state.userName, this.state.password);\r\n                        }}>\r\n                            LOGIN\r\n                        </button>\r\n                    </div>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class UserRegisterProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkError: false,\r\n            name: \"\",\r\n            surname: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            repeatPassword: \"\",\r\n            errorMessage: \"\",\r\n            password_length : 2,\r\n\r\n        }\r\n    }\r\n\r\n    setName = (name) => {\r\n        this.setState({ name: name })\r\n    }\r\n\r\n    setSurname = (surname) => {\r\n        this.setState({ surname: surname })\r\n    }\r\n\r\n    setEmail = (email) => {\r\n        this.setState({ email: email })\r\n    }\r\n    setPassword = (password) => {\r\n        this.setState({ password: password })\r\n    }\r\n\r\n    setRepeatPassword = (password) => {\r\n        this.setState({ repeatPassword: password })\r\n    }\r\n\r\n    registrationSubmit = (event) =>{\r\n        this.registrationFunction();\r\n        event.preventDefault();\r\n    }\r\n\r\n    registrationFunction = () => {\r\n        if (\r\n        !this.props.duplicateUserError &&\r\n        this.state.password.length > this.state.password_length && \r\n        this.state.email.includes(\"@\") && \r\n        this.state.password === this.state.repeatPassword &&\r\n        this.state.name.length>0 &&\r\n        this.state.surname.length>0\r\n        ) {\r\n            this.setState({checkError: false});\r\n            this.props.UserRegistrationRequest(this.state.email, this.state.password, this.state.name, this.state.surname);\r\n        }\r\n        else{\r\n            this.setState({checkError: true});\r\n            if(this.props.duplicateUserError){\r\n                this.setState({errorMessage: \"Error: Email already registerd.\"});\r\n            }\r\n            else if(this.state.password.length <= this.state.password_length){\r\n                this.setState({errorMessage: \"Error: password don't attempt security standard. Password must be at least 2 character long.\"});\r\n            }\r\n            else if(!this.state.email.includes(\"@\")){\r\n                this.setState({errorMessage: \"Error: email non valid\"});\r\n            }\r\n            else if(this.state.password === this.state.repeatPassword){\r\n                this.setState({errorMessage: \"Error: the repeated password must be identical to the previous password\"});\r\n            }\r\n            else{\r\n                this.setState({errorMessage: \"Error: you must register your name and surname\"});\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.userRegisterPopUp} onHide={() => this.props.handleRegisterPopUp()}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        \"SING UP\"\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div>\r\n                        <div>\r\n                            <p style={{ display: this.state.checkError ? 'block' : 'none' }}> {this.state.errorMessage}</p>\r\n                        </div>\r\n                        <form name=\"login\" onSubmit={this.registrationSubmit}>\r\n                            <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"name\"\r\n                                onChange={(e) => {\r\n                                    const name = e.target.value;\r\n                                    this.setName(name)\r\n                                }} />\r\n                            <br></br>\r\n                            <input type=\"text\" id=\"surname\" name=\"surname\" placeholder=\"surname\"\r\n                                onChange={(e) => {\r\n                                    const surname = e.target.value;\r\n                                    this.setSurname(surname)\r\n                                }} />\r\n                            <br></br>\r\n                            <input type=\"text\" id=\"email\" name=\"email\" placeholder=\"email\"\r\n                                onChange={(e) => {\r\n                                    const email = e.target.value;\r\n                                    this.setEmail(email)\r\n                                }} />\r\n                            <br></br>\r\n                            <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"password\"\r\n                                onChange={(e) => {\r\n                                    const password = e.target.value;\r\n                                    this.setPassword(password)\r\n                                }} />\r\n                            <br></br>\r\n                            <input type=\"password\" id=\"repeat_password\" name=\"repeat_password\" placeholder=\"repeat password\"\r\n                                onChange={(e) => {\r\n                                    const password = e.target.value;\r\n                                    this.setRepeatPassword(password)\r\n                                }} />\r\n                            <br></br>\r\n                            <input type=\"submit\" style={{visibility:\"hidden\"}}/>\r\n                        </form>\r\n                    </div>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <div>\r\n                        <button onClick={() => {\r\n                            this.registrationFunction();\r\n                        }}>\r\n                            SING UP\r\n                        </button>\r\n                    </div>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n}","export default __webpack_public_path__ + \"static/media/yourule_logo2.d9c4ebda.png\";","import React from 'react';\r\nimport axios from 'axios';\r\nimport UserLoginProcess from './UserLoginProcess'\r\nimport UserRegisterProcess from './UserRegisterProcess'\r\nimport { Redirect } from 'react-router-dom';\r\nimport yourule_logo2 from './yourule_logo2.png';\r\nimport styled from \"styled-components\";\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\n\r\nvar jwt = require('jwt-simple');\r\n\r\nexport default class UserAccessProcess extends React.Component {\r\n    constructor(props) {\r\n\r\n        super(props);\r\n        this.state = {\r\n            userNameList: [],\r\n            userLoginPopUp: false,\r\n            userRegisterPopUp: false,\r\n            userName: \"\",\r\n            password: \"\",\r\n            redirect: \"\",\r\n            userLoginError: false,\r\n            idToken: \"\",\r\n            duplicateUserError: false,\r\n\r\n            menuPopUp: false,\r\n            anchorEl: undefined\r\n        }\r\n    }\r\n\r\n    UserLoginRequest = async(email, password) => {\r\n        console.log(\"UserAccess GET login\")\r\n        var access_token = jwt.encode({ email: email, password: password }, process.env.REACT_APP_JWT_SECRET);\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/user/login?access_token=\" + access_token;\r\n        try {\r\n            let res = await axios.get(url)\r\n            const tokenId = res.data.tokenId;\r\n            if (tokenId !== \"false\") {\r\n                this.handleLoginPopUp();\r\n                this.setUser(email, tokenId)\r\n            }\r\n            else {\r\n                this.setState({ userLoginError: true });\r\n            }\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n\r\n\r\n    UserRegistrationRequest = async(email, password, name, surname) => {\r\n        console.log(\"UserAccess POST registration\")\r\n        var access_token = jwt.encode({ email: email, password: password, name: name, surname: surname }, process.env.REACT_APP_JWT_SECRET);\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/user/registration?access_token=\" + access_token;\r\n        try {\r\n            let res = await axios.get(url)\r\n            const tokenId = res.data.tokenId;\r\n            if (tokenId !== \"false\") {\r\n                this.handleRegisterPopUp();\r\n                this.setUser(email, tokenId);\r\n            } else {\r\n                this.setState({ duplicateUserError: true });\r\n            }\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n\r\n    handleMenuPopUp = (event) => {\r\n        this.setState({\r\n            menuPopUp: !this.state.menuPopUp,\r\n            anchorEl: event.currentTarget\r\n        });\r\n    }\r\n\r\n    handleUserLoginError = (check) => {\r\n        this.setState({ userLoginError: check });\r\n    }\r\n\r\n    handleLoginPopUp = () => {\r\n        this.setState({ userLoginPopUp: !this.state.userLoginPopUp })\r\n    }\r\n    handleRegisterPopUp = () => {\r\n        this.setState({ userRegisterPopUp: !this.state.userRegisterPopUp })\r\n    }\r\n\r\n    setUser = (email, idToken) => {\r\n        this.setState({\r\n            email: email,\r\n            idToken: idToken,\r\n            redirect: process.env.REACT_APP_PROTECTED_URL + '?email=' + email + '&idToken=' + idToken\r\n        })\r\n        console.log(\"redirect\")\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirect === \"\") {\r\n            return (\r\n                <AppDiv>\r\n                    <TopBar>\r\n                        <TopBarElement>\r\n                            WELCOME PORTAL\r\n                        </TopBarElement>\r\n                        <TopBarButton onClick={(event) => { this.handleMenuPopUp(event) }}>\r\n                            <MenuIcon fontSize=\"large\" style={{ color: 'white' }} />\r\n                        </TopBarButton>\r\n                        <PopperStyled placement=\"bottom-end\" id='menu-popper' open={this.state.menuPopUp} anchorEl={this.state.anchorEl}>\r\n                            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                                <ListItem button onClick={() => {\r\n                                    this.handleLoginPopUp();\r\n                                }}>\r\n                                    <ListItemIcon>\r\n                                        <VpnKeyIcon fontSize=\"small\" style={{ color: 'white' }} />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"LOGIN\" />\r\n                                </ListItem>\r\n                                <Divider style={{ color: 'white !important' }} />\r\n                                <ListItem button onClick={() => {\r\n                                    this.handleRegisterPopUp();\r\n                                }}>\r\n                                    <ListItemIcon>\r\n                                        <CreateIcon fontSize=\"small\" style={{ color: 'white' }} />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"REGISTER\" />\r\n                                </ListItem>\r\n                            </List>\r\n                            <Divider />\r\n                        </PopperStyled>\r\n                    </TopBar>\r\n                    <UserLoginProcess\r\n                        userLoginPopUp={this.state.userLoginPopUp}\r\n                        handleLoginPopUp={this.handleLoginPopUp}\r\n                        handleUserLoginError={this.handleUserLoginError}\r\n                        userLoginError={this.state.userLoginError}\r\n                        UserLoginRequest={this.UserLoginRequest}\r\n                        setUser={this.setUser}\r\n                    />\r\n                    <UserRegisterProcess\r\n                        userRegisterPopUp={this.state.userRegisterPopUp}\r\n                        handleRegisterPopUp={this.handleRegisterPopUp}\r\n                        UserRegistrationRequest={this.UserRegistrationRequest}\r\n                        setUser={this.setUser}\r\n                        duplicateUserError={this.state.duplicateUserError}\r\n                    />\r\n                    <GreatBody>\r\n                        <img src={yourule_logo2} alt=\"fireSpot\" />\r\n                    </GreatBody>\r\n                </AppDiv>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <Redirect to={{\r\n                    pathname: process.env.REACT_APP_PROTECTED_URL,\r\n                    state: { idToken: this.state.idToken }\r\n\r\n                }\r\n\r\n\r\n\r\n                } />\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nconst PopperStyled = styled(Popper)`\r\ncolor: white;\r\nbackground-color: rgb(21, 33, 207);\r\nborder-style: solid;\r\n`;\r\n\r\n\r\nconst AppDiv = styled.div`\r\ndisplay: flex;\r\nflex-flow: column;\r\nwidth: 100%;\r\nheight: 100%;\r\nbackground-color: rgb(190, 210, 218);\r\n`;\r\n\r\nconst TopBar = styled.div`\r\nbackground-color: rgb(21, 33, 207);\r\nwidth: 100%;\r\n`;\r\n\r\nconst TopBarElement = styled.div`\r\n  float: left;\r\n  color: #f2f2f2;\r\n  text-align: center;\r\n  padding: 14px 16px;\r\n  text-decoration: none;\r\n  font-size: 17px;\r\n`;\r\n\r\nconst TopBarButton = styled(IconButton)`\r\n  float: right;\r\n  margin-top: 2%;\r\n  margin-bottom: 2%;\r\n`;\r\n\r\nconst GreatBody = styled.div`\r\n  display: flex;\r\n  flex-flow: row;\r\n  width: 100%;\r\n  height: 100%;\r\n  justify-content: center;\r\n`;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class CreateRuleProcess extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      checkCreateNewRule: false,\r\n      ruleName: \"\",\r\n    }\r\n\r\n  }\r\n\r\n  checkCreateRuleFunction(rules, ruleName) {\r\n    if (rules.some(rule => rule.name === ruleName)) {\r\n      this.setState({\r\n        checkCreateNewRule: true\r\n      })\r\n    }\r\n    else {\r\n      this.setState({\r\n        checkCreateNewRule: false,\r\n        ruleName: ruleName\r\n      })\r\n    }\r\n  }\r\n\r\n  createRule = (event) => {\r\n    if (!this.state.checkCreateNewRule) {\r\n      const ruleName = this.state.ruleName\r\n      this.props.createRuleRequest(ruleName);\r\n    }\r\n    event.preventDefault();\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Modal show={this.props.AddRulePopUp} onHide={() => this.props.handleAddRulePopUp()}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>ADD RULE</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <div className=\"GenericModalBody\">\r\n              <p style={{ display: this.state.checkCreateNewRule ? 'block' : 'none' }}> Error: rule name already exist! Choose another name.</p>\r\n              <form onSubmit={this.createRule}>\r\n                <label htmlFor=\"ruleName\">RULE NAME: </label>\r\n                <input name=\"ruleName\" id=\"ruleName\" type=\"text\"\r\n                  onChange={(e) => {\r\n                    const ruleName = e.target.value;\r\n                    this.checkCreateRuleFunction(this.props.rules, ruleName);\r\n                  }}\r\n                />\r\n              </form>\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <button onClick={() => {\r\n              if (!this.state.checkCreateNewRule) {\r\n                const ruleName = this.state.ruleName;\r\n                this.props.createRuleRequest(ruleName);\r\n              }\r\n            }}>\r\n              NEXT\r\n                </button>\r\n            <button onClick={() => this.props.handleAddRulePopUp()}>Close</button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </div >)\r\n  }\r\n\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class AddRuleConsequentProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.props.addRuleConsequentPopUp}\r\n                    onHide={() => {\r\n                        this.props.handleAddRuleConsequentPopUp();\r\n                        this.props.handleSetRulePopUp(true);\r\n                    }}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>\r\n                            <div>SWITCHES</div>\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"GenericModalBody\">\r\n                            <table>\r\n                                <tbody>\r\n                                    <AddRuleConsequentDevice\r\n                                        newRuleIdx={this.props.newRuleIdx}\r\n                                        rules={this.props.rules}\r\n                                        consequents={this.props.consequents}\r\n                                        setConsequentRuleLocal={this.props.setConsequentRuleLocal}\r\n                                        handleModify={this.props.handleModify}\r\n                                    />\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            this.props.handleAddRuleConsequentPopUp();\r\n                            this.props.handleSetRulePopUp(true);\r\n                        }}>\r\n                            Close\r\n                        </button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction AddRuleConsequentDevice(props) {\r\n    var i = -1;\r\n    const ruleIdx = props.newRuleIdx;\r\n    const consequentRule = props.rules[ruleIdx].consequent;\r\n    const consequent_order = (consequentRule.length+1).toString();\r\n    var consequentsId = [];\r\n    if (consequentRule.length > 0) {\r\n        consequentsId = consequentRule.map(item => {\r\n            return (item.device_id)\r\n        })\r\n    }\r\n\r\n    return (\r\n        props.consequents.map(item => {\r\n            if (!consequentsId.some(c => c === item.id)) {\r\n                i++;\r\n                console.log(item)\r\n                return (\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <button onClick={() => {\r\n                                var automatic = \"\";\r\n                                var measure = \"measure\"\r\n                                if (item.id.includes(\"alert\")){\r\n                                    automatic=\"true\";\r\n                                }\r\n                                else{\r\n                                    automatic=item.automatic;\r\n                                    measure = item.measure\r\n                                }\r\n                                const newConsequent = { device_id: item.id, name: item.name, if_value: \"on\", else_value: \"off\", automatic: automatic, measure: measure, order: consequent_order, delay: \"0\"};\r\n                                props.setConsequentRuleLocal(props.newRuleIdx, newConsequent);\r\n                                props.handleModify(true);\r\n                            }}>\r\n                                {item.name}\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        })\r\n    )\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class AddRuleAntecedentProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.props.addRuleAntecedentPopUp}\r\n                    onHide={() => {\r\n                        this.props.handleAddRuleAntecedentPopUp();\r\n                        this.props.handleSetRulePopUp(true);\r\n                    }}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>\r\n                            <div>SENSORS</div>\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"GenericModalBody\">\r\n                            <div>\r\n                                <table>\r\n                                    <tbody>\r\n                                        <AddRuleAntecedentsDevice\r\n                                            newRuleIdx={this.props.newRuleIdx}\r\n                                            rules={this.props.rules}\r\n                                            antecedents={this.props.antecedents}\r\n                                            setAntecedentRuleLocal={this.props.setAntecedentRuleLocal}\r\n                                            handleModify={this.props.handleModify}\r\n                                        />\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                            <div>\r\n                                <table>\r\n                                    <tbody>\r\n                                        <AddRuleAntecedentSwitchLastTimeOn\r\n                                            newRuleIdx={this.props.newRuleIdx}\r\n                                            rules={this.props.rules}\r\n                                            setAntecedentRuleLocal={this.props.setAntecedentRuleLocal}\r\n                                            handleModify={this.props.handleModify}\r\n                                        />\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            this.props.handleAddRuleAntecedentPopUp();\r\n                            this.props.handleSetRulePopUp(true);\r\n                        }}>\r\n                            Close\r\n                        </button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction AddRuleAntecedentsDevice(props) {\r\n    var i = -1;\r\n    const ruleIdx = props.newRuleIdx;\r\n    const antecedentRule = props.rules[ruleIdx].antecedent;\r\n    var antecedentsId = [];\r\n    if (antecedentRule.length > 0) {\r\n        antecedentsId = antecedentRule.map(item => {\r\n            return (item.device_id)\r\n        })\r\n    }\r\n\r\n    return (\r\n        props.antecedents.map(item => {\r\n            if (!antecedentsId.some(c => c === item.id)) {\r\n                i++;\r\n                return (\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <button onClick={() => {\r\n                                var value = \"//\"\r\n                                if (item.measure !== null){\r\n                                    value = item.measure\r\n                                }\r\n                                var newAntecedent = { device_id: item.id, name: item.name, start_value: \"0\", stop_value: \"0\", condition: \"between\", measure: \"\", value: value };\r\n                                if (item.id.includes(\"timer\")) {\r\n                                    newAntecedent.start_value = \"00:00\";\r\n                                    newAntecedent.stop_value = \"00:00\";\r\n                                    newAntecedent.measure = \"time\";\r\n                                }\r\n                                else if (item.id.includes(\"PHOTOCELL\")) {\r\n                                    newAntecedent.measure = \"luminosity (%)\";\r\n                                }\r\n                                else if (item.id.includes(\"WATERLEVEL\")) {\r\n                                    newAntecedent.measure = \"water level (%)\";\r\n                                }\r\n                                else if (item.id.includes(\"SOILMOISTURE\")) {\r\n                                    newAntecedent.measure = \"soil moisture (%)\";\r\n                                }\r\n                                else if (item.id.includes(\"AMMETER\")){\r\n                                    newAntecedent.measure = \"power (W)\";\r\n                                } \r\n                                else if (item.id.includes(\"BUTTON\")){\r\n                                    newAntecedent.measure = \"status (On/Off)\";\r\n                                    newAntecedent.condition = \"=\";\r\n                                    newAntecedent.start_value = \"on\"\r\n                                    newAntecedent.stop_value = \"//\"\r\n                                }\r\n                                console.log(newAntecedent)\r\n                                props.setAntecedentRuleLocal(props.newRuleIdx, newAntecedent);\r\n                                props.handleModify(true);\r\n                            }}>\r\n                                {item.name}\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        })\r\n    )\r\n}\r\n\r\nfunction AddRuleAntecedentSwitchLastTimeOn(props) {\r\n    const ruleIdx = props.newRuleIdx;\r\n    const antecedentRule = props.rules[ruleIdx].antecedent;\r\n    var antecedentsId = [];\r\n    if (antecedentRule.length > 0) {\r\n        antecedentsId = antecedentRule.map(item => {\r\n            return (item.device_id)\r\n        })\r\n    }\r\n    var i = -1;\r\n    const consequents = props.rules[ruleIdx].consequent;\r\n    if (consequents.length > 0) {\r\n        return (\r\n            consequents.map(item => {\r\n                if (!item.device_id.includes(\"alert\")) {\r\n                    if (!antecedentsId.some(c => c === item.device_id)) {\r\n                        i++;\r\n                        return (\r\n                            <tr key={i}>\r\n                                <td>\r\n                                    <button onClick={() => {\r\n                                        var newAntecedent = { device_id: item.device_id, name: item.name, start_value: \"00:00\", stop_value: \"00:00\", condition: \"delta\", measure: \"last time on\", value: \"-\" };\r\n                                        props.setAntecedentRuleLocal(props.newRuleIdx, newAntecedent);\r\n                                        props.handleModify(true);\r\n                                    }}>\r\n                                        {item.name}\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        )\r\n                    }\r\n                    else {\r\n                        return null\r\n                    }\r\n                }else {\r\n                    return null\r\n                }\r\n\r\n            })\r\n        )\r\n    }\r\n    else {\r\n        return null\r\n    }\r\n\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nexport default class RegisterDeviceProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            registerDeviceError: false,\r\n            newDeviceId: \"\"\r\n        }\r\n    }\r\n\r\n    CheckRegisterDeviceRecognition() {\r\n        const allDeviceId = this.props.allDeviceId;\r\n        const deviceId = this.state.newDeviceId;\r\n        var deviceRecognition = false;\r\n        if (!allDeviceId.some(el => el === deviceId)) {\r\n            if (deviceId.includes(\"SWITCH\")) {\r\n                deviceRecognition = true;\r\n            }\r\n            else if (deviceId.includes(\"PHOTOCELL\")) {\r\n                deviceRecognition = true\r\n            }\r\n            else if (deviceId.includes(\"WATERLEVEL\")) {\r\n                deviceRecognition = true\r\n            }\r\n            else if (deviceId.includes(\"SOILMOISTURE\")) {\r\n                deviceRecognition = true\r\n            }\r\n            else if (deviceId.includes(\"AMMETER\")) {\r\n                deviceRecognition = true\r\n            }\r\n            else if (deviceId.includes(\"BUTTON\")) {\r\n                deviceRecognition = true\r\n            }\r\n\r\n        }\r\n        this.setState({ registerDeviceError: !deviceRecognition }, () => { this.render() })\r\n        return deviceRecognition\r\n    }\r\n\r\n    NewDeviceIdRegistration(newDeviceId) {\r\n        this.setState({\r\n            newDeviceId: newDeviceId\r\n        }, () => { this.render() })\r\n    }\r\n\r\n    createDevice = (event) => {\r\n        const checkRecognition = this.CheckRegisterDeviceRecognition();\r\n        if (checkRecognition) {\r\n            deviceInitialization(this.props, this.state.newDeviceId);\r\n            this.props.handleRegisterDevicePopUp();\r\n        }\r\n        event.preventDefault();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.props.registerDevicePopUp} onHide={() => this.props.handleRegisterDevicePopUp()}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>ADD DEVICE</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"GenericModalBody\">\r\n                            <p style={{ display: this.state.registerDeviceError ? 'block' : 'none' }} > Error: device Id is not correct!</p>\r\n                            <form onSubmit={this.createDevice}>\r\n                                <label htmlFor=\"deviceId\">DEVICE ID: </label>\r\n                                <input name=\"deviceId\" id=\"deviceId\" type=\"text\"\r\n                                    onChange={(e) => {\r\n                                        var newDeviceId = e.target.value;\r\n                                        this.NewDeviceIdRegistration(newDeviceId);\r\n                                    }}\r\n                                />\r\n                            </form>\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            const checkRecognition = this.CheckRegisterDeviceRecognition();\r\n                            if (checkRecognition) {\r\n                                deviceInitialization(this.props, this.state.newDeviceId);\r\n                                this.props.handleRegisterDevicePopUp();\r\n                            }\r\n                        }}>\r\n                            NEXT\r\n                        </button>\r\n                        <button onClick={() => this.props.handleRegisterDevicePopUp()}>Close</button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction deviceInitialization(props, deviceId) {\r\n    var newDevice = null;\r\n    var type = \"\"\r\n    if (deviceId.includes(\"SWITCH\")) {\r\n        type = \"consequent\"\r\n        newDevice = { id: deviceId, name: \"switch\", measure: \"off\", rules: [], automatic: \"true\", manual_measure: \"off\" };\r\n    }\r\n    else {\r\n        type = \"antecedent\"\r\n        if (deviceId.includes(\"PHOTOCELL\")) {\r\n            newDevice = { id: deviceId, name: \"photocell\", setting: \"1024\", measure: \"init\", absolute_measure: \"init\", error: \"0\", rules: [] };\r\n        }\r\n        else if (deviceId.includes(\"WATERLEVEL\")) {\r\n            newDevice = { id: deviceId, name: \"waterlevel\", setting: \"100\", measure: \"init\", absolute_measure: \"init\", error: \"0\", rules: [] };\r\n        }\r\n        else if (deviceId.includes(\"SOILMOISTURE\")) {\r\n            newDevice = { id: deviceId, name: \"soilmoisture\", setting: \"1024\", measure: \"init\", absolute_measure: \"init\", error: \"0\", rules: [] };\r\n        }\r\n        else if (deviceId.includes(\"AMMETER\")) {\r\n            newDevice = { id: deviceId, name: \"ammeter\", setting: \"100\", measure: \"init\", absolute_measure: \"init\", error: \"0\", rules: [] };\r\n        }\r\n        else if (deviceId.includes(\"BUTTON\")){\r\n            newDevice = { id: deviceId, name: \"button\", setting: \"\", measure: \"init\", absolute_measure: \"init\", error: \"\", rules: [] };\r\n        }\r\n    }\r\n    props.registerDeviceRequest(type, newDevice);\r\n}","import React from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\n\r\nexport default function ViewRules(props) {\r\n    return (\r\n        <MyList>\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                <ItemList\r\n                    handleSetRulePopUp={props.handleSetRulePopUp}\r\n                    setNewRule={props.setNewRule}\r\n                    rules={props.rules}\r\n                    getRuleById={props.getRuleById}\r\n                    newRuleId={props.newRuleId}\r\n                    modify={props.modify}\r\n                    handleModify={props.handleModify}\r\n                    AntecedentRulePopUpBody={props.AntecedentRulePopUpBody}\r\n                    deleteRuleRequest={props.deleteRuleRequest}\r\n                    newRuleIdx={props.newRuleIdx}\r\n                    setRuleRequest={props.setRuleRequest}\r\n\r\n                />\r\n            </List>\r\n        </MyList>\r\n    );\r\n}\r\n\r\n\r\nfunction ItemList(props) {\r\n    if (props.rules.length > 0) {\r\n        var i = 0;\r\n        return (\r\n            props.rules.map(rule => {\r\n                return (\r\n                    <div key={i++}>\r\n                        <MyListItem style={{color:\"black\"}} className={props.newRuleId === rule.id ? \"ItemButtonClicked\" : \"\"}\r\n                            onClick={() => {\r\n                                props.getRuleById(rule.id);\r\n                                props.setNewRule(rule.id, rule.name);\r\n\r\n                            }}>\r\n                            <ListItemText primary={rule.name} />\r\n                        </MyListItem>\r\n                        <Divider />\r\n                    </div>\r\n                )\r\n            })\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Divider />\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst MyList = styled.div`\r\n color: white;\r\n  margin: 5px;\r\n  padding-left: 5px;\r\n  padding-right: 0px;\r\n  \r\n  height: 100%;\r\n  overflow-y:auto;\r\n  text-align: center;\r\n`;\r\n\r\nconst MyListItem = styled(ListItem)`\r\npadding-bottom: 0px !important;\r\npadding-top: 10px !important;\r\n\r\n`;","import React from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\n\r\nexport default function ViewAntecedents(props) {\r\n    return (\r\n\r\n        <MyList>\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                <ItemList\r\n                    antecedents={props.antecedents}\r\n                    handleDeviceAntecedentPopUp={props.handleDeviceAntecedentPopUp}\r\n                    setNewAntecedent={props.setNewAntecedent}\r\n                    getAntecedentById={props.getAntecedentById}\r\n                    antecedentId={props.antecedentId}\r\n                    modifyDevice={props.modifyDevice}\r\n                    updateDeviceRequest={props.updateDeviceRequest}\r\n                    handleModifyDevice={props.handleModifyDevice}\r\n                    deleteDeviceRequest={props.deleteDeviceRequest}\r\n                />\r\n            </List >\r\n        </MyList >\r\n    );\r\n}\r\n\r\nfunction ItemList(props) {\r\n    if (props.antecedents.length > 0) {\r\n        const deviceIdList = props.antecedents.map(antecedent => { return antecedent.id });\r\n        return (\r\n            props.antecedents.map(antecedent => {\r\n                var index = deviceIdList.indexOf(antecedent.id)\r\n                return (\r\n                    <div key={index}>\r\n                            <MyListItem style={{color:\"black\"}} className={props.antecedentId === antecedent.id ? \"ItemButtonClicked\" : \"\"}\r\n                                onClick={() => {\r\n                                    props.getAntecedentById(antecedent.id);\r\n                                    props.setNewAntecedent(antecedent.id, antecedent.name, index);\r\n                                }}>\r\n                                <ListItemText primary={antecedent.name} />\r\n                            </MyListItem>\r\n                            <Divider />\r\n                    </div>\r\n                )\r\n            })\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            \r\n            <Divider />\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nconst MyList = styled.div`\r\n color: white;\r\n  margin: 5px;\r\n  padding-left: 5px;\r\n  padding-right: 0px;\r\n  \r\n  height: 100%;\r\n  overflow-y:auto;\r\n  text-align: center;\r\n`;\r\n\r\nconst MyListItem = styled(ListItem)`\r\npadding-bottom: 0px !important;\r\npadding-top: 10px !important;\r\n\r\n`;\r\n\r\n","import React from 'react';\r\nimport styled from \"styled-components\";\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\n\r\nexport default function ViewConsequents(props) {\r\n    return (\r\n        <MyList>\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                <ItemList\r\n                    consequents={props.consequents}\r\n                    handleDeviceConsequentPopUp={props.handleDeviceConsequentPopUp}\r\n                    setNewConsequent={props.setNewConsequent}\r\n                    getConsequentById={props.getConsequentById}\r\n                    consequentId={props.consequentId}\r\n                    modifyDevice={props.modifyDevice}\r\n                    handleModifyDevice={props.handleModifyDevice}\r\n                    deleteDeviceRequest={props.deleteDeviceRequest}\r\n                    updateDeviceRequest={props.updateDeviceRequest}\r\n                />\r\n            </List>\r\n        </MyList>\r\n    );\r\n}\r\n\r\nfunction ItemList(props) {\r\n    if (props.consequents.length > 0) {\r\n        const deviceIdList = props.consequents.map(consequent => { return consequent.id });\r\n        return (\r\n            props.consequents.map(consequent => {\r\n                var index = deviceIdList.indexOf(consequent.id)\r\n                return (\r\n                    <div key={index}>\r\n                            <MyListItem style={{color:\"black\"}} className={props.consequentId === consequent.id ? \"ItemButtonClicked\" : \"\"}\r\n                                onClick={() => {\r\n                                    props.getConsequentById(consequent.id);\r\n                                    props.setNewConsequent(consequent.id, consequent.name, index);\r\n\r\n                                }}>\r\n                                <ListItemText primary={consequent.name} />\r\n                            </MyListItem>\r\n                            <Divider />\r\n                    </div>\r\n                )\r\n            })\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <Divider />\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst MyList = styled.div`\r\n color: white;\r\n  margin: 5px;\r\n  padding-left: 5px;\r\n  padding-right: 0px;\r\n  \r\n  height: 100%;\r\n  overflow-y:auto;\r\n  text-align: center;\r\n`;\r\n\r\nconst MyListItem = styled(ListItem)`\r\npadding-bottom: 0px !important;\r\npadding-top: 10px !important;\r\n\r\n`;\r\n","import React from 'react';\r\nimport ViewRules from './ViewRules'\r\nimport ViewAntecedents from './ViewAntecedents'\r\nimport ViewConsequents from './ViewConsequents'\r\nimport styled from \"styled-components\";\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\n\r\nexport default class LateralMenu extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            popper: false,\r\n            anchorEl: undefined\r\n        }\r\n    }\r\n\r\n    handlePopper = () => {\r\n        this.setState({\r\n            popper: !this.state.popper,\r\n        })\r\n    }\r\n\r\n\r\n    handleAncorPopper = (event) => {\r\n        this.setState({\r\n            anchorEl: event.currentTarget\r\n        })\r\n    }\r\n\r\n    AddFunction = () => {\r\n        if (this.props.routeUrl === \"sensor\") {\r\n            this.props.handleRegisterDevicePopUp();\r\n        }\r\n        else if (this.props.routeUrl === \"switch\") {\r\n            this.props.handleRegisterDevicePopUp();\r\n        }\r\n        else if (this.props.routeUrl === \"rule\") {\r\n            this.props.handleAddRulePopUp();\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        if (this.props.routeUrl === \"sensor\") {\r\n            return (\r\n                <LateralMenuDiv>\r\n                    <RouteSelection\r\n                        routeUrl={this.props.routeUrl}\r\n                        handlePopper={this.handlePopper}\r\n                        handleAncorPopper={this.handleAncorPopper}\r\n                        anchorEl={this.state.anchorEl}\r\n                        popper={this.state.popper}\r\n                        sensorRoute={this.props.sensorRoute}\r\n                        ruleRoute={this.props.ruleRoute}\r\n                        switchRoute={this.props.switchRoute}\r\n                        AddFunction={this.AddFunction}\r\n                    />\r\n                    <ViewAntecedents\r\n                        antecedents={this.props.antecedents}\r\n                        handleDeviceAntecedentPopUp={this.props.handleDeviceAntecedentPopUp}\r\n                        setNewAntecedent={this.props.setNewAntecedent}\r\n                        getAntecedentById={this.props.getAntecedentById}\r\n                        antecedentId={this.props.antecedentId}\r\n                        modifyDevice={this.props.modifyDevice}\r\n                        updateDeviceRequest={this.props.updateDeviceRequest}\r\n                        handleModifyDevice={this.props.handleModifyDevice}\r\n                        deleteDeviceRequest={this.props.deleteDeviceRequest}\r\n                    />\r\n                </LateralMenuDiv>\r\n            )\r\n        }\r\n        else if (this.props.routeUrl === \"rule\") {\r\n            return (\r\n                <LateralMenuDiv>\r\n                    <RouteSelection\r\n                        routeUrl={this.props.routeUrl}\r\n                        handlePopper={this.handlePopper}\r\n                        handleAncorPopper={this.handleAncorPopper}\r\n                        anchorEl={this.state.anchorEl}\r\n                        popper={this.state.popper}\r\n                        sensorRoute={this.props.sensorRoute}\r\n                        ruleRoute={this.props.ruleRoute}\r\n                        switchRoute={this.props.switchRoute}\r\n                        AddFunction={this.AddFunction}\r\n                    />\r\n                    <ViewRules\r\n                        handleSetRulePopUp={this.props.handleSetRulePopUp}\r\n                        rules={this.props.rules}\r\n                        setNewRule={this.props.setNewRule}\r\n                        getRuleById={this.props.getRuleById}\r\n                        newRuleId={this.props.newRuleId}\r\n                        modify={this.props.modify}\r\n                        handleModify={this.props.handleModify}\r\n                        AntecedentRulePopUpBody={this.props.AntecedentRulePopUpBody}\r\n                        deleteRuleRequest={this.props.deleteRuleRequest}\r\n                        newRuleIdx={this.props.newRuleIdx}\r\n                        setRuleRequest={this.props.setRuleRequest}\r\n                    />\r\n                </LateralMenuDiv>\r\n            )\r\n        }\r\n        else if (this.props.routeUrl === \"switch\") {\r\n            return (\r\n                <LateralMenuDiv>\r\n                    <RouteSelection\r\n                        routeUrl={this.props.routeUrl}\r\n                        handlePopper={this.handlePopper}\r\n                        handleAncorPopper={this.handleAncorPopper}\r\n                        anchorEl={this.state.anchorEl}\r\n                        popper={this.state.popper}\r\n                        sensorRoute={this.props.sensorRoute}\r\n                        ruleRoute={this.props.ruleRoute}\r\n                        switchRoute={this.props.switchRoute}\r\n                        AddFunction={this.AddFunction}\r\n                    />\r\n                    <ViewConsequents\r\n                        consequents={this.props.consequents}\r\n                        handleDeviceConsequentPopUp={this.props.handleDeviceConsequentPopUp}\r\n                        setNewConsequent={this.props.setNewConsequent}\r\n                        getConsequentById={this.props.getConsequentById}\r\n                        consequentId={this.props.consequentId}\r\n                        modifyDevice={this.props.modifyDevice}\r\n                        handleModifyDevice={this.props.handleModifyDevice}\r\n                        deleteDeviceRequest={this.props.deleteDeviceRequest}\r\n                        updateDeviceRequest={this.props.updateDeviceRequest}\r\n                    />\r\n                </LateralMenuDiv>\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\nfunction RouteSelection(props) {\r\n    var route = \"\"\r\n    if (props.routeUrl === \"sensor\") {\r\n        route = \"SENSORS\"\r\n    }\r\n    else if (props.routeUrl === \"rule\") {\r\n        route = \"RULES\"\r\n    }\r\n    else if (props.routeUrl === \"switch\") {\r\n        route = \"SWITCHES\"\r\n    }\r\n    return (\r\n        <div>\r\n            <RouteTitle>\r\n                <AddButton onClick={() => { props.AddFunction() }}>\r\n                    ADD {route} <AddIcon />\r\n                </AddButton>\r\n            </RouteTitle>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nconst LateralMenuDiv = styled.div`\r\n  display: flex;\r\n  flex-flow: column;\r\n  height: 100%;\r\n  float:left;\r\n  text-align: center;\r\n  color: rgba(15, 82, 13, 0.541);\r\n  border-right: #bfbfbf solid 1px !important;\r\n  background-color: #e6e6e6;\r\n`;\r\n\r\nconst RouteTitle = styled.div`\r\ndisplay: flex;\r\nflex-flow: row;\r\nwidth: 100%;\r\nbackground-color: #737373;\r\n`;\r\n\r\n\r\n\r\nconst AddButton = styled(Button)`\r\ncolor: white !important;\r\ntext-align: center;\r\nborder-radius: 0% !important;\r\nwidth: 100%;\r\n`;\r\n\r\n\r\n","export default function DeviceAntecedents(operation, antecedents, idx) {\r\n\r\n    const checkDeviceStatusAndMeasure = (measure_device) => {\r\n        if (measure_device !== \"null\" && measure_device !== \"init\" && measure_device !== \"NaN\" && measure_device !== null) {\r\n            const status = \"connected\"\r\n            const color = \"green\"\r\n            return { measure: measure_device, status: status, color: color }\r\n        }\r\n        else if (measure_device === \"init\") {\r\n            const measure_perc = \"-\";\r\n            const status = \"initialization\"\r\n            const color = \"yellow\"\r\n            return { measure: measure_perc, status: status, color: color }\r\n        }\r\n        else {\r\n            const measure_perc = \"-\";\r\n            const status = \"disconnected\"\r\n            const color = \"red\"\r\n            return { measure: measure_perc, status: status, color: color }\r\n        }\r\n\r\n    }\r\n\r\n    const device_details = (antecedents, idx) => {\r\n        const antecedent = antecedents[idx];\r\n        const deviceId = antecedent.id;\r\n        const measure = antecedent.measure;\r\n        const setting = antecedent.setting;\r\n        const error = antecedent.error;\r\n        var device = {\r\n            measure: \"null\", status: \"disconnected\", color: \"red\", type: \"\", settings: \"\", error_measure: \"\", measure_type: \"\", measure_settings: \"\",\r\n            measure_unit: \"\", max_measure: \"\", max_measure_time: \"\", min_measure: \"\", min_measure_time: \"\"\r\n        };\r\n\r\n        if (deviceId.includes(\"timer\")) {\r\n            var today = new Date();\r\n            device.measure = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\r\n            device.status = \"connected\";\r\n            device.color = \"green\";\r\n            device.type = \"sensor - timer\";\r\n            device.settings = \"/\";\r\n            device.error_measure = \"/\";\r\n            device.measure_type = \"time\";\r\n        }\r\n        else if (deviceId.includes(\"BUTTON\")) {\r\n            const checkStatusDevice = checkDeviceStatusAndMeasure(measure);\r\n            device.status = checkStatusDevice.status;\r\n            device.color = checkStatusDevice.color;\r\n            device.measure = checkStatusDevice.measure;\r\n            device.type = \"sensor - button\";\r\n            device.settings = \"/\";\r\n            device.error_measure = \"/\";\r\n            device.measure_type = \"status\";\r\n            device.max_measure = \"last time on\";\r\n            device.max_measure_time = antecedent.max_measure_time;\r\n            device.min_measure = \"last time off\"\r\n            device.min_measure_time = antecedent.min_measure_time;\r\n        }\r\n        else if (deviceId.includes(\"PHOTOCELL\") || deviceId.includes(\"SOILMOISTURE\")) {\r\n            const checkStatusDevice = checkDeviceStatusAndMeasure(measure);\r\n            device.status = checkStatusDevice.status;\r\n            device.color = checkStatusDevice.color;\r\n            device.measure = checkStatusDevice.measure;\r\n            device.type = deviceId.includes(\"PHOTOCELL\") ? \"sensor - photocell\" : \"sensor - soil moisture\";\r\n            device.settings = \"/\";\r\n            device.error_measure = \"/\";\r\n            device.measure_type = deviceId.includes(\"PHOTOCELL\") ? \"luminosity\" : \"soil moisture\";\r\n            device.measure_unit = \"%\";\r\n            device.max_measure = \"max: \" + compute_relative_measure(deviceId, antecedent.max_measure, setting, error) + \"%\";\r\n            device.max_measure_time = antecedent.max_measure_time;\r\n            device.min_measure = \"min: \" + compute_relative_measure(deviceId, antecedent.min_measure, setting, error) + \"%\";\r\n            device.min_measure_time = antecedent.min_measure_time;\r\n        }\r\n        else if (deviceId.includes(\"AMMETER\")) {\r\n            const checkStatusDevice = checkDeviceStatusAndMeasure(measure);\r\n            device.status = checkStatusDevice.status;\r\n            device.color = checkStatusDevice.color;\r\n            device.measure = checkStatusDevice.measure;\r\n            device.type = \"sensor - ammeter\";\r\n            device.settings = setting;\r\n            device.error_measure = \"/\";\r\n            device.measure_type = \"electric power\";\r\n            device.measure_settings = \"W\";\r\n            device.measure_unit = \"W\";\r\n            device.max_measure = \"max: \" + compute_relative_measure(deviceId, antecedent.max_measure, setting, error) + \"W\";\r\n            device.max_measure_time = antecedent.max_measure_time;\r\n            device.min_measure = \"min: \" + compute_relative_measure(deviceId, antecedent.min_measure, setting, error) + \"W\";\r\n            device.min_measure_time = antecedent.min_measure_time;\r\n        }\r\n        else if (deviceId.includes(\"WATERLEVEL\")) {\r\n            const checkStatusDevice = checkDeviceStatusAndMeasure(measure);\r\n            device.status = checkStatusDevice.status;\r\n            device.color = checkStatusDevice.color;\r\n            device.measure = checkStatusDevice.measure;\r\n            device.type = \"sensor - water level\";\r\n            device.settings = setting;\r\n            device.error_measure = error;\r\n            device.measure_type = \"water level\";\r\n            device.measure_settings = \"cm\";\r\n            device.measure_unit = \"%\";\r\n            device.max_measure = \"max: \" + compute_relative_measure(deviceId, antecedent.min_measure, setting, error) + \"%\";\r\n            device.max_measure_time = antecedent.max_measure_time;\r\n            device.min_measure = \"min: \" + compute_relative_measure(deviceId, antecedent.max_measure, setting, error) + \"%\";\r\n            device.min_measure_time = antecedent.min_measure_time;\r\n        }\r\n        return device\r\n    }\r\n\r\n    const device_relative_measure = (antecedents, idx) => {\r\n        const deviceId = antecedents[idx].id;\r\n        const absolute_measure = antecedents[idx].absolute_measure;\r\n        const setting = antecedents[idx].setting;\r\n        const error = antecedents[idx].error;\r\n        var device = { measure: absolute_measure }\r\n        device.measure = compute_relative_measure(deviceId, absolute_measure, setting, error);\r\n        return device\r\n    }\r\n\r\n    const compute_relative_measure = (deviceId, absolute_measure, setting, error) => {\r\n        const checkStatusDevice = checkDeviceStatusAndMeasure(absolute_measure);\r\n        var measure = \"-\";\r\n        var checkMeasure = checkStatusDevice.measure;\r\n        if (checkMeasure !== \"-\") {\r\n            if (deviceId.includes(\"PHOTOCELL\") || deviceId.includes(\"SOILMOISTURE\")) {\r\n                measure = Math.round((parseInt(checkMeasure) / parseInt(setting)) * 100.0).toString();\r\n            }\r\n            else if (deviceId.includes(\"AMMETER\")) {\r\n                measure = Math.round((parseInt(checkMeasure) / parseInt(setting)) * 100.0).toString();\r\n            }\r\n            else if (deviceId.includes(\"WATERLEVEL\")) {\r\n                const relative_measure = parseInt(checkMeasure) - parseInt(error);\r\n                measure = Math.round((1 - (relative_measure / parseInt(setting))) * 100.0).toString();\r\n            }\r\n        }\r\n        return measure\r\n    }\r\n\r\n    if (operation === \"view\") {\r\n        return (\r\n            device_details(antecedents, idx)\r\n        )\r\n    }\r\n    else if (operation === \"relative_measure\") {\r\n        return (\r\n            device_relative_measure(antecedents, idx)\r\n        )\r\n    }\r\n\r\n}","import React, { useState } from 'react';\r\nimport styled from \"styled-components\";\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport Button from '@material-ui/core/Button';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport DeviceAntecedents from './DeviceAntecedents'\r\n\r\n\r\nexport default class DeviceAntecedentPopUp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkDeviceName: false\r\n        }\r\n    }\r\n\r\n    checkDeviceNameFunction = (devices, newName) => {\r\n        var checkDeviceName = false;\r\n        if (devices.some(device => device.name === newName)) {\r\n            checkDeviceName = true;\r\n        }\r\n        this.setState({\r\n            checkDeviceName: checkDeviceName\r\n        }, () => { this.render() });\r\n\r\n        return checkDeviceName\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.antecedentId !== \"\" && this.props.deviceAntecedentPopUp) {\r\n            const index = this.props.antecedentIdx;\r\n            const rulesName = GetRulesName(this.props);\r\n            return (\r\n                <DeviceDetails\r\n                    antecedentIdx={this.props.antecedentIdx}\r\n                    antecedentId={this.props.antecedentId}\r\n                    antecedentName={this.props.antecedentName}\r\n                    antecedents={this.props.antecedents}\r\n                    index={index}\r\n                    rulesName={rulesName}\r\n                    modifyAntecedentName={this.props.modifyAntecedentName}\r\n                    modifyAntecedentSetting={this.props.modifyAntecedentSetting}\r\n                    modifyAntecedentSettingError={this.props.modifyAntecedentSettingError}\r\n                    modifyDevice={this.props.modifyDevice}\r\n                    checkDeviceNameFunction={this.checkDeviceNameFunction}\r\n                    checkDeviceName={this.state.checkDeviceName}\r\n                    updateDeviceRequest={this.props.updateDeviceRequest}\r\n                    handleModifyDevice={this.props.handleModifyDevice}\r\n                    handleDeviceAntecedentPopUp={this.props.handleDeviceAntecedentPopUp}\r\n                    deleteDeviceRequest={this.props.deleteDeviceRequest}\r\n                    getAntecedentById={this.props.getAntecedentById}\r\n                />\r\n            )\r\n        }\r\n        else {\r\n            return (<ContentContainer></ContentContainer>)\r\n        }\r\n    }\r\n}\r\n\r\nfunction GetRulesName(props) {\r\n    const index = props.antecedentIdx;\r\n    const rules = props.antecedents[index].rules;\r\n\r\n    if (rules.length > 0) {\r\n        const rulesNameList = rules.map(rule => {\r\n            const ruleId = rule.id;\r\n            const ruleName = rule.name;\r\n            return (\r\n                <div key={ruleId}>\r\n                    <ListItem key={ruleId} button onClick={() => {\r\n                        props.setNewRule(ruleId, ruleName);\r\n                        props.ruleRoute();\r\n                    }}>\r\n                        <ListItemText primary={ruleName} />\r\n                    </ListItem>\r\n                    <Divider />\r\n                </div>\r\n\r\n            )\r\n        })\r\n        return (\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                {rulesNameList}\r\n            </List>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                <ListItem>\r\n                    <ListItemText primary=\"no rules setted\" />\r\n                </ListItem>\r\n                <Divider />\r\n            </List>)\r\n    }\r\n}\r\n\r\nconst ContentContainer = styled.div`\r\nwidth: 100%;\r\nheight: 100%;\r\ndisplay: flex;\r\nflex-flow: column;\r\ntext-align: center;\r\nmax-height:100%;\r\noverflow-y: auto;\r\nbackground-color: #d9d9d9;\r\n`;\r\n\r\n\r\nfunction DeviceDetails(props) {\r\n    const deviceDetail = DeviceAntecedents(\"view\",props.antecedents, props.antecedentIdx);\r\n    var measure = deviceDetail.measure;\r\n    var status = deviceDetail.status;\r\n    var type = deviceDetail.type;\r\n    var settings = deviceDetail.settings;\r\n    var error_measure = deviceDetail.error_measure;\r\n    var color = deviceDetail.color;\r\n    var measure_type = deviceDetail.measure_type;\r\n    var measure_settings = deviceDetail.measure_settings;\r\n    var measure_unit = deviceDetail.measure_unit;\r\n\r\n    if (settings !== \"/\") {\r\n        settings = props.modifyDevice ? ModifyMaxMeasureSetting(props) : settings;\r\n    }\r\n    if (error_measure !== \"/\") {\r\n        error_measure = props.modifyDevice ? ModifyErrorSetting(props) : error_measure;\r\n    }\r\n\r\n    const [openRule, handleOpenRule] = useState(false);\r\n    const handleClick = () => {\r\n        handleOpenRule(!openRule);\r\n    };\r\n    return (\r\n        <div className=\"DeviceContentDetail\">\r\n            <ElementTitle>\r\n                <p style={{ display: props.checkDeviceName ? 'block' : 'none' }}> Error: device name already exist! Choose another name.</p>\r\n                <h1> <FiberManualRecordIcon style={{ color: color }} /> {props.antecedentName} </h1>\r\n                <ButtonGroup variant=\"text\" color=\"primary\" aria-label=\"text primary button group\">\r\n                    <Button style={{ display: props.modifyDevice && !props.antecedentId.includes(\"timer\") ? \"\" : \"none\" }}\r\n                        onClick={() => {\r\n                            props.handleModifyDevice();\r\n                            props.handleDeviceAntecedentPopUp(false);\r\n                            props.deleteDeviceRequest(\"antecedent\");\r\n\r\n                        }}>\r\n                        <DeleteIcon fontSize=\"large\" style={{ color: \"red\" }} />\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => {\r\n                            props.getAntecedentById(props.antecedentId);\r\n                        }}>\r\n                        <RefreshIcon fontSize=\"large\" style={{ color: \"black\" }} />\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => {\r\n                            if (props.modifyDevice) {\r\n                                props.updateDeviceRequest(\"antecedent\");\r\n                                props.handleModifyDevice();\r\n                            }\r\n                            else {\r\n                                props.handleModifyDevice();\r\n                            }\r\n                        }}>\r\n                        {props.modifyDevice ? <DoneIcon fontSize=\"large\" style={{ color: \"black\" }} /> : <EditIcon fontSize=\"large\" style={{ color: \"black\" }} />}\r\n\r\n                    </Button>\r\n                </ButtonGroup>\r\n            </ElementTitle>\r\n            <ElementContent>\r\n                <ul>\r\n                    <li key={\"name\"}>Name: {props.modifyDevice ? ModifyName(props) : props.antecedentName}</li>\r\n                    <li key={\"type\"}>{type}</li>\r\n                    <li key={\"id\"}>Id: {props.antecedentId}</li>\r\n                </ul>\r\n                <ElementMeasure>\r\n                    <h3>{measure_type}</h3>\r\n                    <h1>{measure} {measure_unit}</h1>\r\n                    <p style={{ margin: 0, display: deviceDetail.max_measure === \"\" ? \"none\" : \"\" }}>{deviceDetail.max_measure} ({deviceDetail.max_measure_time})</p>\r\n                    <p style={{ display: deviceDetail.min_measure === \"\" ? \"none\" : \"\" }}>{deviceDetail.min_measure} ({deviceDetail.min_measure_time})</p>\r\n                    <ElementSettings style={{ display: settings === \"/\" ? \"none\" : \"\" }}>\r\n                        <ul>\r\n                            <li key={\"max\"}>Max measure ({measure_settings}): {settings}</li>\r\n                            <li key={\"error\"}>Error measure ({measure_settings}): {error_measure}</li>\r\n                        </ul>\r\n                    </ElementSettings>\r\n                </ElementMeasure>\r\n                <br></br>\r\n                <ul>\r\n                    <li key={\"rules\"}><Button onClick={() => { handleClick(); }}>\r\n                        RULES  {openRule ? <ExpandLess /> : <ExpandMore />}\r\n                    </Button></li>\r\n                    <Collapse in={openRule} timeout=\"auto\" unmountOnExit>\r\n                        {props.rulesName}\r\n                    </Collapse>\r\n                </ul>\r\n            </ElementContent>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\n\r\nconst ElementTitle = styled.div`\r\ntext-align: left;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-top: 2%;\r\ndisplay: flex;\r\nflex-flow: row;\r\n`;\r\n\r\nconst ElementContent = styled.div`\r\nborder: solid #d9d9d9 1px;\r\nheight: 100%;\r\nborder-radius: 25px;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-bottom: 2%;\r\ntext-align: left;\r\npadding: 2%;\r\nbackground-color: #cccccc;\r\n`;\r\n\r\nconst ElementMeasure = styled.div`\r\nborder: solid black 2px;\r\nborder-radius: 25px;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\npadding: 2%;\r\ntext-align: center;\r\nbackground-color: #e6e6e6;\r\n`;\r\n\r\nconst ElementSettings = styled.div`\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\ntext-align: left;\r\n`;\r\n\r\n\r\n\r\n\r\nfunction ModifyName(props) {\r\n    const submitFunction = (event) => {\r\n        props.updateDeviceRequest(\"antecedent\");\r\n        props.handleModifyDevice();\r\n        event.preventDefault();\r\n    }\r\n    return (\r\n        <form style={{ display: \"inline\" }} name=\"ItemName\" onSubmit={submitFunction}>\r\n            <input type=\"text\" id=\"name\" name=\"name\"\r\n                defaultValue={props.antecedentName}\r\n                onChange={(e) => {\r\n                    const NewName = e.target.value;\r\n                    var checkName = props.checkDeviceNameFunction(props.antecedents, NewName);\r\n                    if (!checkName) {\r\n                        props.modifyAntecedentName(NewName)\r\n                    }\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\nfunction ModifyMaxMeasureSetting(props) {\r\n    const index = props.antecedentIdx;\r\n    const submitFunction = (event) => {\r\n        props.updateDeviceRequest(\"antecedent\");\r\n        props.handleModifyDevice();\r\n        event.preventDefault();\r\n    }\r\n    return (\r\n        <form style={{ display: \"inline\" }} name=\"ItemSetting\" onSubmit={submitFunction}>\r\n            <input className=\"DeviceDetailCell\" type=\"number\" id=\"max_measure\" name=\"max_measure\"\r\n                defaultValue={props.antecedents[index].setting}\r\n                onChange={(e) => {\r\n                    const newMaxMeasure = e.target.value;\r\n                    props.modifyAntecedentSetting(newMaxMeasure);\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\nfunction ModifyErrorSetting(props) {\r\n    const index = props.antecedentIdx;\r\n    const submitFunction = (event) => {\r\n        props.updateDeviceRequest(\"antecedent\");\r\n        props.handleModifyDevice();\r\n        event.preventDefault();\r\n    }\r\n    return (\r\n        <form style={{ display: \"inline\" }} name=\"ItemSetting\" onSubmit={submitFunction}>\r\n            <input className=\"DeviceDetailCell\" type=\"number\" id=\"error_setting\" name=\"error_setting\"\r\n                defaultValue={props.antecedents[index].error}\r\n                onChange={(e) => {\r\n                    const error_measure = e.target.value;\r\n                    props.modifyAntecedentSettingError(error_measure);\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\n","import React from 'react';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Button from '@material-ui/core/Button';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport styled from \"styled-components\";\r\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\r\n\r\n\r\nexport default class SetRuleProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ruleBody: false,\r\n            checkRuleName: false,\r\n            updateName: false,\r\n            classButtonRuleSelection: \"AntecedentRuleSelection\"\r\n        }\r\n    }\r\n\r\n    AntecedentRulePopUpBody = () => {\r\n        this.setState({ ruleBody: false, classButtonRuleSelection: \"AntecedentRuleSelection\" })\r\n    }\r\n    ConsequentRulePopUpBody = () => {\r\n        this.setState({ ruleBody: true, classButtonRuleSelection: \"ConsequentRuleSelection\" })\r\n    }\r\n\r\n    checkRuleNameFunction = (rules, ruleName) => {\r\n        var checkRuleName = false;\r\n        if (rules.some(rule => rule.name === ruleName)) {\r\n            checkRuleName = true;\r\n        }\r\n        this.setState({\r\n            checkRuleName: checkRuleName\r\n        }, () => { this.render() });\r\n\r\n        return checkRuleName\r\n    }\r\n\r\n    updateRuleName = (update) => {\r\n        this.setState({ updateName: update })\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.newRuleId !== \"\" && this.props.setRulePopUp) {\r\n            return (\r\n                <RuleContent\r\n                    checkRuleName={this.state.checkRuleName}\r\n                    modify={this.props.modify}\r\n                    newRuleName={this.props.newRuleName}\r\n                    rules={this.props.rules}\r\n                    modifyRuleName={this.props.modifyRuleName}\r\n                    checkRuleNameFunction={this.checkRuleNameFunction}\r\n                    updateRuleName={this.updateRuleName}\r\n                    newRuleId={this.props.newRuleId}\r\n                    newRuleIdx={this.props.newRuleIdx}\r\n                    ruleBody={this.state.ruleBody}\r\n                    AntecedentRulePopUpBody={this.AntecedentRulePopUpBody}\r\n                    ConsequentRulePopUpBody={this.ConsequentRulePopUpBody}\r\n                    deleteRuleConsequentRequest={this.props.deleteRuleConsequentRequest}\r\n                    deleteRuleAntecedentRequest={this.props.deleteRuleAntecedentRequest}\r\n                    setNewRuleCondition={this.props.setNewRuleCondition}\r\n                    setNewStartValue={this.props.setNewStartValue}\r\n                    setNewStopValue={this.props.setNewStopValue}\r\n                    setNewRuleMeasure={this.props.setNewRuleMeasure}\r\n                    handleAddRuleConsequentPopUp={this.props.handleAddRuleConsequentPopUp}\r\n                    handleAddRuleAntecedentPopUp={this.props.handleAddRuleAntecedentPopUp}\r\n                    setRuleRequest={this.props.setRuleRequest}\r\n                    handleModify={this.props.handleModify}\r\n                    handleSetRulePopUp={this.props.handleSetRulePopUp}\r\n                    deleteRuleRequest={this.props.deleteRuleRequest}\r\n                    getRuleById={this.props.getRuleById}\r\n                    getAntecedents={this.props.getAntecedents}\r\n                    getConsequents={this.props.getConsequents}\r\n                    setRuleConsequentDelay={this.props.setRuleConsequentDelay}\r\n                />\r\n\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\nconst RuleTitle = styled.div`\r\ndisplay: flex;\r\nflex-flow: row;\r\ntext-align: left;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-top: 2%;\r\n`;\r\n\r\nconst RuleContentDiv = styled.div`\r\nborder: solid #d9d9d9 1px;\r\nheight: 100%;\r\nbackground-color: #cccccc;\r\nborder-radius: 25px;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-bottom: 2%;\r\ntext-align: left;\r\npadding: 2%;\r\ndisplay: flex;\r\nflex-flow: column;\r\n`;\r\n\r\n\r\n\r\nfunction RuleContent(props) {\r\n    const rule = props.rules[props.newRuleIdx];\r\n    const evaluation = rule.evaluation;\r\n    return (\r\n        <div className=\"DeviceContentDetail\">\r\n            <RuleTitle>\r\n                <h1> <FiberManualRecordIcon style={{ color: evaluation === \"true\" ? \"green\" : \"red\" }} /> {props.newRuleName} </h1>\r\n                <p style={{ display: props.checkRuleName ? 'block' : 'none' }}> Error: rule name already exist! Choose another name.</p>\r\n                <ButtonGroup variant=\"text\" color=\"primary\" aria-label=\"text primary button group\">\r\n                    <Button style={{ display: props.modify ? \"\" : \"none\" }}\r\n                        onClick={() => {\r\n                            props.handleModify(false);\r\n                            props.handleSetRulePopUp(false);\r\n                            props.AntecedentRulePopUpBody();\r\n                            props.deleteRuleRequest(props.newRuleId, props.newRuleIdx);\r\n\r\n                        }}>\r\n                        <DeleteIcon fontSize=\"large\" style={{ color: \"red\" }} />\r\n                    </Button >\r\n                    <Button\r\n                        onClick={() => {\r\n                            props.getRuleById(props.newRuleId);\r\n                        }}>\r\n                        <RefreshIcon fontSize=\"large\" style={{ color: \"black\" }} />\r\n                    </Button >\r\n                    <Button\r\n                        onClick={() => {\r\n                            if (props.modify) {\r\n                                const ruleIdx = props.newRuleIdx;\r\n                                props.setRuleRequest(ruleIdx);\r\n                                props.handleModify(false);\r\n                            }\r\n                            else {\r\n                                props.handleModify(true);\r\n                            }\r\n                        }}>\r\n                        {props.modify ? <DoneIcon fontSize=\"large\" style={{ color: \"black\" }} /> : <EditIcon fontSize=\"large\" style={{ color: \"black\" }} />}\r\n\r\n                    </Button >\r\n                </ButtonGroup>\r\n            </RuleTitle>\r\n            <RuleContentDiv>\r\n\r\n                <ElementTitle>\r\n                    <ul>\r\n                        <li key={\"name\"}>Name: {props.modify ? ModifyNewRuleName(props) : props.newRuleName}</li>\r\n                        <li key={\"last_true\"}>Last time true: {rule.last_true}</li>\r\n                        <li key={\"last_false\"}>Last time false:  {rule.last_false}</li>\r\n                    </ul>\r\n                </ElementTitle>\r\n\r\n                <ElementContent>\r\n                    <div className=\"RuleHeaderButtons\">\r\n                        <Button className={props.ruleBody ? \"UnclickedRuleBodyButton\" : \"ClickedRuleBodyButton\"} id=\"ruleAntecedentButton\"\r\n                            onClick={() => { props.AntecedentRulePopUpBody(); }}>\r\n                            ANTECEDENTS\r\n                        </Button>\r\n                        <AddRuleElementButtonStyled style={{ display: props.ruleBody ? \"none\" : \"\" }} id=\"ruleAntecedentButton\"\r\n                            onClick={() => {\r\n                                props.handleAddRuleAntecedentPopUp();\r\n                            }}>\r\n                            <AddIcon />\r\n                        </AddRuleElementButtonStyled>\r\n                        <Button className={props.ruleBody ? \"ClickedRuleBodyButton\" : \"UnclickedRuleBodyButton\"} id=\"ruleConsequentButton\"\r\n                            onClick={() => { props.ConsequentRulePopUpBody(); }}>\r\n                            CONSEQUENTS\r\n                        </Button>\r\n                        <AddRuleElementButtonStyled style={{ display: props.ruleBody ? \"\" : \"none\" }} id=\"ruleConsequentButton\"\r\n                            onClick={() => {\r\n                                props.handleAddRuleConsequentPopUp();\r\n                            }}>\r\n                            <AddIcon />\r\n                        </AddRuleElementButtonStyled>\r\n                    </div>\r\n\r\n                    <RuleBody\r\n                        ruleBody={props.ruleBody}\r\n                        rules={props.rules}\r\n                        newRuleId={props.newRuleId}\r\n                        newRuleIdx={props.newRuleIdx}\r\n                        deleteRuleConsequentRequest={props.deleteRuleConsequentRequest}\r\n                        deleteRuleAntecedentRequest={props.deleteRuleAntecedentRequest}\r\n                        modify={props.modify}\r\n                        setNewRuleCondition={props.setNewRuleCondition}\r\n                        setNewStartValue={props.setNewStartValue}\r\n                        setNewStopValue={props.setNewStopValue}\r\n                        setNewRuleMeasure={props.setNewRuleMeasure}\r\n                        handleModify={props.handleModify}\r\n                        setRuleRequest={props.setRuleRequest}\r\n                        setRuleConsequentDelay={props.setRuleConsequentDelay}\r\n                    />\r\n                </ElementContent>\r\n            </RuleContentDiv>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst AddRuleElementButtonStyled = styled(Button)`\r\nborder: solid black 2px !important;\r\nborder-radius: 0px !important;\r\nbackground-color: #eead4c !important;\r\n`;\r\n\r\nconst ElementTitle = styled.div`\r\ntext-align: left;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-top: 2%;\r\ndisplay: flex;\r\nflex-flow: row;\r\n`;\r\n\r\nconst ElementContent = styled.div`\r\nborder: solid black 2px;\r\nborder-radius: 25px;\r\nmargint: 2%;\r\npadding: 2%;\r\ntext-align: center;\r\nbackground-color: #e6e6e6;\r\nwidth: 100%;\r\nheight: 100%;\r\n  \r\n`;\r\n\r\nfunction ModifyNewRuleName(props) {\r\n    const submitFunction = (event) => {\r\n        props.setRuleRequest(props.newRuleIdx);\r\n        props.handleModify(false);\r\n        event.preventDefault();\r\n    }\r\n    return (\r\n        <form style={{ display: \"inline\" }} name=\"ItemName\" onSubmit={submitFunction}>\r\n            <input type=\"text\" id=\"name\" name=\"name\"\r\n                defaultValue={props.newRuleName}\r\n                onChange={(e) => {\r\n                    const NewName = e.target.value;\r\n                    var checkRuleName = props.checkRuleNameFunction(props.rules, NewName)\r\n                    props.updateRuleName(true)\r\n                    if (!checkRuleName) {\r\n                        props.modifyRuleName(NewName)\r\n                    }\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nfunction RuleBody(props) {\r\n    if (props.ruleBody) {\r\n        return (\r\n\r\n            <table id=\"tableRule\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>ORDER</th>\r\n                        <th>DELAY</th>\r\n                        <th>DEVICE</th>\r\n                        <th>STATUS</th>\r\n                        <th>MODALITY</th>\r\n                        <th>IF</th>\r\n                        <th>ELSE</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <RuleConsequentDetails\r\n                        rules={props.rules}\r\n                        newRuleId={props.newRuleId}\r\n                        newRuleIdx={props.newRuleIdx}\r\n                        deleteRuleConsequentRequest={props.deleteRuleConsequentRequest}\r\n                        modify={props.modify}\r\n                        setRuleConsequentDelay={props.setRuleConsequentDelay}\r\n                    />\r\n                </tbody>\r\n            </table>\r\n\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n\r\n            <table id=\"tableRule\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>DEVICE</th>\r\n                        <th>STATUS</th>\r\n                        <th>MEASURE</th>\r\n                        <th>VALUE</th>\r\n                        <th>CONDITION</th>\r\n                        <th>START</th>\r\n                        <th>STOP</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <RuleAntecedentDetails\r\n                        rules={props.rules}\r\n                        newRuleId={props.newRuleId}\r\n                        newRuleIdx={props.newRuleIdx}\r\n                        deleteRuleAntecedentRequest={props.deleteRuleAntecedentRequest}\r\n                        modify={props.modify}\r\n                        setNewRuleCondition={props.setNewRuleCondition}\r\n                        setNewStartValue={props.setNewStartValue}\r\n                        setNewStopValue={props.setNewStopValue}\r\n                        setNewRuleMeasure={props.setNewRuleMeasure}\r\n                        handleModify={props.handleModify}\r\n                        setRuleRequest={props.setRuleRequest}\r\n                    />\r\n                </tbody>\r\n            </table>\r\n        )\r\n    }\r\n}\r\n\r\nfunction RuleConsequentDetails(props) {\r\n    const ruleIdx = props.newRuleIdx;\r\n    var consequents_list_unsorted = props.rules[ruleIdx].consequent;\r\n    const consequents_list = consequents_list_unsorted.sort((a, b) => parseInt(a.order) > parseInt(b.order) ? 1 : -1);\r\n    var idx = -1;\r\n    return (consequents_list.map(element => {\r\n        idx++;\r\n        var measure = element.measure;\r\n        if (element.device_id.includes(\"alert\")) {\r\n            measure = \"measure\"\r\n        }\r\n        const automatic = element.automatic;\r\n        return (\r\n            <tr key={idx}>\r\n                <td>{element.order}</td>\r\n                <td>{props.modify?  setConsequentDelay(props, idx, element.delay) : element.delay}</td>\r\n                <td>{element.name}</td>\r\n                <td>{measure === \"null\" ? \"disconnected\" : \"connected\"}</td>\r\n                <td>{automatic === \"true\" ? \"automatic\" : \"manual\"}</td>\r\n                <td>{element.if_value}</td>\r\n                <td>{element.else_value}</td>\r\n                <td className=\"deleteRuleRow\" style={{ visibility: props.modify ? 'visible' : 'hidden' }}>\r\n                    <button onClick={() => {\r\n                        props.deleteRuleConsequentRequest(props.newRuleId, element.device_id);\r\n                    }}>\r\n                        delete\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    })\r\n    )\r\n}\r\n\r\nfunction RuleAntecedentDetails(props) {\r\n    const ruleIdx = props.newRuleIdx;\r\n    const antecedents_list = props.rules[ruleIdx].antecedent;\r\n    var element_idx = -1;\r\n    return (antecedents_list.map(element => {\r\n        element_idx++;\r\n        var value = \"//\";\r\n        if (element.device_id.includes(\"timer\")) {\r\n            value = \"now\";\r\n        }\r\n        else {\r\n            if (element.value !== \"null\") {\r\n                value = element.value;\r\n            }\r\n        }\r\n        return (\r\n            <tr key={element_idx}>\r\n                <td>{element.name}</td>\r\n                <td>{value === \"//\" ? \"disconnected\" : \"connected\"}</td>\r\n                <td>{element.measure}</td>\r\n                <td>{value}</td>\r\n                <td>{props.modify ? SetRuleCondition(props, element_idx, element.condition, element.device_id) : element.condition}</td>\r\n                <td>{props.modify ? SetStartValueRuleAntecedent(props, element, element_idx) : element.start_value}</td>\r\n                <td>{props.modify ? SetStopValueRuleAntecedent(props, element, element_idx) : element.stop_value}</td>\r\n                <td className=\"deleteRuleRow\" style={{ visibility: props.modify ? 'visible' : 'hidden' }}>\r\n                    <button onClick={() => { props.deleteRuleAntecedentRequest(props.newRuleId, element.device_id); }}>\r\n                        delete\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    })\r\n    )\r\n}\r\n\r\nfunction setConsequentDelay(props, element_idx, oldDelay) {\r\n    return (\r\n        <form name=\"consequentDelay\">\r\n            <input name=\"delay\"\r\n                id=\"delay\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                defaultValue={oldDelay}\r\n                onChange={(e) => {\r\n                    var value = e.target.value;\r\n                    if (value < 0) {\r\n                        value = 0;\r\n                    }\r\n                    props.setRuleConsequentDelay(props.newRuleIdx, element_idx, value)\r\n                }}>\r\n            </input>\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\n\r\nfunction SetRuleCondition(props, element_idx, oldCondition, deviceId) {\r\n    const submitFunction = (event) => {\r\n        props.setRuleRequest(props.newRuleIdx);\r\n        props.handleModify(false);\r\n        event.preventDefault();\r\n    }\r\n    if (deviceId.includes(\"SWITCH\")) {\r\n        return (\r\n            <form name=\"ruleCondition\">\r\n                <select name=\"condition\"\r\n                    id=\"condition\"\r\n                    defaultValue={oldCondition}\r\n                    onChange={(e) => {\r\n                        props.setNewRuleCondition(props.newRuleIdx, element_idx, e.target.value)\r\n                    }}>\r\n                    <option value=\"delta\">delta</option>\r\n                </select>\r\n            </form>\r\n        )\r\n    }\r\n    else if (deviceId.includes(\"WATERLEVEL\")) {\r\n        return (\r\n            <form name=\"ruleCondition\">\r\n                <select name=\"condition\"\r\n                    id=\"condition\"\r\n                    defaultValue={oldCondition}\r\n                    onChange={(e) => {\r\n                        props.setNewRuleCondition(props.newRuleIdx, element_idx, e.target.value)\r\n                    }}>\r\n                    <option value=\">\">{'>'}</option>\r\n                    <option value=\"<\">{'<'}</option>\r\n                    <option value=\"between\">between</option>\r\n                    <option value=\"isteresi\">isteresi</option>\r\n                </select>\r\n            </form>\r\n        )\r\n    }\r\n    else if (deviceId.includes(\"BUTTON\")) {\r\n        return (\r\n            <form name=\"ruleCondition\">\r\n                <select name=\"condition\"\r\n                    id=\"condition\"\r\n                    defaultValue={oldCondition}\r\n                    onChange={(e) => {\r\n                        props.setNewRuleCondition(props.newRuleIdx, element_idx, e.target.value)\r\n                    }}>\r\n                    <option value=\"=\">=</option>\r\n                </select>\r\n            </form>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <form name=\"ruleCondition\">\r\n                <select name=\"condition\"\r\n                    id=\"condition\"\r\n                    defaultValue={oldCondition}\r\n                    onChange={(e) => {\r\n                        props.setNewRuleCondition(props.newRuleIdx, element_idx, e.target.value)\r\n                    }}>\r\n                    <option value=\">\">{'>'}</option>\r\n                    <option value=\"<\">{'<'}</option>\r\n                    <option value=\"between\">between</option>\r\n                </select>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction SetStartValueRuleAntecedent(props, element, element_idx) {\r\n    const submitFunction = (event) => {\r\n        props.setRuleRequest(props.newRuleIdx);\r\n        props.handleModify(false);\r\n        event.preventDefault();\r\n    }\r\n    const oldValue = element.start_value;\r\n    const elementId = element.device_id;\r\n    if (elementId.includes(\"timer\")) {\r\n        return (<form name=\"ruleAntecedentStartValue\">\r\n            <input id=\"time_start\"\r\n                name=\"time_start\"\r\n                type=\"time\"\r\n                defaultValue={oldValue}\r\n                onChange={(e) => {\r\n                    props.setNewStartValue(props.newRuleIdx, element_idx, e.target.value);\r\n                }}\r\n            />\r\n        </form>)\r\n\r\n    }\r\n    else if (elementId.includes(\"SWITCH\")) {\r\n        return (<form name=\"ruleAntecedentStartValue\">\r\n            <input id=\"time_start\"\r\n                name=\"time_start\"\r\n                type=\"time\"\r\n                defaultValue={oldValue}\r\n                onChange={(e) => {\r\n                    props.setNewStartValue(props.newRuleIdx, element_idx, e.target.value);\r\n                }}\r\n            />\r\n        </form>)\r\n    }\r\n    else if (elementId.includes(\"BUTTON\")) {\r\n        return (<form name=\"ruleAntecedentStartValue\">\r\n            <select name=\"button_status\"\r\n                id=\"button_status\"\r\n                defaultValue={oldValue}\r\n                onChange={(e) => {\r\n                    props.setNewStartValue(props.newRuleIdx, element_idx, e.target.value)\r\n                }}>\r\n                <option value=\"on\">ON</option>\r\n                <option value=\"off\">OFF</option>\r\n            </select>\r\n\r\n        </form>)\r\n    }\r\n    else {\r\n        return (\r\n            <form name=\"ruleAntecedentStartValue\">\r\n                <input id=\"StartValue\"\r\n                    name=\"StartValue\"\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"100\"\r\n                    step=\"5\"\r\n                    defaultValue={oldValue}\r\n                    onChange={(e) => {\r\n                        if (e.target.value > 100) {\r\n                            e.target.value = 100;\r\n                        }\r\n                        else if (e.target.value < 0) {\r\n                            e.target.value = 0;\r\n                        }\r\n                        props.setNewStartValue(props.newRuleIdx, element_idx, e.target.value);\r\n                    }}\r\n                />\r\n            </form>\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction SetStopValueRuleAntecedent(props, antecedent, element_idx) {\r\n    const submitFunction = (event) => {\r\n        props.setRuleRequest(props.newRuleIdx);\r\n        props.handleModify(false);\r\n        event.preventDefault();\r\n    }\r\n    const elementId = antecedent.device_id;\r\n    if (elementId.includes(\"timer\") || elementId.includes(\"SWITCH\")) {\r\n        if (antecedent.condition === \"between\" || antecedent.condition === \"delta\") {\r\n            return (\r\n                <form name=\"ruleAntecedentStopValue\">\r\n                    <input id=\"time_stop\"\r\n                        name=\"time_stop\"\r\n                        type=\"time\"\r\n                        defaultValue={antecedent.stop_value}\r\n                        onChange={(e) => {\r\n                            props.setNewStopValue(props.newRuleIdx, element_idx, e.target.value);\r\n                        }}\r\n                    />\r\n                </form>\r\n            )\r\n        }\r\n        else {\r\n            return (<div>{antecedent.stop_value}</div>)\r\n        }\r\n    }\r\n    else if (elementId.includes(\"BUTTON\")) {\r\n        return (<div>{antecedent.stop_value}</div>)\r\n    }\r\n    else {\r\n        const stop_value = antecedent.stop_value;\r\n        if (stop_value === \"//\") {\r\n            return (<div>{stop_value}</div>)\r\n        }\r\n        else {\r\n            return (\r\n                <form name=\"ruleAntecedentStopValue\">\r\n                    <input id=\"StopValue\"\r\n                        name=\"StopValue\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        step=\"5\"\r\n                        defaultValue={stop_value}\r\n                        onChange={(e) => {\r\n                            if (e.target.value > 100) {\r\n                                e.target.value = 100;\r\n                            }\r\n                            else if (e.target.value < 0) {\r\n                                e.target.value = 0;\r\n                            }\r\n                            props.setNewStopValue(props.newRuleIdx, element_idx, e.target.value);\r\n                        }}\r\n                    />\r\n                </form>\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nexport default class AddAlertEmailProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.key_count = 0;\r\n        this.state = {\r\n            checkAddNewEmail: false,\r\n            email: \"\",\r\n            modifyAlertEmail: false,\r\n        }\r\n    }\r\n\r\n    checkAddEmailFunction = (email) => {\r\n        this.setState({\r\n            email: email\r\n        })\r\n    }\r\n\r\n    addNewAlertEmail = () => {\r\n        if (!this.state.checkAddNewEmail) {\r\n            const email = this.state.email\r\n            this.props.modifyEmailRequest(email, this.props.idx);\r\n            this.handleModifyAlertEmail(false);\r\n        }\r\n    }\r\n\r\n    handleModifyAlertEmail = (state) => {\r\n        this.setState({\r\n            modifyAlertEmail: state\r\n        }, ()=>{\r\n            if (this.state.modifyAlertEmail){\r\n                this.email_init()\r\n            }\r\n        })\r\n    }\r\n\r\n    email_init = ()=>{\r\n        this.setState({\r\n            email: this.props.email\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <tr key={this.key_count++}>\r\n                <td>\r\n                    <FormModifyEmail\r\n                        addNewAlertEmail={this.addNewAlertEmail}\r\n                        email={this.props.email}\r\n                        checkAddEmailFunction={this.checkAddEmailFunction}\r\n                        modifyAlertEmail={this.state.modifyAlertEmail}\r\n                    />\r\n\r\n                </td>\r\n                <td>\r\n                    <ButtonGroup variant=\"text\" color=\"default\" aria-label=\"text primary button group\">\r\n                        <Button onClick={() => {\r\n                            this.state.modifyAlertEmail || this.props.email === \"\" ? this.addNewAlertEmail() : this.handleModifyAlertEmail(true)\r\n                        }}>\r\n                            {this.state.modifyAlertEmail || this.props.email === \"\" ? <DoneIcon fontSize=\"small\" style={{ color: \"black\" }} /> : <EditIcon fontSize=\"small\" style={{ color: \"black\" }} />}\r\n\r\n                        </Button >\r\n\r\n                        <Button style={{ display: this.state.modifyAlertEmail || this.props.email === \"\" ? '' : 'none' }}\r\n                            onClick={() => { this.props.removeAlertEmailRequest(this.props.idx) }}>\r\n                            <DeleteIcon fontSize=\"small\" style={{ color: \"red\" }} />\r\n                        </Button>\r\n                    </ButtonGroup>\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction FormModifyEmail(props) {\r\n    const modifyEmailSubmit = (event) =>{\r\n        props.addNewAlertEmail();\r\n        event.preventDefault();\r\n    }\r\n    if (props.modifyAlertEmail || props.email === \"\") {\r\n        return (\r\n            <div>\r\n                <form onSubmit={modifyEmailSubmit}>\r\n                    <input type=\"text\" id=\"email\" name=\"email\" defaultValue={props.email}\r\n                        onChange={(e) => {\r\n                            const email = e.target.value;\r\n                            props.checkAddEmailFunction(email);\r\n                        }} />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <div>{props.email} </div>\r\n        )\r\n    }\r\n\r\n}","import React, { useState } from 'react';\r\nimport { FormControlLabel, Switch } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Button from '@material-ui/core/Button';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport styled from \"styled-components\";\r\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport ExpandLess from '@material-ui/icons/ExpandLess';\r\nimport ExpandMore from '@material-ui/icons/ExpandMore';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport AddAlertEmailProcess from './AddAlertEmailProcess';\r\n\r\n\r\n\r\nexport default class DeviceConsequentPopUp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkDeviceName: false\r\n        }\r\n    }\r\n\r\n    checkDeviceNameFunction = (devices, newName) => {\r\n        var checkDeviceName = false;\r\n        if (devices.some(device => device.name === newName)) {\r\n            checkDeviceName = true;\r\n        }\r\n        this.setState({\r\n            checkDeviceName: checkDeviceName\r\n        }, () => { this.render() });\r\n\r\n        return checkDeviceName\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        if (this.props.consequentId !== \"\" && this.props.deviceConsequentPopUp) {\r\n            const index = this.props.consequentIdx;\r\n            var rulesName = GetRulesName(this.props);\r\n            return (\r\n                <DeviceDetail\r\n                    checkDeviceName={this.state.checkDeviceName}\r\n                    modifyDevice={this.props.modifyDevice}\r\n                    consequentName={this.props.consequentName}\r\n                    consequentId={this.props.consequentId}\r\n                    consequents={this.props.consequents}\r\n                    consequentIdx={this.props.consequentIdx}\r\n                    index={index}\r\n                    rulesName={rulesName}\r\n                    setConsequentAutomaticRequest={this.props.setConsequentAutomaticRequest}\r\n                    setConsequentManualMeasureRequest={this.props.setConsequentManualMeasureRequest}\r\n                    removeAlertEmailRequest={this.props.removeAlertEmailRequest}\r\n                    modifyAlertEmail={this.props.modifyAlertEmail}\r\n                    handleModifyAlertEmail={this.props.handleModifyAlertEmail}\r\n                    handleAddAlertEmailPopUp={this.props.handleAddAlertEmailPopUp}\r\n                    checkDeviceNameFunction={this.checkDeviceNameFunction}\r\n                    modifyConsequentName={this.props.modifyConsequentName}\r\n                    updateDeviceRequest={this.props.updateDeviceRequest}\r\n                    handleModifyDevice={this.props.handleModifyDevice}\r\n                    handleDeviceAntecedentPopUp={this.props.handleDeviceAntecedentPopUp}\r\n                    deleteDeviceRequest={this.props.deleteDeviceRequest}\r\n                    getConsequentById={this.props.getConsequentById}\r\n                    addEmailLocal={this.props.addEmailLocal}\r\n                    addNewAlertEmailRequest={this.props.addNewAlertEmailRequest}\r\n                    modifyEmailRequest={this.props.modifyEmailRequest}\r\n                    handleDeviceConsequentPopUp={this.props.handleDeviceConsequentPopUp}\r\n                />\r\n            )\r\n        }\r\n        else {\r\n            return (<div> </div>)\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction GetRulesName(props) {\r\n    const index = props.consequentIdx;\r\n    const rules = props.consequents[index].rules;\r\n    if (rules.length > 0) {\r\n        const rulesNameList = rules.map(rule => {\r\n            const ruleId = rule.id;\r\n            const ruleName = rule.name;\r\n            return (<div key={ruleId}>\r\n                <ListItem button onClick={() => {\r\n                    props.setNewRule(ruleId, ruleName);\r\n                    props.ruleRoute();\r\n                    props.handleSetRulePopUp(true);\r\n                }}>\r\n                    <ListItemText primary={ruleName} />\r\n                </ListItem>\r\n                <Divider />\r\n\r\n            </div>)\r\n        })\r\n        return (\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                {rulesNameList}\r\n            </List>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <List component=\"div\" aria-label=\"main mailbox folders\">\r\n                <ListItem>\r\n                    <ListItemText primary=\"no rules setted\" />\r\n                </ListItem>\r\n                <Divider />\r\n            </List>)\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction ModifyName(props) {\r\n    const submitFunction = (event) => {\r\n        props.updateDeviceRequest(\"consequent\");\r\n        props.handleModifyDevice();\r\n        event.preventDefault();\r\n    }\r\n    return (\r\n        <form style={{ display: \"inline\" }} name=\"ItemName\" onSubmit={submitFunction}>\r\n            <input type=\"text\" id=\"name\" name=\"name\"\r\n                defaultValue={props.consequentName}\r\n                onChange={(e) => {\r\n                    const NewName = e.target.value;\r\n                    var checkName = props.checkDeviceNameFunction(props.consequents, NewName);\r\n                    if (!checkName) {\r\n                        props.modifyConsequentName(NewName)\r\n                    }\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nfunction checkDeviceStatusAndMeasure(props) {\r\n    const measure_device = props.consequents[props.index].measure\r\n    if (measure_device !== \"null\" && measure_device !== \"init\") {\r\n        const status = \"connected\"\r\n        const color = \"green\"\r\n        return { measure: measure_device, status: status, color: color }\r\n    }\r\n    else if (measure_device === \"null\") {\r\n        const measure = \"off\";\r\n        const status = \"disconnected\"\r\n        const color = \"red\"\r\n        return { measure: measure, status: status, color: color }\r\n    }\r\n    else {\r\n        const measure = \"init\";\r\n        const status = \"initialization\"\r\n        const color = \"yellow\"\r\n        return { measure: measure, status: status, color: color }\r\n    }\r\n}\r\n\r\n\r\nfunction DeviceDetail(props) {\r\n    var deviceDetails = null;\r\n    var color = \"green\";\r\n    if (props.consequentId.includes(\"SWITCH\")) {\r\n        const checkStatusDevice = checkDeviceStatusAndMeasure(props);\r\n        color = checkStatusDevice.color;\r\n        deviceDetails = SwitchDetails(props)\r\n    }\r\n    else if (props.consequentId.includes(\"alert\")) {\r\n        deviceDetails = AlertDetails(props)\r\n    }\r\n    return (\r\n        <div className=\"DeviceContentDetail\">\r\n            <ElementTitle>\r\n                <h1> <FiberManualRecordIcon style={{ color: color }} /> {props.consequentName} </h1>\r\n                <p style={{ display: props.checkDeviceName ? 'block' : 'none' }}> Error: device name already exist! Choose another name.</p>\r\n                <ButtonGroup variant=\"text\" color=\"primary\" aria-label=\"text primary button group\">\r\n                    <Button style={{ display: props.modifyDevice && !props.consequentId.includes(\"alert\") ? \"\" : \"none\" }}\r\n                        onClick={() => {\r\n                            props.handleModifyDevice();\r\n                            props.handleDeviceConsequentPopUp(false);\r\n                            props.deleteDeviceRequest(\"consequent\");\r\n\r\n                        }}>\r\n                        <DeleteIcon fontSize=\"large\" style={{ color: \"red\" }} />\r\n                    </Button >\r\n                    <Button\r\n                        onClick={() => {\r\n                            props.getConsequentById(props.consequentId);\r\n                        }}>\r\n                        <RefreshIcon fontSize=\"large\" style={{ color: \"black\" }} />\r\n                    </Button >\r\n                    <Button\r\n                        onClick={() => {\r\n                            if (props.modifyDevice) {\r\n                                props.updateDeviceRequest(\"consequent\");\r\n                                props.handleModifyDevice();\r\n                            }\r\n                            else {\r\n                                props.handleModifyDevice();\r\n                            }\r\n                        }}>\r\n                        {props.modifyDevice ? <DoneIcon fontSize=\"large\" style={{ color: \"black\" }} /> : <EditIcon fontSize=\"large\" style={{ color: \"black\" }} />}\r\n\r\n                    </Button >\r\n                </ButtonGroup>\r\n            </ElementTitle>\r\n            {deviceDetails}\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst ElementTitle = styled.div`\r\ntext-align: left;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-top: 2%;\r\ndisplay: flex;\r\nflex-flow: row;\r\n`;\r\n\r\nconst ElementContent = styled.div`\r\nborder: solid #d9d9d9 1px;\r\nheight: 100%;\r\nborder-radius: 25px;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-bottom: 2%;\r\ntext-align: left;\r\npadding: 2%;\r\nbackground-color: #cccccc;\r\n`;\r\n\r\nconst ConsequentContent = styled.div`\r\nheight: 100%;\r\nwidth: 100%;\r\n`;\r\n\r\nconst ElementMeasure = styled.div`\r\nborder: solid black 2px;\r\nborder-radius: 25px;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\npadding: 2%;\r\nbackground-color: #a7b4a8;\r\ntext-align: center;\r\njustify-content: center;\r\nbackground-color: #e6e6e6;\r\n`;\r\n\r\nconst ElementSettings = styled.div`\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\njustify-content: center;\r\npadding: 1%;\r\ndisplay: flex;\r\nflex-flow: column;\r\nalign-items: center;\r\n`;\r\n\r\nconst EmailTitle = styled.div`\r\ntext-align: center;\r\njustify-content: center;\r\nmargin-left: 2%;\r\nmargin-right: 2%;\r\nmargin-top: 2%;\r\ndisplay: flex;\r\nflex-flow: row;\r\n`;\r\n\r\nfunction AlertDetails(props) {\r\n    const [openRule, handleOpenRule] = useState(false);\r\n    const handleClick = () => {\r\n        handleOpenRule(!openRule);\r\n    };\r\n    return (\r\n        <ElementContent>\r\n            <ul>\r\n                <li key={\"name\"}>Name: {props.modifyDevice ? ModifyName(props) : props.consequentName}</li>\r\n                <li key={\"type\"}>consequent - alert email sender</li>\r\n                <li key={\"id\"}>Id: {props.consequentId}</li>\r\n            </ul>\r\n            <ElementMeasure>\r\n                <EmailTitle>\r\n                    <h3> emails </h3>\r\n                    <Button onClick={() => {\r\n                        props.addNewAlertEmailRequest()\r\n                    }}>\r\n                        <AddIcon fontSize=\"small\" style={{ color: \"black\" }} />\r\n                    </Button >\r\n                </EmailTitle>\r\n                <Divider />\r\n\r\n                <EmailDetail\r\n                    consequentIdx={props.consequentIdx}\r\n                    consequents={props.consequents}\r\n                    modifyAlertEmail={props.modifyAlertEmail}\r\n                    removeAlertEmailRequest={props.removeAlertEmailRequest}\r\n                    modifyEmailRequest={props.modifyEmailRequest}\r\n                />\r\n            </ElementMeasure>\r\n            <br></br>\r\n            <ul>\r\n                <li key={\"rules\"}><Button onClick={() => { handleClick(); }}>\r\n                    RULES  {openRule ? <ExpandLess /> : <ExpandMore />}\r\n                </Button></li>\r\n                <Collapse in={openRule} timeout=\"auto\" unmountOnExit>\r\n                    {props.rulesName}\r\n                </Collapse>\r\n            </ul>\r\n\r\n        </ElementContent>\r\n    )\r\n}\r\n\r\nfunction EmailDetail(props) {\r\n    const consequent_idx = props.consequentIdx;\r\n    const email_list = props.consequents[consequent_idx].email_list;\r\n    var i = -1;\r\n    if (email_list.length > 0) {\r\n        const email_element = email_list.map(email => {\r\n            i++;\r\n            return (\r\n                <AddAlertEmailProcess\r\n                    email={email}\r\n                    idx={i}\r\n                    consequentIdx={props.consequentIdx}\r\n                    consequents={props.consequents}\r\n                    addNewAlertEmailRequest={props.addNewAlertEmailRequest}\r\n                    removeAlertEmailRequest={props.removeAlertEmailRequest}\r\n                    modifyEmailRequest={props.modifyEmailRequest}\r\n                />\r\n            )\r\n        })\r\n        return (\r\n\r\n            <table align=\"center\">\r\n                <tbody>\r\n                    {email_element}\r\n                </tbody>\r\n            </table>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <table align=\"center\">\r\n                <tbody>\r\n\r\n                </tbody>\r\n            </table>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction SwitchDetails(props) {\r\n    const consequent = props.consequents[props.index];\r\n    const checkStatusDevice = checkDeviceStatusAndMeasure(props);\r\n    const measure = checkStatusDevice[\"measure\"]\r\n    const status = checkStatusDevice[\"status\"]\r\n    const [openRule, handleOpenRule] = useState(false);\r\n    const handleClick = () => {\r\n        handleOpenRule(!openRule);\r\n    };\r\n    return (\r\n        <ElementContent>\r\n            <ul>\r\n                <li>Name: {props.modifyDevice ? ModifyName(props) : props.consequentName}</li>\r\n                <li>consequent - switch</li>\r\n                <li>Id: {props.consequentId}</li>\r\n            </ul>\r\n            <ElementMeasure>\r\n                <h1>{measure}</h1>\r\n                <p>last on ({consequent.last_on})</p>\r\n                <p>last off ({consequent.last_off})</p>\r\n                <ElementSettings>\r\n                    {set_automatic_button(props)}\r\n                    {SetManualMeasureButton(props)}\r\n                </ElementSettings>\r\n            </ElementMeasure>\r\n            <br></br>\r\n            <ul>\r\n                <li><Button onClick={() => { handleClick(); }}>\r\n                    RULES  {openRule ? <ExpandLess /> : <ExpandMore />}\r\n                </Button></li>\r\n                <Collapse in={openRule} timeout=\"auto\" unmountOnExit>\r\n                    {props.rulesName}\r\n                </Collapse>\r\n            </ul>\r\n        </ElementContent>\r\n    )\r\n\r\n}\r\n\r\n\r\nfunction set_automatic_button(props) {\r\n    const consequent = props.consequents[props.index];\r\n    const automatic = consequent.automatic\r\n    var value = false;\r\n    if (automatic === \"true\") {\r\n        value = true;\r\n    }\r\n    return (\r\n        <FormControlLabel\r\n            control={\r\n                <Switch\r\n                    checked={value}\r\n                    onChange={(e) => { props.setConsequentAutomaticRequest(e.target.checked) }}\r\n                    value={value}\r\n                    color=\"primary\"\r\n\r\n                />\r\n            }\r\n            label=\"automatic\"\r\n        />\r\n    )\r\n}\r\n\r\n\r\nfunction SetManualMeasureButton(props) {\r\n    const consequent = props.consequents[props.index];\r\n    const measure = consequent.measure\r\n    const automatic = consequent.automatic\r\n    return (\r\n        <FormControlLabel\r\n            control={\r\n                <Switch\r\n                    checked={measure === \"on\"}\r\n                    onChange={(e) => { props.setConsequentManualMeasureRequest(e.target.value) }}\r\n                    value={measure === \"on\" ? \"off\" : \"on\"}\r\n                    color=\"primary\"\r\n                    disabled={automatic === \"true\"}\r\n                />\r\n            }\r\n            label=\"on\"\r\n        />\r\n    )\r\n}\r\n\r\n","import React from 'react';\r\nimport DeviceAntecedentPopUp from './DeviceAntecedentPopUp'\r\nimport SetRuleProcess from './SetRuleProcess'\r\nimport DeviceConsequentPopUp from './DeviceConsequentPopUp'\r\n\r\n\r\nexport default class ElementDetails extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {}\r\n    }\r\n\r\n    render() {\r\n        if (this.props.routeUrl === \"sensor\") {\r\n            return (\r\n                <DeviceAntecedentPopUp\r\n                    ruleRoute={this.props.ruleRoute}\r\n                    rules={this.props.rules}\r\n                    deviceAntecedentPopUp={this.props.deviceAntecedentPopUp}\r\n                    handleDeviceAntecedentPopUp={this.props.handleDeviceAntecedentPopUp}\r\n                    modifyDevice={this.props.modifyDevice}\r\n                    handleModifyDevice={this.props.handleModifyDevice}\r\n                    antecedents={this.props.antecedents}\r\n                    antecedentId={this.props.antecedentId}\r\n                    antecedentName={this.props.antecedentName}\r\n                    antecedentIdx={this.props.antecedentIdx}\r\n                    setNewAntecedent={this.props.setNewAntecedent}\r\n                    modifyAntecedentSetting={this.props.modifyAntecedentSetting}\r\n                    modifyAntecedentSettingError={this.props.modifyAntecedentSettingError}\r\n                    updateDeviceRequest={this.props.updateDeviceRequest}\r\n                    deleteDeviceRequest={this.props.deleteDeviceRequest}\r\n                    getDeviceMeasureRequest={this.props.getDeviceMeasureRequest}\r\n                    modifyAntecedentName={this.props.modifyAntecedentName}\r\n                    setNewRule={this.props.setNewRule}\r\n                    handleSetRulePopUp={this.props.handleSetRulePopUp}\r\n                    getAntecedentById={this.props.getAntecedentById}\r\n                    getRuleById={this.props.getRuleById}\r\n                />\r\n            )\r\n\r\n        }\r\n        else if (this.props.routeUrl === \"switch\") {\r\n            return (<DeviceConsequentPopUp\r\n                ruleRoute={this.props.ruleRoute}\r\n                rules={this.props.rules}\r\n                consequents={this.props.consequents}\r\n                consequentId={this.props.consequentId}\r\n                consequentName={this.props.consequentName}\r\n                consequentIdx={this.props.consequentIdx}\r\n                setNewConsequent={this.props.setNewConsequent}\r\n                handleDeviceConsequentPopUp={this.props.handleDeviceConsequentPopUp}\r\n                deviceConsequentPopUp={this.props.deviceConsequentPopUp}\r\n                modifyDevice={this.props.modifyDevice}\r\n                handleModifyDevice={this.props.handleModifyDevice}\r\n                updateDeviceRequest={this.props.updateDeviceRequest}\r\n                deleteDeviceRequest={this.props.deleteDeviceRequest}\r\n                getDeviceMeasureRequest={this.props.getDeviceMeasureRequest}\r\n                modifyConsequentName={this.props.modifyConsequentName}\r\n                setNewRule={this.props.setNewRule}\r\n                handleSetRulePopUp={this.props.handleSetRulePopUp}\r\n                setConsequentAutomaticRequest={this.props.setConsequentAutomaticRequest}\r\n                setConsequentManualMeasureRequest={this.props.setConsequentManualMeasureRequest}\r\n                removeAlertEmailRequest={this.props.removeAlertEmailRequest}\r\n                modifyAlertEmail={this.props.modifyAlertEmail}\r\n                handleModifyAlertEmail={this.props.handleModifyAlertEmail}\r\n                handleAddAlertEmailPopUp={this.props.handleAddAlertEmailPopUp}\r\n                getConsequentById={this.props.getConsequentById}\r\n                getRuleById={this.props.getRuleById}\r\n                handleDeviceAntecedentPopUp={this.props.handleDeviceAntecedentPopUp}\r\n                addEmailLocal={this.props.addEmailLocal}\r\n                addNewAlertEmailRequest={this.props.addNewAlertEmailRequest}\r\n                modifyEmailRequest={this.props.modifyEmailRequest}\r\n            />)\r\n\r\n        }\r\n        else if ( this.props.routeUrl === \"rule\") {\r\n            return (\r\n                <SetRuleProcess\r\n                    setRulePopUp={this.props.setRulePopUp}\r\n                    handleSetRulePopUp={this.props.handleSetRulePopUp}\r\n                    rules={this.props.rules}\r\n                    newRuleIdx={this.props.newRuleIdx}\r\n                    newRuleId={this.props.newRuleId}\r\n                    newRuleName={this.props.newRuleName}\r\n                    deleteRuleConsequentRequest={this.props.deleteRuleConsequentRequest}\r\n                    deleteRuleAntecedentRequest={this.props.deleteRuleAntecedentRequest}\r\n                    handleModify={this.props.handleModify}\r\n                    modify={this.props.modify}\r\n                    setNewRuleCondition={this.props.setNewRuleCondition}\r\n                    setNewStartValue={this.props.setNewStartValue}\r\n                    setNewStopValue={this.props.setNewStopValue}\r\n                    handleAddRuleAntecedentPopUp={this.props.handleAddRuleAntecedentPopUp}\r\n                    handleAddRuleConsequentPopUp={this.props.handleAddRuleConsequentPopUp}\r\n                    setRuleAntecedentRequest={this.props.setRuleAntecedentRequest}\r\n                    setRuleConsequentRequest={this.props.setRuleConsequentRequest}\r\n                    deleteRuleRequest={this.props.deleteRuleRequest}\r\n                    modifyRuleName={this.props.modifyRuleName}\r\n                    updateRuleName={this.props.updateRuleName}\r\n                    setNewRuleMeasure={this.props.setNewRuleMeasure}\r\n                    setRuleRequest={this.props.setRuleRequest}\r\n                    getRuleById={this.props.getRuleById}\r\n                    getAntecedents={this.props.getAntecedents}\r\n                    getConsequents={this.props.getConsequents}\r\n                    setRuleConsequentDelay={this.props.setRuleConsequentDelay}\r\n                    onDragEnd={this.props.onDragEnd}\r\n                    \r\n                />\r\n            )\r\n        }\r\n        else {\r\n            return (<div></div>)\r\n        }\r\n    }\r\n\r\n}","import React from 'react';\r\nimport axios from 'axios';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport CreateRuleProcess from './CreateRuleProcess'\r\nimport AddRuleConsequentProcess from './AddRuleConsequentProcess'\r\nimport AddRuleAntecedentProcess from './AddRuleAntecedentProcess'\r\nimport RegisterDeviceProcess from './RegisterDeviceProcess'\r\nimport { Redirect } from 'react-router-dom';\r\nimport LateralMenu from './LateralMenu';\r\nimport ElementDetails from './ElementDetails'\r\nimport styled from \"styled-components\";\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeviceAntecedents from './DeviceAntecedents'\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nvar jwt = require('jwt-simple');\r\n\r\nexport default class AppNew extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const decoded = jwt.decode(this.props.idToken, process.env.REACT_APP_JWT_SECRET);\r\n        const idToken = jwt.encode({ uid: decoded.uid }, process.env.REACT_APP_JWT_SECRET);\r\n        axios.defaults.headers.common['Authorization'] = idToken;\r\n        axios.defaults.timeout.toFixed(0);\r\n        this.state = {\r\n            email: decoded.email,\r\n            password: decoded.password,\r\n            name: decoded.name,\r\n            surname: decoded.surname,\r\n\r\n            menuPopUp: false,\r\n            anchorEl: undefined,\r\n            AddRulePopUp: false,\r\n            setRulePopUp: false,\r\n            addRuleAntecedentPopUp: false,\r\n            addRuleConsequentPopUp: false,\r\n            registerDevicePopUp: false,\r\n            addAlertEmailPopUp: false,\r\n            modifyAlertEmail: false,\r\n\r\n            newRuleId: \"\",\r\n            newRuleIdx: 0,\r\n            newRuleName: \"\",\r\n            modify: false,\r\n\r\n            deviceAntecedentPopUp: false,\r\n            antecedentId: \"\",\r\n            antecedentName: \"\",\r\n            antecedentIdx: 0,\r\n\r\n            deviceConsequentPopUp: false,\r\n            consequentId: \"\",\r\n            consequentName: \"\",\r\n            consequentIdx: 0,\r\n\r\n            modifyDevice: false,\r\n\r\n            antecedents: [],\r\n            consequents: [],\r\n            rules: [],\r\n            allDeviceId: [],\r\n\r\n            logout: false,\r\n            routeUrl: \"sensor\",\r\n            refreshAntecedents: true,\r\n            refreshConsequents: true,\r\n            refreshRules: true,\r\n\r\n            ruleBody: false,\r\n            classButtonRuleSelection: \"AntecedentRuleSelection\",\r\n\r\n            server_error: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAntecedents();\r\n    }\r\n\r\n\r\n    //GET BY USER\r\n    getAntecedents = async () => {\r\n        console.log('App GET antecedent By User');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/get/antecedents\";\r\n        try {\r\n            let res = await axios.get(url);\r\n            const antecedents_list = res.data;\r\n            var antecedents = this.state.antecedents;\r\n            if (antecedents.length > 0) {\r\n                const antecedentId_list = antecedents.map(antecedent => { return antecedent.id });\r\n                antecedentId_list.map(antecedent => {\r\n                    if (!antecedentId_list.some(id => id === antecedent.id)) {\r\n                        antecedents.concat(antecedent);\r\n                    } else {\r\n                        const antecedent_idx = antecedentId_list.indexOf(antecedent.id);\r\n                        antecedents[antecedent_idx].measure = antecedent.measure;\r\n                    }\r\n                    return null;\r\n                })\r\n            } else {\r\n                antecedents = antecedents_list;\r\n            }\r\n            this.setState({ antecedents: antecedents, refreshAntecedents: false }, () => {\r\n                if (!this.state.addRuleAntecedentPopUp) {\r\n                    this.setState({ routeUrl: \"sensor\", deviceAntecedentPopUp: true, deviceConsequentPopUp: false, setRulePopUp: false });\r\n                    if (this.state.antecedentId !== \"\") {\r\n                        this.getAntecedentById(this.state.antecedentId);\r\n                    }\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    getConsequents = async () => {\r\n        console.log('App GET consequents By User');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/get/consequents\";\r\n        try {\r\n            let res = await axios.get(url);\r\n            const consequents_list = res.data;\r\n            var consequents = this.state.consequents;\r\n            if (consequents.length > 0) {\r\n                const consequentId_list = consequents.map(consequent => { return consequent.id });\r\n                consequents_list.map(consequent => {\r\n                    if (!consequentId_list.some(id => id === consequent.id)) {\r\n                        consequents.concat(consequent);\r\n                    }\r\n                    else {\r\n                        const consequent_idx = consequentId_list.indexOf(consequent.id);\r\n                        consequents[consequent_idx].measure = consequent.measure;\r\n                    }\r\n                    return null;\r\n                })\r\n            }\r\n            else {\r\n                consequents = consequents_list;\r\n            }\r\n            this.setState({ consequents: consequents, refreshConsequents: false }, () => {\r\n                if (!this.state.addRuleConsequentPopUp && !this.state.addRuleAntecedentPopUp) {\r\n                    this.setState({ routeUrl: \"switch\", deviceAntecedentPopUp: false, deviceConsequentPopUp: true, setRulePopUp: false })\r\n                    if (this.state.consequentId !== \"\") {\r\n                        this.getConsequentById(this.state.consequentId);\r\n                    }\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    getRules = async () => {\r\n        console.log('App GET Rules by user');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/user\";\r\n        try {\r\n            let res = await axios.get(url);\r\n            const rules_list = res.data;\r\n            var rules = this.state.rules;\r\n            if (rules.length > 0) {\r\n                const rulesId_list = rules.map(rule => { return rule.id });\r\n                rules_list.map(rule => {\r\n                    if (!rulesId_list.some(id => id === rule.id)) {\r\n                        rules.concat(rule)\r\n                    } else {\r\n                        const ruleIdx = rulesId_list.indexOf(rule.id);\r\n                        rules[ruleIdx].evaluation = rule.evaluation;\r\n                    }\r\n                    return null;\r\n                });\r\n            }\r\n            else {\r\n                rules = rules_list;\r\n            }\r\n            this.setState({ rules: rules, refreshRules: false }, () => {\r\n                if (this.state.newRuleId !== \"\") {\r\n                    this.getRuleById(this.state.newRuleId);\r\n                }\r\n                else {\r\n                    this.setState({ routeUrl: \"rule\", deviceAntecedentPopUp: false, deviceConsequentPopUp: false, setRulePopUp: true });\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n\r\n    //GET BY ID\r\n    getAntecedentById = async (antecedentId) => {\r\n        console.log('App GET antecedent By Id');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/antecedent/id/\" + antecedentId;\r\n        try {\r\n            let res = await axios.get(url);\r\n            const newAntecedent = res.data;\r\n            console.log(newAntecedent)\r\n            const idx = this.state.antecedentIdx;\r\n            var antecedents = this.state.antecedents;\r\n            antecedents[idx] = newAntecedent;\r\n            this.setState({ antecedents: antecedents }, () => {\r\n                this.setState({ routeUrl: \"sensor\", deviceAntecedentPopUp: true, deviceConsequentPopUp: false, setRulePopUp: false });\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    getConsequentById = async (consequentId) => {\r\n        console.log('App GET consequent By Id');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/consequent/id/\" + consequentId;\r\n        try {\r\n            let res = await axios.get(url);\r\n            const newConsequent = res.data;\r\n            var consequents = this.state.consequents;\r\n            const consequentIdx = this.state.consequentIdx;\r\n            consequents[consequentIdx] = newConsequent;\r\n            this.setState({ consequents: consequents }, () => {\r\n                this.setState({ routeUrl: \"switch\", deviceAntecedentPopUp: false, deviceConsequentPopUp: true, setRulePopUp: false })\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    getRuleById = async (ruleId) => {\r\n        console.log('App GET Rule By ID');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/id/\" + ruleId;\r\n        try {\r\n            let res = await axios.get(url);\r\n            const newRule = res.data;\r\n            console.log(newRule)\r\n            var rules = this.state.rules;\r\n            const idx = this.state.newRuleIdx;\r\n            rules[idx] = newRule;\r\n            this.setState({ rules: rules }, () => {\r\n                this.setState({ routeUrl: \"rule\", deviceAntecedentPopUp: false, deviceConsequentPopUp: false, setRulePopUp: true });\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    getDeviceMeasureRequest = async (type) => {\r\n        console.log('App GET device measure');\r\n        if (type === \"antecedent\") {\r\n            const url = process.env.REACT_APP_BACKEND_URL + \"/device/measure/\" + this.state.antecedentId;\r\n            try {\r\n                let res = await axios.get(url);\r\n                const newMeasure = res.data;\r\n                const index = this.state.antecedentIdx;\r\n                var antecedents = this.state.antecedents;\r\n                antecedents[index].measure = newMeasure;\r\n                this.setState({ antecedents: antecedents }, () => { this.render() });\r\n            } catch (err) {\r\n                console.warn(err)\r\n            }\r\n        }\r\n        else {\r\n            const url = process.env.REACT_APP_BACKEND_URL + \"/device/measure/\" + this.state.consequentId;\r\n            try {\r\n                let res = await axios.get(url);\r\n                const newMeasure = res.data;\r\n                const index = this.state.consequentIdx;\r\n                var consequents = this.state.consequents;\r\n                consequents[index].measure = newMeasure;\r\n                this.setState({ consequents: consequents }, () => { this.render() });\r\n            } catch (err) {\r\n                console.warn(err)\r\n            }\r\n        }\r\n    }\r\n\r\n    //ADD and UPDATE ELEMENTS\r\n    createRuleRequest = async (rule_name) => {\r\n        console.log('App POST create rule');\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/create/\" + rule_name;\r\n        try {\r\n            let res = await axios.post(url);\r\n            const ruleId = res.data;\r\n            console.log(\"response rule id: \", ruleId)\r\n            const newRule = { id: ruleId, name: rule_name, antecedent: [], consequent: [], evaluation: \"false\" };\r\n            var rules = this.state.rules;\r\n            var idx = rules.length;\r\n            const newRulesList = rules.concat([newRule])\r\n            this.setState({\r\n                rules: newRulesList,\r\n                newRuleIdx: idx,\r\n                newRuleId: ruleId,\r\n                newRuleName: rule_name\r\n            }, () => {\r\n                this.handleModify(true);\r\n                this.ruleRoute();\r\n                this.handleAddRulePopUp();\r\n                this.handleSetRulePopUp(true);\r\n            })\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    setRuleRequest = async (ruleIdx) => {\r\n        console.log(\"App POST set new rule\");\r\n        const rule = this.state.rules[ruleIdx]\r\n        const rule_json = JSON.stringify(rule);\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set\";\r\n        try {\r\n            await axios.post(url, { rule_json });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    setRuleAntecedentRequest = async (newAntecedent) => {\r\n        console.log(\"App POST new rule antecedent\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set/antecedent\";\r\n        try {\r\n            await axios.post(url, {}, {\r\n                params: {\r\n                    rule_id: this.state.newRuleId,\r\n                    device_id: newAntecedent.device_id,\r\n                    start_value: newAntecedent.start_value,\r\n                    stop_value: newAntecedent.stop_value,\r\n                    condition: newAntecedent.condition,\r\n                    measure: newAntecedent.measure\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    setRuleConsequentRequest = async (newConsequent) => {\r\n        console.log(\"App POST new rule consequent\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set/consequent\";\r\n        try {\r\n            await axios.post(url, {}, {\r\n                params: {\r\n                    rule_id: this.state.newRuleId,\r\n                    device_id: newConsequent.device_id,\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    updateDeviceRequest = async (type) => {\r\n        console.log(\"App POST update device\");\r\n        var deviceId = \"\";\r\n        var device_name = \"\";\r\n        var setting = 0;\r\n        var error = 0;\r\n        if (type === \"antecedent\") {\r\n            const index = this.state.antecedentIdx;\r\n            deviceId = this.state.antecedentId;\r\n            device_name = this.state.antecedentName;\r\n            setting = this.state.antecedents[index].setting;\r\n            error = this.state.antecedents[index].error;\r\n        }\r\n        else {\r\n            deviceId = this.state.consequentId;\r\n            device_name = this.state.consequentName;\r\n            setting = \"\";\r\n            error = \"\";\r\n        }\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/update\";\r\n        try {\r\n            await axios.post(url, {}, {\r\n                params: {\r\n                    device_id: deviceId,\r\n                    device_name: device_name,\r\n                    setting: setting,\r\n                    error: error\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    registerDeviceRequest = async (type, newDevice) => {\r\n        console.log(\"App POST register device\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/register\";\r\n        try {\r\n            await axios.post(url, {}, {\r\n                params: {\r\n                    device_id: newDevice.id,\r\n                    device_name: newDevice.name,\r\n                }\r\n            });\r\n            this.registerNewDeviceLocal(type, newDevice);\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    registerNewDeviceLocal = (type, newDevice) => {\r\n        if (type === \"antecedent\") {\r\n            var newAntecedents = this.state.antecedents;\r\n            const newIndex = newAntecedents.length;\r\n            this.setState({\r\n                antecedents: newAntecedents.concat([newDevice]),\r\n                antecedentId: newDevice.id,\r\n                antecedentName: newDevice.name,\r\n                antecedentIdx: newIndex,\r\n                modifyDevice: true,\r\n            },\r\n                () => {\r\n                    this.sensorRoute();\r\n                    this.handleDeviceAntecedentPopUp(true);\r\n                })\r\n        }\r\n        else {\r\n            var newConsequents = this.state.consequents;\r\n            const newIndex = newConsequents.length;\r\n            this.setState({\r\n                consequents: newConsequents.concat([newDevice]),\r\n                consequentId: newDevice.id,\r\n                consequentName: newDevice.name,\r\n                consequentIdx: newIndex,\r\n                modifyDevice: true,\r\n            },\r\n                () => {\r\n                    this.switchRoute();\r\n                    this.handleDeviceConsequentPopUp(true);\r\n                })\r\n        }\r\n    }\r\n    updateRuleName = async () => {\r\n        console.log(\"App POST update rule name\")\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set/name\";\r\n        try {\r\n            await axios.post(url, {}, {\r\n                params: {\r\n                    rule_id: this.state.newRuleId,\r\n                    rule_name: this.state.newRuleName\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    setConsequentAutomaticRequest = async (automatic) => {\r\n        console.log(\"App POST consequent automatic\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/consequent/automatic\";\r\n        try {\r\n            let res = await axios.post(url, {}, {\r\n                params: {\r\n                    device_id: this.state.consequentId,\r\n                    automatic: automatic\r\n                }\r\n            });\r\n            const consequent = res.data;\r\n            const consequents = this.state.consequents;\r\n            const idx = this.state.consequentIdx;\r\n            consequents[idx] = consequent;\r\n            this.setState({ consequents: consequents }, () => { this.render() })\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    setConsequentManualMeasureRequest = async (manual_measure) => {\r\n        console.log(\"App POST consequent manual measure\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/consequent/manual\";\r\n        try {\r\n            await axios.post(url, {}, {\r\n                params: {\r\n                    device_id: this.state.consequentId,\r\n                    manual_measure: manual_measure\r\n                }\r\n            });\r\n            const consequents = this.state.consequents;\r\n            const idx = this.state.consequentIdx;\r\n            consequents[idx].manual_measure = manual_measure;\r\n            consequents[idx].measure = manual_measure;\r\n            this.setState({ consequents: consequents }, () => { this.render() })\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    modifyEmailRequest = async (email, idx) => {\r\n        console.log(\"App ADD email alert\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/alert/modify/\" + email + \"/\" + idx;\r\n        try {\r\n            await axios.post(url);\r\n            const consequent_idx = this.state.consequentIdx;\r\n            var consequents = this.state.consequents;\r\n            consequents[consequent_idx].email_list[idx] = email;\r\n            this.setState({\r\n                consequents: consequents\r\n            })\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n\r\n    addNewAlertEmailRequest = async () => {\r\n        console.log(\"App ADD email alert\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/alert/add/\";\r\n        try {\r\n            await axios.post(url);\r\n            this.addEmailLocal();\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n\r\n    // REMOVE ELEMENT FROM ARRAYS\r\n    deleteRuleRequest = async (ruleId, ruleIdx) => {\r\n        console.log(\"App DELETE rule\")\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/delete/\" + ruleId;\r\n        try {\r\n            await axios.delete(url);\r\n            var NewRules = this.state.rules;\r\n            NewRules.splice(ruleIdx, 1)\r\n            this.setState({ rules: NewRules, newRuleIdx: 0, newRuleName: \"\", newRuleId: \"\", setRulePopUp: false })\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    deleteRuleConsequentRequest = async (ruleId, deviceId) => {\r\n        console.log(\"App DELETE rule consequent\")\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/delete/consequent/\" + ruleId + \"/\" + deviceId;\r\n        try {\r\n            await axios.delete(url);\r\n            this.deleteRuleConsequentLocal(deviceId)\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    deleteRuleConsequentLocal = (deviceId) => {\r\n        var rules = this.state.rules;\r\n        const idx_rule = this.state.newRuleIdx\r\n        var rule_consequent = rules[idx_rule].consequent\r\n        const consequentIdList = rule_consequent.map(consequent => { return consequent.device_id });\r\n        const idx_consequent = consequentIdList.indexOf(deviceId)\r\n        var idx = 0;\r\n        var newRuleConsequents = rule_consequent.map(consequent => {\r\n            if (idx > idx_consequent) {\r\n                consequent.order = (parseInt(consequent.order) - 1).toString();\r\n            }\r\n            idx++;\r\n            return consequent\r\n        })\r\n        newRuleConsequents.splice(idx_consequent, 1);\r\n        console.log(newRuleConsequents)\r\n        rules[idx_rule].consequent = newRuleConsequents;\r\n        this.setState({ rules: rules });\r\n    }\r\n    deleteRuleAntecedentRequest = async (ruleId, deviceId) => {\r\n        console.log(\"App DELETE rule antecedent\")\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/rule/delete/antecedent/\" + ruleId + \"/\" + deviceId;\r\n        try {\r\n            await axios.delete(url);\r\n            this.deleteRuleAntecedentLocal(deviceId)\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n    deleteRuleAntecedentLocal = (deviceId) => {\r\n        var rules = this.state.rules;\r\n        const idx_rule = this.state.newRuleIdx\r\n        var rule_antecedent = rules[idx_rule].antecedent\r\n        const antecedentIdList = rule_antecedent.map(antecedent => { return antecedent.device_id });\r\n        const idx_antecedent = antecedentIdList.indexOf(deviceId)\r\n        rules[idx_rule].antecedent.splice(idx_antecedent, 1);\r\n        this.setState({ rules: rules });\r\n    }\r\n    deleteDeviceRequest = async (type) => {\r\n        console.log(\"App DELETE device\")\r\n        if (type === \"antecedent\") {\r\n            const url = process.env.REACT_APP_BACKEND_URL + \"/device/delete/\" + this.state.antecedentId;\r\n            var antecedents = this.state.antecedents;\r\n            const index = this.state.antecedentIdx;\r\n            antecedents.splice(index, 1);\r\n            try {\r\n                await axios.delete(url);\r\n                this.setState({ antecedentIdx: 0, antecedents: antecedents, deviceAntecedentPopUp: false })\r\n            } catch (err) {\r\n                console.warn(err)\r\n            }\r\n        }\r\n        else {\r\n            console.log(this.state.consequentId)\r\n            const url = process.env.REACT_APP_BACKEND_URL + \"/device/delete/\" + this.state.consequentId;\r\n            const index = this.state.consequentIdx;\r\n            var consequents = this.state.consequents;\r\n            consequents.splice(index, 1);\r\n            try {\r\n                await axios.delete(url);\r\n                this.setState({ consequentIdx: 0, consequents: consequents })\r\n            } catch (err) {\r\n                console.warn(err)\r\n            }\r\n        }\r\n    }\r\n    removeAlertEmailRequest = async (index) => {\r\n        console.log(\"App DELETE email alert\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/device/alert/delete/\" + index;\r\n        try {\r\n            await axios.delete(url);\r\n            const consequent_idx = this.state.consequentIdx;\r\n            var consequents = this.state.consequents;\r\n            consequents[consequent_idx].email_list.splice(index, 1);\r\n            console.log(consequents[consequent_idx])\r\n            this.setState({\r\n                consequents: consequents\r\n            })\r\n        } catch (err) {\r\n            console.warn(err)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    //MODIFY AND SET RULE LOCAL\r\n    modifyRuleName = (newRuleName) => {\r\n        var rules = this.state.rules;\r\n        const index = this.state.newRuleIdx;\r\n        rules[index].name = newRuleName;\r\n        this.setState({\r\n            rules: rules,\r\n            newRuleName: newRuleName\r\n        }, () => { this.render() })\r\n    }\r\n    setConsequentRuleLocal = (newRuleIdx, newConsequent) => {\r\n        var rulesList = this.state.rules;\r\n        rulesList[newRuleIdx].consequent.push(newConsequent);\r\n        this.setState({ rules: rulesList }, () => {\r\n            this.handleAddRuleConsequentPopUp();\r\n            this.handleSetRulePopUp(true);\r\n        });\r\n    }\r\n    setAntecedentRuleLocal = (newRuleIdx, newAntecedent) => {\r\n        var rulesList = this.state.rules;\r\n        rulesList[newRuleIdx].antecedent.push(newAntecedent);\r\n        this.setState({ rules: rulesList }, () => {\r\n            this.handleAddRuleAntecedentPopUp();\r\n            this.handleSetRulePopUp(true);\r\n        });\r\n    }\r\n    setNewRuleCondition = (ruleIdx, index, newCondition) => {\r\n        var rules = this.state.rules;\r\n        rules[ruleIdx].antecedent[index].condition = newCondition;\r\n        if (newCondition === \"between\" || newCondition === \"isteresi\") {\r\n            rules[ruleIdx].antecedent[index].stop_value = rules[ruleIdx].antecedent[index].start_value;\r\n        }\r\n        else {\r\n            rules[ruleIdx].antecedent[index].stop_value = \"//\";\r\n        }\r\n        this.setState({ rules: rules });\r\n    }\r\n    setNewStartValue = (ruleIdx, index, newStart) => {\r\n        var rules = this.state.rules;\r\n        rules[ruleIdx].antecedent[index].start_value = newStart;\r\n        this.setState({ rules: rules });\r\n    }\r\n    setNewStopValue = (ruleIdx, index, newStop) => {\r\n        var rules = this.state.rules;\r\n        rules[ruleIdx].antecedent[index].stop_value = newStop;\r\n        this.setState({ rules: rules });\r\n    }\r\n    setNewRuleMeasure = (ruleIdx, index, newMeasure) => {\r\n        var rules = this.state.rules;\r\n        rules[ruleIdx].antecedent[index].measure = newMeasure;\r\n        if (newMeasure === \"now\") {\r\n            rules[ruleIdx].antecedent[index].condition = \"between\";\r\n            rules[ruleIdx].antecedent[index].stop_value = rules[ruleIdx].antecedent[index].start_value;\r\n        }\r\n        else {\r\n            rules[ruleIdx].antecedent[index].condition = \"delta\";\r\n            rules[ruleIdx].antecedent[index].stop_value = \"//\";\r\n        }\r\n        this.setState({ rules: rules });\r\n    }\r\n    setRuleConsequentDelay = (ruleIdx, index, delay) => {\r\n        var rules = this.state.rules;\r\n        rules[ruleIdx].consequent[index].delay = delay;\r\n        this.setState({ rules: rules });\r\n    }\r\n    onDragEnd = (result) => {\r\n        const { destination, source, reason } = result;\r\n        if (\r\n            destination.droppableId === source.droppableId &&\r\n            destination.index === source.index\r\n        ) {\r\n            return;\r\n        }\r\n        const ruleIdx = this.state.newRuleIdx;\r\n        var rules = this.state.rules\r\n        var consequents = rules[ruleIdx].consequent;\r\n        var consequent = consequents[source.index];\r\n        var newConsequents = consequents.map(c => {\r\n            var Corder = parseInt(c.order);\r\n            if (Corder >= source.index && Corder < destination.index) {\r\n                Corder = Corder - 1;\r\n                c.order = Corder.toString();\r\n            }\r\n            else if (Corder >= destination.index) {\r\n                Corder = Corder + 1;\r\n                c.order = Corder.toString();\r\n            }\r\n            return c;\r\n        })\r\n        newConsequents.splice(source.index, 1);\r\n        consequent.order = destination.index.toString();\r\n        newConsequents.splice(destination.index, 0, consequent);\r\n        rules[ruleIdx].consequent = newConsequents;\r\n        this.setState({\r\n            rules: rules\r\n        })\r\n    }\r\n\r\n    //MODIFY DEVICES LOCAL\r\n    modifyAntecedentSetting = (newSetting) => {\r\n        var antecendents = this.state.antecedents;\r\n        const index = this.state.antecedentIdx;\r\n        antecendents[index].setting = newSetting;\r\n        this.setState({ antecendents: antecendents }, () => {\r\n            var antecedents = this.state.antecedents;\r\n            const idx = this.state.antecedentIdx;\r\n            const deviceDetail = DeviceAntecedents(\"relative_measure\", this.state.antecedents, this.state.antecedentIdx);\r\n            antecedents[idx].measure = deviceDetail.measure;\r\n            this.setState({\r\n                antecedents: antecedents\r\n            })\r\n        })\r\n    }\r\n    modifyAntecedentSettingError = (error) => {\r\n        var antecendents = this.state.antecedents;\r\n        const index = this.state.antecedentIdx;\r\n        antecendents[index].error = error;\r\n        this.setState({ antecendents: antecendents }, () => {\r\n            var antecedents = this.state.antecedents;\r\n            const idx = this.state.antecedentIdx;\r\n            const deviceDetail = DeviceAntecedents(\"relative_measure\", this.state.antecedents, this.state.antecedentIdx);\r\n            antecedents[idx].measure = deviceDetail.measure;\r\n            this.setState({\r\n                antecedents: antecedents\r\n            })\r\n        })\r\n    }\r\n    modifyAntecedentName = (newName) => {\r\n        var antecendents = this.state.antecedents;\r\n        const index = this.state.antecedentIdx;\r\n        antecendents[index].name = newName;\r\n        this.setState({ antecendents: antecendents, antecedentName: newName })\r\n    }\r\n    modifyConsequentName = (newName) => {\r\n        var consequents = this.state.consequents;\r\n        const index = this.state.consequentIdx;\r\n        consequents[index].name = newName;\r\n        this.setState({ consequents: consequents, consequentName: newName })\r\n    }\r\n    addEmailLocal = () => {\r\n        const index = this.state.consequentIdx;\r\n        const consequents = this.state.consequents;\r\n        consequents[index].email_list.push(\"\");\r\n        this.setState({\r\n            consequents: consequents\r\n        }, () => {\r\n            this.handleModifyAlertEmail(true);\r\n        })\r\n    }\r\n\r\n    // CURRENT SELECTED ITEM VARIABLES\r\n    setNewRule = (ruleId, ruleName) => {\r\n        const rules = this.state.rules;\r\n        const rulesIdList = rules.map(rule => { return rule.id });\r\n        const ruleIdx = rulesIdList.indexOf(ruleId);\r\n        this.setState({\r\n            newRuleIdx: ruleIdx,\r\n            newRuleId: ruleId,\r\n            newRuleName: ruleName\r\n        })\r\n    }\r\n    setNewAntecedent = (antecedentId, antecedentName, antecedentIdx) => {\r\n        this.setState({\r\n            antecedentId: antecedentId,\r\n            antecedentName: antecedentName,\r\n            antecedentIdx: antecedentIdx\r\n        })\r\n    }\r\n    setNewConsequent = (consequentId, consequentName, consequentIdx) => {\r\n        this.setState({\r\n            consequentId: consequentId,\r\n            consequentName: consequentName,\r\n            consequentIdx: consequentIdx\r\n        })\r\n    }\r\n\r\n\r\n\r\n    handleMenuPopUp = (event) => {\r\n        this.setState({\r\n            menuPopUp: !this.state.menuPopUp,\r\n            anchorEl: event.currentTarget\r\n        });\r\n    }\r\n    handleAddRulePopUp = () => {\r\n        this.setState({ AddRulePopUp: !this.state.AddRulePopUp });\r\n    }\r\n    handleModify = (state) => {\r\n        this.setState({ modify: state });\r\n    }\r\n    handleModifyDevice = () => {\r\n        this.setState({ modifyDevice: !this.state.modifyDevice });\r\n    }\r\n    handleAddRuleAntecedentPopUp = () => {\r\n        this.setState({ addRuleAntecedentPopUp: !this.state.addRuleAntecedentPopUp }, () => {\r\n            if (this.state.addRuleAntecedentPopUp) {\r\n                this.getAntecedents();\r\n            }\r\n        });\r\n    }\r\n    handleAddRuleConsequentPopUp = () => {\r\n        this.setState({ addRuleConsequentPopUp: !this.state.addRuleConsequentPopUp }, () => {\r\n            if (this.state.addRuleConsequentPopUp) {\r\n                this.getConsequents();\r\n            }\r\n        });\r\n    }\r\n    handleRegisterDevicePopUp = () => {\r\n        this.setState({ registerDevicePopUp: !this.state.registerDevicePopUp });\r\n    }\r\n    handleDeviceAntecedentPopUp = (event) => {\r\n        this.setState({ deviceAntecedentPopUp: event });\r\n    }\r\n    handleDeviceConsequentPopUp = (event) => {\r\n        this.setState({ deviceConsequentPopUp: event });\r\n    }\r\n    handleSetRulePopUp = (event) => {\r\n        this.setState({ setRulePopUp: event });\r\n    }\r\n    handleLogOut = () => {\r\n        this.setState({ logout: true }, () => { this.render() });\r\n    }\r\n    handleAddAlertEmailPopUp = () => {\r\n        this.setState({ addAlertEmailPopUp: !this.state.addAlertEmailPopUp })\r\n    }\r\n    handleModifyAlertEmail = (state) => {\r\n        this.setState({ modifyAlertEmail: state })\r\n    }\r\n\r\n    handleRefreshAntecedents = (refresh) => {\r\n        this.setState({ refreshAntecedents: refresh });\r\n    }\r\n    handleRefreshConsequents = (refresh) => {\r\n        this.setState({ refreshConsequents: refresh });\r\n    }\r\n    handleRefreshRules = (refresh) => {\r\n        this.setState({ refreshRules: refresh });\r\n    }\r\n    AntecedentRulePopUpBody = () => {\r\n        this.setState({ ruleBody: false, classButtonRuleSelection: \"AntecedentRuleSelection\" })\r\n    }\r\n    ConsequentRulePopUpBody = () => {\r\n        this.setState({ ruleBody: true, classButtonRuleSelection: \"ConsequentRuleSelection\" })\r\n    }\r\n    handleServerErrorPopUp = () => {\r\n        this.setState({\r\n            server_error: !this.state.server_error\r\n        })\r\n    }\r\n\r\n\r\n    sensorRoute = () => {\r\n        console.log(\"sensor route\")\r\n        const url = this.state.routeUrl;\r\n        if (url !== \"sensor\") {\r\n            this.getAntecedents();\r\n        }\r\n    }\r\n    ruleRoute = () => {\r\n        console.log(\"rule route\")\r\n        const url = this.state.routeUrl;\r\n        if (url !== \"rule\") {\r\n            this.getRules();\r\n        }\r\n    }\r\n    switchRoute = () => {\r\n        console.log(\"switch route\")\r\n        const url = this.state.routeUrl;\r\n        if (url !== \"switch\") {\r\n            this.getConsequents();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.logout) {\r\n            return (\r\n                <Redirect to={process.env.REACT_APP_LOGIN_URL} />\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <AppDiv>\r\n                    <TopBar1>\r\n                        <TopBar1Element>\r\n                            YOURULE\r\n                        </TopBar1Element>\r\n                        <TopBar1Button onClick={(event) => { this.handleMenuPopUp(event) }}>\r\n                            <MenuIcon fontSize=\"large\" style={{ color: 'white' }} />\r\n                        </TopBar1Button>\r\n                        <PopperStyled placement=\"bottom-end\" id='menu-popper' open={this.state.menuPopUp} anchorEl={this.state.anchorEl}>\r\n                            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                                <ListItem button >\r\n                                    <ListItemIcon>\r\n                                        <AccountCircleIcon fontSize=\"small\" style={{ color: 'white' }} />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"profile\" />\r\n                                </ListItem>\r\n                                <Divider style={{ color: 'white !important' }} />\r\n                                <ListItem button onClick={() => {\r\n                                    this.handleLogOut();\r\n                                }}>\r\n                                    <ListItemIcon>\r\n                                        <ExitToAppIcon fontSize=\"small\" style={{ color: 'white' }} />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"logout\" />\r\n                                </ListItem>\r\n                            </List>\r\n                            <Divider />\r\n                        </PopperStyled>\r\n\r\n                        <ServerErrorPopUp\r\n                            server_error={this.state.server_error}\r\n                            handleServerErrorPopUp={this.handleServerErrorPopUp}\r\n                            sensorRoute={this.sensorRoute}\r\n                        />\r\n\r\n                        <CreateRuleProcess\r\n                            AddRulePopUp={this.state.AddRulePopUp}\r\n                            rules={this.state.rules}\r\n                            base_url={process.env.REACT_APP_BACKEND_URL}\r\n                            handleAddRulePopUp={this.handleAddRulePopUp}\r\n                            createRuleRequest={this.createRuleRequest}\r\n                            ruleRoute={this.ruleRoute}\r\n                            handleModify={this.handleModify}\r\n                        />\r\n\r\n                        <AddRuleConsequentProcess\r\n                            addRuleConsequentPopUp={this.state.addRuleConsequentPopUp}\r\n                            handleSetRulePopUp={this.handleSetRulePopUp}\r\n                            handleAddRuleConsequentPopUp={this.handleAddRuleConsequentPopUp}\r\n                            newRuleIdx={this.state.newRuleIdx}\r\n                            rules={this.state.rules}\r\n                            consequents={this.state.consequents}\r\n                            setConsequentRuleLocal={this.setConsequentRuleLocal}\r\n                            handleModify={this.handleModify}\r\n                        />\r\n                        <AddRuleAntecedentProcess\r\n                            addRuleAntecedentPopUp={this.state.addRuleAntecedentPopUp}\r\n                            handleSetRulePopUp={this.handleSetRulePopUp}\r\n                            handleAddRuleAntecedentPopUp={this.handleAddRuleAntecedentPopUp}\r\n                            newRuleIdx={this.state.newRuleIdx}\r\n                            rules={this.state.rules}\r\n                            antecedents={this.state.antecedents}\r\n                            consequents={this.state.consequents}\r\n                            setAntecedentRuleLocal={this.setAntecedentRuleLocal}\r\n                            handleModify={this.handleModify}\r\n                        />\r\n                        <RegisterDeviceProcess\r\n                            registerDevicePopUp={this.state.registerDevicePopUp}\r\n                            handleRegisterDevicePopUp={this.handleRegisterDevicePopUp}\r\n                            registerDeviceRequest={this.registerDeviceRequest}\r\n                            allDeviceId={this.state.allDeviceId}\r\n                        />\r\n\r\n                    </TopBar1>\r\n                    <div className=\"TopBar2\">\r\n                        <ButtonGroup variant=\"text\" color=\"default\" aria-label=\"text primary button group\">\r\n                            <Button style={{ color: \"#bfbfbf\" }} className={this.state.routeUrl === \"sensor\" ? \"ButtonClicked\" : \"\"} onClick={() => { this.sensorRoute(); }}>\r\n                                SENSORS\r\n                            </Button>\r\n                            <Button style={{ color: \"#bfbfbf\" }} className={this.state.routeUrl === \"rule\" ? \"ButtonClicked\" : \"\"} onClick={() => { this.ruleRoute(); }}>\r\n                                RULES\r\n                            </Button>\r\n                            <Button style={{ color: \"#bfbfbf\" }} className={this.state.routeUrl === \"switch\" ? \"ButtonClicked\" : \"\"} onClick={() => { this.switchRoute(); }}>\r\n                                SWITCHES\r\n                            </Button>\r\n                        </ButtonGroup>\r\n\r\n                    </div>\r\n\r\n                    <GreatBody>\r\n                        <LateralMenu\r\n                            routeUrl={this.state.routeUrl}\r\n                            antecedents={this.state.antecedents}\r\n                            handleDeviceAntecedentPopUp={this.handleDeviceAntecedentPopUp}\r\n                            setNewAntecedent={this.setNewAntecedent}\r\n                            getAntecedentById={this.getAntecedentById}\r\n                            handleSetRulePopUp={this.handleSetRulePopUp}\r\n                            rules={this.state.rules}\r\n                            setNewRule={this.setNewRule}\r\n                            getRuleById={this.getRuleById}\r\n                            consequents={this.state.consequents}\r\n                            handleDeviceConsequentPopUp={this.handleDeviceConsequentPopUp}\r\n                            setNewConsequent={this.setNewConsequent}\r\n                            getConsequentById={this.getConsequentById}\r\n                            antecedentId={this.state.antecedentId}\r\n                            consequentId={this.state.consequentId}\r\n                            newRuleId={this.state.newRuleId}\r\n                            sensorRoute={this.sensorRoute}\r\n                            ruleRoute={this.ruleRoute}\r\n                            switchRoute={this.switchRoute}\r\n                            modifyDevice={this.state.modifyDevice}\r\n                            updateDeviceRequest={this.updateDeviceRequest}\r\n                            handleModifyDevice={this.handleModifyDevice}\r\n                            deleteDeviceRequest={this.deleteDeviceRequest}\r\n                            handleRegisterDevicePopUp={this.handleRegisterDevicePopUp}\r\n                            handleAddRulePopUp={this.handleAddRulePopUp}\r\n                            modify={this.state.modify}\r\n                            handleModify={this.handleModify}\r\n                            AntecedentRulePopUpBody={this.AntecedentRulePopUpBody}\r\n                            deleteRuleRequest={this.deleteRuleRequest}\r\n                            newRuleIdx={this.state.newRuleIdx}\r\n                            setRuleRequest={this.setRuleRequest}\r\n                        />\r\n                        <ContentContainer>\r\n                            <ElementDetails\r\n                                routeUrl={this.state.routeUrl}\r\n                                ruleRoute={this.ruleRoute}\r\n                                rules={this.state.rules}\r\n                                deviceAntecedentPopUp={this.state.deviceAntecedentPopUp}\r\n                                handleDeviceAntecedentPopUp={this.handleDeviceAntecedentPopUp}\r\n                                modifyDevice={this.state.modifyDevice}\r\n                                handleModifyDevice={this.handleModifyDevice}\r\n                                antecedents={this.state.antecedents}\r\n                                antecedentId={this.state.antecedentId}\r\n                                antecedentName={this.state.antecedentName}\r\n                                antecedentIdx={this.state.antecedentIdx}\r\n                                setNewAntecedent={this.setNewAntecedent}\r\n                                modifyAntecedentSetting={this.modifyAntecedentSetting}\r\n                                modifyAntecedentSettingError={this.modifyAntecedentSettingError}\r\n                                updateDeviceRequest={this.updateDeviceRequest}\r\n                                deleteDeviceRequest={this.deleteDeviceRequest}\r\n                                getDeviceMeasureRequest={this.getDeviceMeasureRequest}\r\n                                modifyAntecedentName={this.modifyAntecedentName}\r\n                                setNewRule={this.setNewRule}\r\n                                handleSetRulePopUp={this.handleSetRulePopUp}\r\n                                setRulePopUp={this.state.setRulePopUp}\r\n                                newRuleIdx={this.state.newRuleIdx}\r\n                                newRuleId={this.state.newRuleId}\r\n                                newRuleName={this.state.newRuleName}\r\n                                deleteRuleConsequentRequest={this.deleteRuleConsequentRequest}\r\n                                deleteRuleAntecedentRequest={this.deleteRuleAntecedentRequest}\r\n                                handleModify={this.handleModify}\r\n                                modify={this.state.modify}\r\n                                setNewRuleCondition={this.setNewRuleCondition}\r\n                                setNewStartValue={this.setNewStartValue}\r\n                                setNewStopValue={this.setNewStopValue}\r\n                                handleAddRuleAntecedentPopUp={this.handleAddRuleAntecedentPopUp}\r\n                                handleAddRuleConsequentPopUp={this.handleAddRuleConsequentPopUp}\r\n                                setRuleAntecedentRequest={this.setRuleAntecedentRequest}\r\n                                setRuleConsequentRequest={this.setRuleConsequentRequest}\r\n                                deleteRuleRequest={this.deleteRuleRequest}\r\n                                modifyRuleName={this.modifyRuleName}\r\n                                updateRuleName={this.updateRuleName}\r\n                                setNewRuleMeasure={this.setNewRuleMeasure}\r\n                                setRuleRequest={this.setRuleRequest}\r\n                                consequents={this.state.consequents}\r\n                                consequentId={this.state.consequentId}\r\n                                consequentName={this.state.consequentName}\r\n                                consequentIdx={this.state.consequentIdx}\r\n                                setNewConsequent={this.setNewConsequent}\r\n                                handleDeviceConsequentPopUp={this.handleDeviceConsequentPopUp}\r\n                                deviceConsequentPopUp={this.state.deviceConsequentPopUp}\r\n                                modifyConsequentName={this.modifyConsequentName}\r\n                                setConsequentAutomaticRequest={this.setConsequentAutomaticRequest}\r\n                                setConsequentManualMeasureRequest={this.setConsequentManualMeasureRequest}\r\n                                removeAlertEmailRequest={this.removeAlertEmailRequest}\r\n                                modifyAlertEmail={this.state.modifyAlertEmail}\r\n                                handleModifyAlertEmail={this.handleModifyAlertEmail}\r\n                                handleAddAlertEmailPopUp={this.handleAddAlertEmailPopUp}\r\n                                getRuleById={this.getRuleById}\r\n                                getAntecedentById={this.getAntecedentById}\r\n                                getConsequentById={this.getConsequentById}\r\n                                addEmailLocal={this.addEmailLocal}\r\n                                addNewAlertEmailRequest={this.addNewAlertEmailRequest}\r\n                                modifyEmailRequest={this.modifyEmailRequest}\r\n                                getAntecedents={this.getAntecedents}\r\n                                getConsequents={this.getConsequents}\r\n                                setRuleConsequentDelay={this.setRuleConsequentDelay}\r\n                                onDragEnd={this.onDragEnd}\r\n                            />\r\n                        </ContentContainer>\r\n                    </GreatBody>\r\n                </AppDiv>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nfunction ServerErrorPopUp(props) {\r\n    return (\r\n        <Modal show={props.server_error}\r\n            onHide={() => {\r\n                props.handleServerErrorPopUp();\r\n                props.sensorRoute();\r\n            }}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>\r\n                    ERROR\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <p>Server Error! Try Again</p>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button onClick={() => {\r\n                    props.handleServerErrorPopUp();\r\n                    props.sensorRoute();\r\n                }}>\r\n                    Close\r\n                </button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\n\r\n\r\nconst PopperStyled = styled(Popper)`\r\ncolor: white;\r\nbackground-color: #737373;\r\nborder-style: solid;\r\n`;\r\n\r\n\r\n\r\nconst AppDiv = styled.div`\r\ndisplay: flex;\r\nflex-flow: column;\r\nwidth: 100%;\r\nheight: 100%;\r\nbackground-color: rgb(190, 210, 218);\r\n`;\r\n\r\nconst TopBar1 = styled.div`\r\nbackground-color: #737373;\r\nwidth: 100%;\r\n`;\r\n\r\nconst TopBar1Element = styled.div`\r\n  float: left;\r\n  color: #eead4c;\r\n  text-align: center;\r\n  padding: 14px 16px;\r\n  text-decoration: none;\r\n  font-size: 15px;\r\n  font-style: oblique;\r\n  font-weight: bold !important;\r\n`;\r\n\r\nconst TopBar1Button = styled(IconButton)`\r\n  float: right;\r\n  margin: 2%;\r\n`;\r\n\r\nconst GreatBody = styled.div`\r\ndisplay: flex;\r\nflex-flow: row;\r\nwidth: 100%;\r\nheight: 100%;\r\n`;\r\n\r\nconst ContentContainer = styled.div`\r\nwidth: 100%;\r\nheight: 100%;\r\ndisplay: flex;\r\nflex-flow: column;\r\ntext-align: center;\r\nmax-height:100%;\r\noverflow-y: auto;\r\nbackground-color: #e6e6e6;\r\n`;\r\n\r\n\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    useLocation,\r\n    Route,\r\n    useRouteMatch\r\n} from \"react-router-dom\";\r\nimport UserAccessProcess from \"./UserAccessProcess\";\r\nimport AppNew from './AppNew'\r\n\r\n\r\nexport default class Main extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <Switch>\r\n                    <Route path={process.env.REACT_APP_PROTECTED_URL}>\r\n                        <PrivateRoute/>\r\n                    </Route>\r\n                    <Route path={process.env.REACT_APP_LOGIN_URL}>\r\n                        <UserAccessProcess />\r\n                    </Route>\r\n                </Switch>\r\n            </Router>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction PrivateRoute() {\r\n    console.log(\"route private\")\r\n    let { path, url } = useRouteMatch();\r\n    const location = useLocation();\r\n    const idToken = location.state.idToken;\r\n    \r\n    return (\r\n        <AppNew\r\n            idToken={idToken}\r\n            user_id=\"user\"\r\n            url={url}\r\n            path={path}\r\n        />\r\n    )\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './App.css';\nimport Main from './Main'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Main />\n  </React.StrictMode>,\n\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}