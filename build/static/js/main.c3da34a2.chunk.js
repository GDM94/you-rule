(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){},238:function(e,t){},240:function(e,t){},251:function(e,t){},253:function(e,t){},280:function(e,t){},282:function(e,t){},283:function(e,t){},288:function(e,t){},290:function(e,t){},309:function(e,t){},321:function(e,t){},324:function(e,t){},331:function(e,t,n){"use strict";n.r(t);var s,a,r,i,o,c,l=n(1),u=n.n(l),d=n(24),p=n.n(d),h=(n(209),n(210),n(15)),m=n(16),j=n(18),f=n(17),b=n(92),v=n(23),x=n(6),R=n(5),O=n.n(R),y=n(20),g=n(14),q=n.n(g),w=n(10),A=n(0),U=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).setUserName=function(e){s.setState({userName:e})},s.setPassword=function(e){s.setState({password:e})},s.loginSubmit=function(e){s.props.UserLoginRequest(s.state.userName,s.state.password),e.preventDefault()},s.state={userName:"",password:""},s}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(A.jsxs)(w.a,{show:this.props.userLoginPopUp,onHide:function(){return e.props.handleLoginPopUp()},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:'"LOGIN"'})}),Object(A.jsxs)(w.a.Body,{children:[Object(A.jsx)("div",{children:Object(A.jsx)("p",{style:{display:this.props.userLoginError?"":"none"},children:" Error: User Name or Password are not correct!"})}),Object(A.jsx)("div",{children:Object(A.jsxs)("form",{name:"login",onSubmit:this.loginSubmit,children:[Object(A.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"email",onChange:function(t){e.props.handleUserLoginError(!1);var n=t.target.value;e.setUserName(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"password",onChange:function(t){e.props.handleUserLoginError(!1);var n=t.target.value;e.setPassword(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"submit",style:{visibility:"hidden"}})]})})]}),Object(A.jsx)(w.a.Footer,{children:Object(A.jsx)("div",{children:Object(A.jsx)("button",{onClick:function(){e.props.UserLoginRequest(e.state.userName,e.state.password)},children:"LOGIN"})})})]})}}]),n}(u.a.Component),I=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).setName=function(e){s.setState({name:e})},s.setSurname=function(e){s.setState({surname:e})},s.setEmail=function(e){s.setState({email:e})},s.setPassword=function(e){s.setState({password:e})},s.setRepeatPassword=function(e){s.setState({repeatPassword:e})},s.registrationSubmit=function(e){s.registrationFunction(),e.preventDefault()},s.registrationFunction=function(){!s.props.duplicateUserError&&s.state.password.length>s.state.password_length&&s.state.email.includes("@")&&s.state.password===s.state.repeatPassword&&s.state.name.length>0&&s.state.surname.length>0?(s.setState({checkError:!1}),s.props.UserRegistrationRequest(s.state.email,s.state.password,s.state.name,s.state.surname)):(s.setState({checkError:!0}),s.props.duplicateUserError?s.setState({errorMessage:"Error: Email already registerd."}):s.state.password.length<=s.state.password_length?s.setState({errorMessage:"Error: password don't attempt security standard. Password must be at least 2 character long."}):s.state.email.includes("@")?s.state.password===s.state.repeatPassword?s.setState({errorMessage:"Error: the repeated password must be identical to the previous password"}):s.setState({errorMessage:"Error: you must register your name and surname"}):s.setState({errorMessage:"Error: email non valid"}))},s.state={checkError:!1,name:"",surname:"",email:"",password:"",repeatPassword:"",errorMessage:"",password_length:2},s}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(A.jsxs)(w.a,{show:this.props.userRegisterPopUp,onHide:function(){return e.props.handleRegisterPopUp()},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:'"SING UP"'})}),Object(A.jsx)(w.a.Body,{children:Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{children:Object(A.jsxs)("p",{style:{display:this.state.checkError?"block":"none"},children:[" ",this.state.errorMessage]})}),Object(A.jsxs)("form",{name:"login",onSubmit:this.registrationSubmit,children:[Object(A.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"name",onChange:function(t){var n=t.target.value;e.setName(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"text",id:"surname",name:"surname",placeholder:"surname",onChange:function(t){var n=t.target.value;e.setSurname(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"text",id:"email",name:"email",placeholder:"email",onChange:function(t){var n=t.target.value;e.setEmail(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"password",onChange:function(t){var n=t.target.value;e.setPassword(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"password",id:"repeat_password",name:"repeat_password",placeholder:"repeat password",onChange:function(t){var n=t.target.value;e.setRepeatPassword(n)}}),Object(A.jsx)("br",{}),Object(A.jsx)("input",{type:"submit",style:{visibility:"hidden"}})]})]})}),Object(A.jsx)(w.a.Footer,{children:Object(A.jsx)("div",{children:Object(A.jsx)("button",{onClick:function(){e.registrationFunction()},children:"SING UP"})})})]})}}]),n}(u.a.Component),C=n.p+"static/media/yourule_logo2.d9c4ebda.png",S=n(7),N=n(354),P=n(358),D=n(93),E=n.n(D),k=n(349),_=n(350),M=n(351),B=n(352),L=n(353),T=n(190),V=n.n(T),F=n(191),H=n.n(F),z=n(135),W=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).UserLoginRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n){var a,r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UserAccess GET login"),a=z.encode({email:t,password:n},"secret"),r="http://93.51.10.117:8081/user/login?access_token="+a,e.prev=3,e.next=6,q.a.get(r);case 6:i=e.sent,"false"!==(o=i.data.tokenId)?(s.handleLoginPopUp(),s.setUser(t,o)):s.setState({userLoginError:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}(),s.UserRegistrationRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n,a,r){var i,o,c,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UserAccess POST registration"),i=z.encode({email:t,password:n,name:a,surname:r},"secret"),o="http://93.51.10.117:8081/user/registration?access_token="+i,e.prev=3,e.next=6,q.a.get(o);case 6:c=e.sent,"false"!==(l=c.data.tokenId)?(s.handleRegisterPopUp(),s.setUser(t,l)):s.setState({duplicateUserError:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,s,a){return e.apply(this,arguments)}}(),s.handleMenuPopUp=function(e){s.setState({menuPopUp:!s.state.menuPopUp,anchorEl:e.currentTarget})},s.handleUserLoginError=function(e){s.setState({userLoginError:e})},s.handleLoginPopUp=function(){s.setState({userLoginPopUp:!s.state.userLoginPopUp})},s.handleRegisterPopUp=function(){s.setState({userRegisterPopUp:!s.state.userRegisterPopUp})},s.setUser=function(e,t){s.setState({email:e,idToken:t,redirect:"/protected?email="+e+"&idToken="+t}),console.log("redirect")},s.state={userNameList:[],userLoginPopUp:!1,userRegisterPopUp:!1,userName:"",password:"",redirect:"",userLoginError:!1,idToken:"",duplicateUserError:!1,menuPopUp:!1,anchorEl:void 0},s}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return""===this.state.redirect?Object(A.jsxs)(J,{children:[Object(A.jsxs)(Y,{children:[Object(A.jsx)(X,{children:"WELCOME PORTAL"}),Object(A.jsx)(Q,{onClick:function(t){e.handleMenuPopUp(t)},children:Object(A.jsx)(E.a,{fontSize:"large",style:{color:"white"}})}),Object(A.jsxs)(G,{placement:"bottom-end",id:"menu-popper",open:this.state.menuPopUp,anchorEl:this.state.anchorEl,children:[Object(A.jsxs)(k.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(A.jsxs)(_.a,{button:!0,onClick:function(){e.handleLoginPopUp()},children:[Object(A.jsx)(M.a,{children:Object(A.jsx)(V.a,{fontSize:"small",style:{color:"white"}})}),Object(A.jsx)(B.a,{primary:"LOGIN"})]}),Object(A.jsx)(L.a,{style:{color:"white !important"}}),Object(A.jsxs)(_.a,{button:!0,onClick:function(){e.handleRegisterPopUp()},children:[Object(A.jsx)(M.a,{children:Object(A.jsx)(H.a,{fontSize:"small",style:{color:"white"}})}),Object(A.jsx)(B.a,{primary:"REGISTER"})]})]}),Object(A.jsx)(L.a,{})]})]}),Object(A.jsx)(U,{userLoginPopUp:this.state.userLoginPopUp,handleLoginPopUp:this.handleLoginPopUp,handleUserLoginError:this.handleUserLoginError,userLoginError:this.state.userLoginError,UserLoginRequest:this.UserLoginRequest,setUser:this.setUser}),Object(A.jsx)(I,{userRegisterPopUp:this.state.userRegisterPopUp,handleRegisterPopUp:this.handleRegisterPopUp,UserRegistrationRequest:this.UserRegistrationRequest,setUser:this.setUser,duplicateUserError:this.state.duplicateUserError}),Object(A.jsx)(K,{children:Object(A.jsx)("img",{src:C,alt:"fireSpot"})})]}):Object(A.jsx)(v.a,{to:{pathname:"/protected",state:{idToken:this.state.idToken}}})}}]),n}(u.a.Component),G=Object(S.a)(P.a)(s||(s=Object(x.a)(["\ncolor: white;\nbackground-color: rgb(21, 33, 207);\nborder-style: solid;\n"]))),J=S.a.div(a||(a=Object(x.a)(["\ndisplay: flex;\nflex-flow: column;\nwidth: 100%;\nheight: 100%;\nbackground-color: rgb(190, 210, 218);\n"]))),Y=S.a.div(r||(r=Object(x.a)(["\nbackground-color: rgb(21, 33, 207);\nwidth: 100%;\n"]))),X=S.a.div(i||(i=Object(x.a)(["\n  float: left;\n  color: #f2f2f2;\n  text-align: center;\n  padding: 14px 16px;\n  text-decoration: none;\n  font-size: 17px;\n"]))),Q=Object(S.a)(N.a)(o||(o=Object(x.a)(["\n  float: right;\n  margin-top: 2%;\n  margin-bottom: 2%;\n"]))),K=S.a.div(c||(c=Object(x.a)(["\n  display: flex;\n  flex-flow: row;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n"]))),Z=(n(330),function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).createRule=function(e){if(!s.state.checkCreateNewRule){var t=s.state.ruleName;s.props.createRuleRequest(t)}e.preventDefault()},s.state={checkCreateNewRule:!1,ruleName:""},s}return Object(m.a)(n,[{key:"checkCreateRuleFunction",value:function(e,t){e.some((function(e){return e.name===t}))?this.setState({checkCreateNewRule:!0}):this.setState({checkCreateNewRule:!1,ruleName:t})}},{key:"render",value:function(){var e=this;return Object(A.jsx)("div",{children:Object(A.jsxs)(w.a,{show:this.props.AddRulePopUp,onHide:function(){return e.props.handleAddRulePopUp()},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:"ADD RULE"})}),Object(A.jsx)(w.a.Body,{children:Object(A.jsxs)("div",{className:"GenericModalBody",children:[Object(A.jsx)("p",{style:{display:this.state.checkCreateNewRule?"block":"none"},children:" Error: rule name already exist! Choose another name."}),Object(A.jsxs)("form",{onSubmit:this.createRule,children:[Object(A.jsx)("label",{htmlFor:"ruleName",children:"RULE NAME: "}),Object(A.jsx)("input",{name:"ruleName",id:"ruleName",type:"text",onChange:function(t){var n=t.target.value;e.checkCreateRuleFunction(e.props.rules,n)}})]})]})}),Object(A.jsxs)(w.a.Footer,{children:[Object(A.jsx)("button",{onClick:function(){if(!e.state.checkCreateNewRule){var t=e.state.ruleName;e.props.createRuleRequest(t)}},children:"NEXT"}),Object(A.jsx)("button",{onClick:function(){return e.props.handleAddRulePopUp()},children:"Close"})]})]})})}}]),n}(u.a.Component)),$=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).state={},s}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(A.jsx)("div",{children:Object(A.jsxs)(w.a,{show:this.props.addRuleConsequentPopUp,onHide:function(){e.props.handleAddRuleConsequentPopUp(),e.props.handleSetRulePopUp(!0)},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:Object(A.jsx)("div",{children:"SWITCHES"})})}),Object(A.jsx)(w.a.Body,{children:Object(A.jsx)("div",{className:"GenericModalBody",children:Object(A.jsx)("table",{children:Object(A.jsx)("tbody",{children:Object(A.jsx)(ee,{newRuleIdx:this.props.newRuleIdx,rules:this.props.rules,consequents:this.props.consequents,setConsequentRuleLocal:this.props.setConsequentRuleLocal,handleModify:this.props.handleModify})})})})}),Object(A.jsx)(w.a.Footer,{children:Object(A.jsx)("button",{onClick:function(){e.props.handleAddRuleConsequentPopUp(),e.props.handleSetRulePopUp(!0)},children:"Close"})})]})})}}]),n}(u.a.Component);function ee(e){var t=-1,n=e.newRuleIdx,s=e.rules[n].consequent,a=(s.length+1).toString(),r=[];return s.length>0&&(r=s.map((function(e){return e.device_id}))),e.consequents.map((function(n){return r.some((function(e){return e===n.id}))?null:(t++,console.log(n),Object(A.jsx)("tr",{children:Object(A.jsx)("td",{children:Object(A.jsx)("button",{onClick:function(){var t="",s="measure";n.id.includes("alert")?t="true":(t=n.automatic,s=n.measure);var r={device_id:n.id,name:n.name,if_value:"on",else_value:"off",automatic:t,measure:s,order:a,delay:"0"};e.setConsequentRuleLocal(e.newRuleIdx,r),e.handleModify(!0)},children:n.name})})},t))}))}var te=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).state={},s}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(A.jsx)("div",{children:Object(A.jsxs)(w.a,{show:this.props.addRuleAntecedentPopUp,onHide:function(){e.props.handleAddRuleAntecedentPopUp(),e.props.handleSetRulePopUp(!0)},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:Object(A.jsx)("div",{children:"SENSORS"})})}),Object(A.jsx)(w.a.Body,{children:Object(A.jsxs)("div",{className:"GenericModalBody",children:[Object(A.jsx)("div",{children:Object(A.jsx)("table",{children:Object(A.jsx)("tbody",{children:Object(A.jsx)(ne,{newRuleIdx:this.props.newRuleIdx,rules:this.props.rules,antecedents:this.props.antecedents,setAntecedentRuleLocal:this.props.setAntecedentRuleLocal,handleModify:this.props.handleModify})})})}),Object(A.jsx)("div",{children:Object(A.jsx)("table",{children:Object(A.jsx)("tbody",{children:Object(A.jsx)(se,{newRuleIdx:this.props.newRuleIdx,rules:this.props.rules,setAntecedentRuleLocal:this.props.setAntecedentRuleLocal,handleModify:this.props.handleModify})})})})]})}),Object(A.jsx)(w.a.Footer,{children:Object(A.jsx)("button",{onClick:function(){e.props.handleAddRuleAntecedentPopUp(),e.props.handleSetRulePopUp(!0)},children:"Close"})})]})})}}]),n}(u.a.Component);function ne(e){var t=-1,n=e.newRuleIdx,s=e.rules[n].antecedent,a=[];return s.length>0&&(a=s.map((function(e){return e.device_id}))),e.antecedents.map((function(n){return a.some((function(e){return e===n.id}))?null:(t++,Object(A.jsx)("tr",{children:Object(A.jsx)("td",{children:Object(A.jsx)("button",{onClick:function(){var t="//";null!==n.measure&&(t=n.measure);var s={device_id:n.id,name:n.name,start_value:"0",stop_value:"0",condition:"between",measure:"",value:t};n.id.includes("timer")?(s.start_value="00:00",s.stop_value="00:00",s.measure="time"):n.id.includes("PHOTOCELL")?s.measure="luminosity (%)":n.id.includes("WATERLEVEL")?s.measure="water level (%)":n.id.includes("SOILMOISTURE")?s.measure="soil moisture (%)":n.id.includes("AMMETER")?s.measure="power (W)":n.id.includes("BUTTON")&&(s.measure="status (On/Off)",s.condition="=",s.start_value="on",s.stop_value="//"),console.log(s),e.setAntecedentRuleLocal(e.newRuleIdx,s),e.handleModify(!0)},children:n.name})})},t))}))}function se(e){var t=e.newRuleIdx,n=e.rules[t].antecedent,s=[];n.length>0&&(s=n.map((function(e){return e.device_id})));var a=-1,r=e.rules[t].consequent;return r.length>0?r.map((function(t){return t.device_id.includes("alert")||s.some((function(e){return e===t.device_id}))?null:(a++,Object(A.jsx)("tr",{children:Object(A.jsx)("td",{children:Object(A.jsx)("button",{onClick:function(){var n={device_id:t.device_id,name:t.name,start_value:"00:00",stop_value:"00:00",condition:"delta",measure:"last time on",value:"-"};e.setAntecedentRuleLocal(e.newRuleIdx,n),e.handleModify(!0)},children:t.name})})},a))})):null}var ae,re,ie=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).createDevice=function(e){s.CheckRegisterDeviceRecognition()&&(oe(s.props,s.state.newDeviceId),s.props.handleRegisterDevicePopUp()),e.preventDefault()},s.state={registerDeviceError:!1,newDeviceId:""},s}return Object(m.a)(n,[{key:"CheckRegisterDeviceRecognition",value:function(){var e=this,t=this.props.allDeviceId,n=this.state.newDeviceId,s=!1;return t.some((function(e){return e===n}))||(n.includes("SWITCH")||n.includes("PHOTOCELL")||n.includes("WATERLEVEL")||n.includes("SOILMOISTURE")||n.includes("AMMETER")||n.includes("BUTTON"))&&(s=!0),this.setState({registerDeviceError:!s},(function(){e.render()})),s}},{key:"NewDeviceIdRegistration",value:function(e){var t=this;this.setState({newDeviceId:e},(function(){t.render()}))}},{key:"render",value:function(){var e=this;return Object(A.jsx)("div",{children:Object(A.jsxs)(w.a,{show:this.props.registerDevicePopUp,onHide:function(){return e.props.handleRegisterDevicePopUp()},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:"ADD DEVICE"})}),Object(A.jsx)(w.a.Body,{children:Object(A.jsxs)("div",{className:"GenericModalBody",children:[Object(A.jsx)("p",{style:{display:this.state.registerDeviceError?"block":"none"},children:" Error: device Id is not correct!"}),Object(A.jsxs)("form",{onSubmit:this.createDevice,children:[Object(A.jsx)("label",{htmlFor:"deviceId",children:"DEVICE ID: "}),Object(A.jsx)("input",{name:"deviceId",id:"deviceId",type:"text",onChange:function(t){var n=t.target.value;e.NewDeviceIdRegistration(n)}})]})]})}),Object(A.jsxs)(w.a.Footer,{children:[Object(A.jsx)("button",{onClick:function(){e.CheckRegisterDeviceRecognition()&&(oe(e.props,e.state.newDeviceId),e.props.handleRegisterDevicePopUp())},children:"NEXT"}),Object(A.jsx)("button",{onClick:function(){return e.props.handleRegisterDevicePopUp()},children:"Close"})]})]})})}}]),n}(u.a.Component);function oe(e,t){var n=null,s="";t.includes("SWITCH")?(s="consequent",n={id:t,name:"switch",measure:"off",rules:[],automatic:"true",manual_measure:"off"}):(s="antecedent",t.includes("PHOTOCELL")?n={id:t,name:"photocell",setting:"1024",measure:"init",absolute_measure:"init",error:"0",rules:[]}:t.includes("WATERLEVEL")?n={id:t,name:"waterlevel",setting:"100",measure:"init",absolute_measure:"init",error:"0",rules:[]}:t.includes("SOILMOISTURE")?n={id:t,name:"soilmoisture",setting:"1024",measure:"init",absolute_measure:"init",error:"0",rules:[]}:t.includes("AMMETER")?n={id:t,name:"ammeter",setting:"100",measure:"init",absolute_measure:"init",error:"0",rules:[]}:t.includes("BUTTON")&&(n={id:t,name:"button",setting:"",measure:"init",absolute_measure:"init",error:"",rules:[]})),e.registerDeviceRequest(s,n)}function ce(e){return Object(A.jsx)(pe,{children:Object(A.jsx)(k.a,{component:"div","aria-label":"main mailbox folders",children:Object(A.jsx)(le,{handleSetRulePopUp:e.handleSetRulePopUp,setNewRule:e.setNewRule,rules:e.rules,getRuleById:e.getRuleById,newRuleId:e.newRuleId,modify:e.modify,handleModify:e.handleModify,AntecedentRulePopUpBody:e.AntecedentRulePopUpBody,deleteRuleRequest:e.deleteRuleRequest,newRuleIdx:e.newRuleIdx,setRuleRequest:e.setRuleRequest})})})}function le(e){if(e.rules.length>0){var t=0;return e.rules.map((function(n){return Object(A.jsxs)("div",{children:[Object(A.jsx)(he,{style:{color:"black"},className:e.newRuleId===n.id?"ItemButtonClicked":"",onClick:function(){e.getRuleById(n.id),e.setNewRule(n.id,n.name)},children:Object(A.jsx)(B.a,{primary:n.name})}),Object(A.jsx)(L.a,{})]},t++)}))}return Object(A.jsx)(L.a,{})}var ue,de,pe=S.a.div(ae||(ae=Object(x.a)(["\n color: white;\n  margin: 5px;\n  padding-left: 5px;\n  padding-right: 0px;\n  \n  height: 100%;\n  overflow-y:auto;\n  text-align: center;\n"]))),he=Object(S.a)(_.a)(re||(re=Object(x.a)(["\npadding-bottom: 0px !important;\npadding-top: 10px !important;\n\n"])));function me(e){return Object(A.jsx)(ve,{children:Object(A.jsx)(k.a,{component:"div","aria-label":"main mailbox folders",children:Object(A.jsx)(je,{antecedents:e.antecedents,handleDeviceAntecedentPopUp:e.handleDeviceAntecedentPopUp,setNewAntecedent:e.setNewAntecedent,getAntecedentById:e.getAntecedentById,antecedentId:e.antecedentId,modifyDevice:e.modifyDevice,updateDeviceRequest:e.updateDeviceRequest,handleModifyDevice:e.handleModifyDevice,deleteDeviceRequest:e.deleteDeviceRequest})})})}function je(e){if(e.antecedents.length>0){var t=e.antecedents.map((function(e){return e.id}));return e.antecedents.map((function(n){var s=t.indexOf(n.id);return Object(A.jsxs)("div",{children:[Object(A.jsx)(xe,{style:{color:"black"},className:e.antecedentId===n.id?"ItemButtonClicked":"",onClick:function(){e.getAntecedentById(n.id),e.setNewAntecedent(n.id,n.name,s)},children:Object(A.jsx)(B.a,{primary:n.name})}),Object(A.jsx)(L.a,{})]},s)}))}return Object(A.jsx)(L.a,{})}var fe,be,ve=S.a.div(ue||(ue=Object(x.a)(["\n color: white;\n  margin: 5px;\n  padding-left: 5px;\n  padding-right: 0px;\n  \n  height: 100%;\n  overflow-y:auto;\n  text-align: center;\n"]))),xe=Object(S.a)(_.a)(de||(de=Object(x.a)(["\npadding-bottom: 0px !important;\npadding-top: 10px !important;\n\n"])));function Re(e){return Object(A.jsx)(we,{children:Object(A.jsx)(k.a,{component:"div","aria-label":"main mailbox folders",children:Object(A.jsx)(Oe,{consequents:e.consequents,handleDeviceConsequentPopUp:e.handleDeviceConsequentPopUp,setNewConsequent:e.setNewConsequent,getConsequentById:e.getConsequentById,consequentId:e.consequentId,modifyDevice:e.modifyDevice,handleModifyDevice:e.handleModifyDevice,deleteDeviceRequest:e.deleteDeviceRequest,updateDeviceRequest:e.updateDeviceRequest})})})}function Oe(e){if(e.consequents.length>0){var t=e.consequents.map((function(e){return e.id}));return e.consequents.map((function(n){var s=t.indexOf(n.id);return Object(A.jsxs)("div",{children:[Object(A.jsx)(Ae,{style:{color:"black"},className:e.consequentId===n.id?"ItemButtonClicked":"",onClick:function(){e.getConsequentById(n.id),e.setNewConsequent(n.id,n.name,s)},children:Object(A.jsx)(B.a,{primary:n.name})}),Object(A.jsx)(L.a,{})]},s)}))}return Object(A.jsx)(L.a,{})}var ye,ge,qe,we=S.a.div(fe||(fe=Object(x.a)(["\n color: white;\n  margin: 5px;\n  padding-left: 5px;\n  padding-right: 0px;\n  \n  height: 100%;\n  overflow-y:auto;\n  text-align: center;\n"]))),Ae=Object(S.a)(_.a)(be||(be=Object(x.a)(["\npadding-bottom: 0px !important;\npadding-top: 10px !important;\n\n"]))),Ue=n(332),Ie=n(52),Ce=n.n(Ie),Se=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).handlePopper=function(){s.setState({popper:!s.state.popper})},s.handleAncorPopper=function(e){s.setState({anchorEl:e.currentTarget})},s.AddFunction=function(){"sensor"===s.props.routeUrl||"switch"===s.props.routeUrl?s.props.handleRegisterDevicePopUp():"rule"===s.props.routeUrl&&s.props.handleAddRulePopUp()},s.state={popper:!1,anchorEl:void 0},s}return Object(m.a)(n,[{key:"render",value:function(){return"sensor"===this.props.routeUrl?Object(A.jsxs)(Me,{children:[Object(A.jsx)(Ne,{routeUrl:this.props.routeUrl,handlePopper:this.handlePopper,handleAncorPopper:this.handleAncorPopper,anchorEl:this.state.anchorEl,popper:this.state.popper,sensorRoute:this.props.sensorRoute,ruleRoute:this.props.ruleRoute,switchRoute:this.props.switchRoute,AddFunction:this.AddFunction}),Object(A.jsx)(me,{antecedents:this.props.antecedents,handleDeviceAntecedentPopUp:this.props.handleDeviceAntecedentPopUp,setNewAntecedent:this.props.setNewAntecedent,getAntecedentById:this.props.getAntecedentById,antecedentId:this.props.antecedentId,modifyDevice:this.props.modifyDevice,updateDeviceRequest:this.props.updateDeviceRequest,handleModifyDevice:this.props.handleModifyDevice,deleteDeviceRequest:this.props.deleteDeviceRequest})]}):"rule"===this.props.routeUrl?Object(A.jsxs)(Me,{children:[Object(A.jsx)(Ne,{routeUrl:this.props.routeUrl,handlePopper:this.handlePopper,handleAncorPopper:this.handleAncorPopper,anchorEl:this.state.anchorEl,popper:this.state.popper,sensorRoute:this.props.sensorRoute,ruleRoute:this.props.ruleRoute,switchRoute:this.props.switchRoute,AddFunction:this.AddFunction}),Object(A.jsx)(ce,{handleSetRulePopUp:this.props.handleSetRulePopUp,rules:this.props.rules,setNewRule:this.props.setNewRule,getRuleById:this.props.getRuleById,newRuleId:this.props.newRuleId,modify:this.props.modify,handleModify:this.props.handleModify,AntecedentRulePopUpBody:this.props.AntecedentRulePopUpBody,deleteRuleRequest:this.props.deleteRuleRequest,newRuleIdx:this.props.newRuleIdx,setRuleRequest:this.props.setRuleRequest})]}):"switch"===this.props.routeUrl?Object(A.jsxs)(Me,{children:[Object(A.jsx)(Ne,{routeUrl:this.props.routeUrl,handlePopper:this.handlePopper,handleAncorPopper:this.handleAncorPopper,anchorEl:this.state.anchorEl,popper:this.state.popper,sensorRoute:this.props.sensorRoute,ruleRoute:this.props.ruleRoute,switchRoute:this.props.switchRoute,AddFunction:this.AddFunction}),Object(A.jsx)(Re,{consequents:this.props.consequents,handleDeviceConsequentPopUp:this.props.handleDeviceConsequentPopUp,setNewConsequent:this.props.setNewConsequent,getConsequentById:this.props.getConsequentById,consequentId:this.props.consequentId,modifyDevice:this.props.modifyDevice,handleModifyDevice:this.props.handleModifyDevice,deleteDeviceRequest:this.props.deleteDeviceRequest,updateDeviceRequest:this.props.updateDeviceRequest})]}):void 0}}]),n}(u.a.Component);function Ne(e){var t="";return"sensor"===e.routeUrl?t="SENSORS":"rule"===e.routeUrl?t="RULES":"switch"===e.routeUrl&&(t="SWITCHES"),Object(A.jsx)("div",{children:Object(A.jsx)(Be,{children:Object(A.jsxs)(Le,{onClick:function(){e.AddFunction()},children:["ADD ",t," ",Object(A.jsx)(Ce.a,{})]})})})}var Pe,De,Ee,ke,_e,Me=S.a.div(ye||(ye=Object(x.a)(["\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n  float:left;\n  text-align: center;\n  color: rgba(15, 82, 13, 0.541);\n  border-right: #bfbfbf solid 1px !important;\n  background-color: #e6e6e6;\n"]))),Be=S.a.div(ge||(ge=Object(x.a)(["\ndisplay: flex;\nflex-flow: row;\nwidth: 100%;\nbackground-color: #737373;\n"]))),Le=Object(S.a)(Ue.a)(qe||(qe=Object(x.a)(["\ncolor: white !important;\ntext-align: center;\nborder-radius: 0% !important;\nwidth: 100%;\n"]))),Te=n(81),Ve=n(63),Fe=n.n(Ve),He=n(357),ze=n(79),We=n.n(ze),Ge=n(80),Je=n.n(Ge),Ye=n(64),Xe=n.n(Ye),Qe=n(48),Ke=n.n(Qe),Ze=n(46),$e=n.n(Ze),et=n(47),tt=n.n(et),nt=n(355);function st(e,t,n){var s=function(e){if("null"!==e&&"init"!==e&&"NaN"!==e&&null!==e){return{measure:e,status:"connected",color:"green"}}if("init"===e){return{measure:"-",status:"initialization",color:"yellow"}}return{measure:"-",status:"disconnected",color:"red"}},a=function(e,t,n,a){var r="-",i=s(t).measure;if("-"!==i)if(e.includes("PHOTOCELL")||e.includes("SOILMOISTURE"))r=Math.round(parseInt(i)/parseInt(n)*100).toString();else if(e.includes("AMMETER"))r=Math.round(parseInt(i)/parseInt(n)*100).toString();else if(e.includes("WATERLEVEL")){var o=parseInt(i)-parseInt(a);r=Math.round(100*(1-o/parseInt(n))).toString()}return r};return"view"===e?function(e,t){var n=e[t],r=n.id,i=n.measure,o=n.setting,c=n.error,l={measure:"null",status:"disconnected",color:"red",type:"",settings:"",error_measure:"",measure_type:"",measure_settings:"",measure_unit:"",max_measure:"",max_measure_time:"",min_measure:"",min_measure_time:""};if(r.includes("timer")){var u=new Date;l.measure=u.getHours()+":"+u.getMinutes()+":"+u.getSeconds(),l.status="connected",l.color="green",l.type="sensor - timer",l.settings="/",l.error_measure="/",l.measure_type="time"}else if(r.includes("BUTTON")){var d=s(i);l.status=d.status,l.color=d.color,l.measure=d.measure,l.type="sensor - button",l.settings="/",l.error_measure="/",l.measure_type="status",l.max_measure="last time on",l.max_measure_time=n.max_measure_time,l.min_measure="last time off",l.min_measure_time=n.min_measure_time}else if(r.includes("PHOTOCELL")||r.includes("SOILMOISTURE")){var p=s(i);l.status=p.status,l.color=p.color,l.measure=p.measure,l.type=r.includes("PHOTOCELL")?"sensor - photocell":"sensor - soil moisture",l.settings="/",l.error_measure="/",l.measure_type=r.includes("PHOTOCELL")?"luminosity":"soil moisture",l.measure_unit="%",l.max_measure="max: "+a(r,n.max_measure,o,c)+"%",l.max_measure_time=n.max_measure_time,l.min_measure="min: "+a(r,n.min_measure,o,c)+"%",l.min_measure_time=n.min_measure_time}else if(r.includes("AMMETER")){var h=s(i);l.status=h.status,l.color=h.color,l.measure=h.measure,l.type="sensor - ammeter",l.settings=o,l.error_measure="/",l.measure_type="electric power",l.measure_settings="W",l.measure_unit="W",l.max_measure="max: "+a(r,n.max_measure,o,c)+"W",l.max_measure_time=n.max_measure_time,l.min_measure="min: "+a(r,n.min_measure,o,c)+"W",l.min_measure_time=n.min_measure_time}else if(r.includes("WATERLEVEL")){var m=s(i);l.status=m.status,l.color=m.color,l.measure=m.measure,l.type="sensor - water level",l.settings=o,l.error_measure=c,l.measure_type="water level",l.measure_settings="cm",l.measure_unit="%",l.max_measure="max: "+a(r,n.min_measure,o,c)+"%",l.max_measure_time=n.max_measure_time,l.min_measure="min: "+a(r,n.max_measure,o,c)+"%",l.min_measure_time=n.min_measure_time}return l}(t,n):"relative_measure"===e?function(e,t){var n=e[t].id,s=e[t].absolute_measure,r=e[t].setting,i=e[t].error,o={measure:s};return o.measure=a(n,s,r,i),o}(t,n):void 0}var at=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).checkDeviceNameFunction=function(e,t){var n=!1;return e.some((function(e){return e.name===t}))&&(n=!0),s.setState({checkDeviceName:n},(function(){s.render()})),n},s.state={checkDeviceName:!1},s}return Object(m.a)(n,[{key:"render",value:function(){if(""!==this.props.antecedentId&&this.props.deviceAntecedentPopUp){var e=this.props.antecedentIdx,t=function(e){var t=e.antecedentIdx,n=e.antecedents[t].rules;if(n.length>0){var s=n.map((function(t){var n=t.id,s=t.name;return Object(A.jsxs)("div",{children:[Object(A.jsx)(_.a,{button:!0,onClick:function(){e.setNewRule(n,s),e.ruleRoute()},children:Object(A.jsx)(B.a,{primary:s})},n),Object(A.jsx)(L.a,{})]},n)}));return Object(A.jsx)(k.a,{component:"div","aria-label":"main mailbox folders",children:s})}return Object(A.jsxs)(k.a,{component:"div","aria-label":"main mailbox folders",children:[Object(A.jsx)(_.a,{children:Object(A.jsx)(B.a,{primary:"no rules setted"})}),Object(A.jsx)(L.a,{})]})}(this.props);return Object(A.jsx)(it,{antecedentIdx:this.props.antecedentIdx,antecedentId:this.props.antecedentId,antecedentName:this.props.antecedentName,antecedents:this.props.antecedents,index:e,rulesName:t,modifyAntecedentName:this.props.modifyAntecedentName,modifyAntecedentSetting:this.props.modifyAntecedentSetting,modifyAntecedentSettingError:this.props.modifyAntecedentSettingError,modifyDevice:this.props.modifyDevice,checkDeviceNameFunction:this.checkDeviceNameFunction,checkDeviceName:this.state.checkDeviceName,updateDeviceRequest:this.props.updateDeviceRequest,handleModifyDevice:this.props.handleModifyDevice,handleDeviceAntecedentPopUp:this.props.handleDeviceAntecedentPopUp,deleteDeviceRequest:this.props.deleteDeviceRequest,getAntecedentById:this.props.getAntecedentById})}return Object(A.jsx)(rt,{})}}]),n}(u.a.Component);var rt=S.a.div(Pe||(Pe=Object(x.a)(["\nwidth: 100%;\nheight: 100%;\ndisplay: flex;\nflex-flow: column;\ntext-align: center;\nmax-height:100%;\noverflow-y: auto;\nbackground-color: #d9d9d9;\n"])));function it(e){var t=st("view",e.antecedents,e.antecedentIdx),n=t.measure,s=(t.status,t.type),a=t.settings,r=t.error_measure,i=t.color,o=t.measure_type,c=t.measure_settings,u=t.measure_unit;"/"!==a&&(a=e.modifyDevice?function(e){var t=e.antecedentIdx,n=function(t){e.updateDeviceRequest("antecedent"),e.handleModifyDevice(),t.preventDefault()};return Object(A.jsx)("form",{style:{display:"inline"},name:"ItemSetting",onSubmit:n,children:Object(A.jsx)("input",{className:"DeviceDetailCell",type:"number",id:"max_measure",name:"max_measure",defaultValue:e.antecedents[t].setting,onChange:function(t){var n=t.target.value;e.modifyAntecedentSetting(n)}})})}(e):a),"/"!==r&&(r=e.modifyDevice?function(e){var t=e.antecedentIdx,n=function(t){e.updateDeviceRequest("antecedent"),e.handleModifyDevice(),t.preventDefault()};return Object(A.jsx)("form",{style:{display:"inline"},name:"ItemSetting",onSubmit:n,children:Object(A.jsx)("input",{className:"DeviceDetailCell",type:"number",id:"error_setting",name:"error_setting",defaultValue:e.antecedents[t].error,onChange:function(t){var n=t.target.value;e.modifyAntecedentSettingError(n)}})})}(e):r);var d=Object(l.useState)(!1),p=Object(Te.a)(d,2),h=p[0],m=p[1];return Object(A.jsxs)("div",{className:"DeviceContentDetail",children:[Object(A.jsxs)(pt,{children:[Object(A.jsx)("p",{style:{display:e.checkDeviceName?"block":"none"},children:" Error: device name already exist! Choose another name."}),Object(A.jsxs)("h1",{children:[" ",Object(A.jsx)(Fe.a,{style:{color:i}})," ",e.antecedentName," "]}),Object(A.jsxs)(nt.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(A.jsx)(Ue.a,{style:{display:e.modifyDevice&&!e.antecedentId.includes("timer")?"":"none"},onClick:function(){e.handleModifyDevice(),e.handleDeviceAntecedentPopUp(!1),e.deleteDeviceRequest("antecedent")},children:Object(A.jsx)($e.a,{fontSize:"large",style:{color:"red"}})}),Object(A.jsx)(Ue.a,{onClick:function(){e.getAntecedentById(e.antecedentId)},children:Object(A.jsx)(Xe.a,{fontSize:"large",style:{color:"black"}})}),Object(A.jsx)(Ue.a,{onClick:function(){e.modifyDevice?(e.updateDeviceRequest("antecedent"),e.handleModifyDevice()):e.handleModifyDevice()},children:e.modifyDevice?Object(A.jsx)(tt.a,{fontSize:"large",style:{color:"black"}}):Object(A.jsx)(Ke.a,{fontSize:"large",style:{color:"black"}})})]})]}),Object(A.jsxs)(ht,{children:[Object(A.jsxs)("ul",{children:[Object(A.jsxs)("li",{children:["Name: ",e.modifyDevice?ft(e):e.antecedentName]},"name"),Object(A.jsx)("li",{children:s},"type"),Object(A.jsxs)("li",{children:["Id: ",e.antecedentId]},"id")]}),Object(A.jsxs)(mt,{children:[Object(A.jsx)("h3",{children:o}),Object(A.jsxs)("h1",{children:[n," ",u]}),Object(A.jsxs)("p",{style:{margin:0,display:""===t.max_measure?"none":""},children:[t.max_measure," (",t.max_measure_time,")"]}),Object(A.jsxs)("p",{style:{display:""===t.min_measure?"none":""},children:[t.min_measure," (",t.min_measure_time,")"]}),Object(A.jsx)(jt,{style:{display:"/"===a?"none":""},children:Object(A.jsxs)("ul",{children:[Object(A.jsxs)("li",{children:["Max measure (",c,"): ",a]},"max"),Object(A.jsxs)("li",{children:["Error measure (",c,"): ",r]},"error")]})})]}),Object(A.jsx)("br",{}),Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{children:Object(A.jsxs)(Ue.a,{onClick:function(){m(!h)},children:["RULES  ",h?Object(A.jsx)(We.a,{}):Object(A.jsx)(Je.a,{})]})},"rules"),Object(A.jsx)(He.a,{in:h,timeout:"auto",unmountOnExit:!0,children:e.rulesName})]})]})]})}var ot,ct,lt,ut,dt,pt=S.a.div(De||(De=Object(x.a)(["\ntext-align: left;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-top: 2%;\ndisplay: flex;\nflex-flow: row;\n"]))),ht=S.a.div(Ee||(Ee=Object(x.a)(["\nborder: solid #d9d9d9 1px;\nheight: 100%;\nborder-radius: 25px;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-bottom: 2%;\ntext-align: left;\npadding: 2%;\nbackground-color: #cccccc;\n"]))),mt=S.a.div(ke||(ke=Object(x.a)(["\nborder: solid black 2px;\nborder-radius: 25px;\nmargin-left: 2%;\nmargin-right: 2%;\npadding: 2%;\ntext-align: center;\nbackground-color: #e6e6e6;\n"]))),jt=S.a.div(_e||(_e=Object(x.a)(["\nmargin-left: 2%;\nmargin-right: 2%;\ntext-align: left;\n"])));function ft(e){return Object(A.jsx)("form",{style:{display:"inline"},name:"ItemName",onSubmit:function(t){e.updateDeviceRequest("antecedent"),e.handleModifyDevice(),t.preventDefault()},children:Object(A.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:e.antecedentName,onChange:function(t){var n=t.target.value;e.checkDeviceNameFunction(e.antecedents,n)||e.modifyAntecedentName(n)}})})}var bt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).AntecedentRulePopUpBody=function(){s.setState({ruleBody:!1,classButtonRuleSelection:"AntecedentRuleSelection"})},s.ConsequentRulePopUpBody=function(){s.setState({ruleBody:!0,classButtonRuleSelection:"ConsequentRuleSelection"})},s.checkRuleNameFunction=function(e,t){var n=!1;return e.some((function(e){return e.name===t}))&&(n=!0),s.setState({checkRuleName:n},(function(){s.render()})),n},s.updateRuleName=function(e){s.setState({updateName:e})},s.state={ruleBody:!1,checkRuleName:!1,updateName:!1,classButtonRuleSelection:"AntecedentRuleSelection"},s}return Object(m.a)(n,[{key:"render",value:function(){return""!==this.props.newRuleId&&this.props.setRulePopUp?Object(A.jsx)(Rt,{checkRuleName:this.state.checkRuleName,modify:this.props.modify,newRuleName:this.props.newRuleName,rules:this.props.rules,modifyRuleName:this.props.modifyRuleName,checkRuleNameFunction:this.checkRuleNameFunction,updateRuleName:this.updateRuleName,newRuleId:this.props.newRuleId,newRuleIdx:this.props.newRuleIdx,ruleBody:this.state.ruleBody,AntecedentRulePopUpBody:this.AntecedentRulePopUpBody,ConsequentRulePopUpBody:this.ConsequentRulePopUpBody,deleteRuleConsequentRequest:this.props.deleteRuleConsequentRequest,deleteRuleAntecedentRequest:this.props.deleteRuleAntecedentRequest,setNewRuleCondition:this.props.setNewRuleCondition,setNewStartValue:this.props.setNewStartValue,setNewStopValue:this.props.setNewStopValue,setNewRuleMeasure:this.props.setNewRuleMeasure,handleAddRuleConsequentPopUp:this.props.handleAddRuleConsequentPopUp,handleAddRuleAntecedentPopUp:this.props.handleAddRuleAntecedentPopUp,setRuleRequest:this.props.setRuleRequest,handleModify:this.props.handleModify,handleSetRulePopUp:this.props.handleSetRulePopUp,deleteRuleRequest:this.props.deleteRuleRequest,getRuleById:this.props.getRuleById,getAntecedents:this.props.getAntecedents,getConsequents:this.props.getConsequents,setRuleConsequentDelay:this.props.setRuleConsequentDelay}):Object(A.jsx)("div",{})}}]),n}(u.a.Component),vt=S.a.div(ot||(ot=Object(x.a)(["\ndisplay: flex;\nflex-flow: row;\ntext-align: left;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-top: 2%;\n"]))),xt=S.a.div(ct||(ct=Object(x.a)(["\nborder: solid #d9d9d9 1px;\nheight: 100%;\nbackground-color: #cccccc;\nborder-radius: 25px;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-bottom: 2%;\ntext-align: left;\npadding: 2%;\ndisplay: flex;\nflex-flow: column;\n"])));function Rt(e){var t=e.rules[e.newRuleIdx],n=t.evaluation;return Object(A.jsxs)("div",{className:"DeviceContentDetail",children:[Object(A.jsxs)(vt,{children:[Object(A.jsxs)("h1",{children:[" ",Object(A.jsx)(Fe.a,{style:{color:"true"===n?"green":"red"}})," ",e.newRuleName," "]}),Object(A.jsx)("p",{style:{display:e.checkRuleName?"block":"none"},children:" Error: rule name already exist! Choose another name."}),Object(A.jsxs)(nt.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(A.jsx)(Ue.a,{style:{display:e.modify?"":"none"},onClick:function(){e.handleModify(!1),e.handleSetRulePopUp(!1),e.AntecedentRulePopUpBody(),e.deleteRuleRequest(e.newRuleId,e.newRuleIdx)},children:Object(A.jsx)($e.a,{fontSize:"large",style:{color:"red"}})}),Object(A.jsx)(Ue.a,{onClick:function(){e.getRuleById(e.newRuleId)},children:Object(A.jsx)(Xe.a,{fontSize:"large",style:{color:"black"}})}),Object(A.jsx)(Ue.a,{onClick:function(){if(e.modify){var t=e.newRuleIdx;e.setRuleRequest(t),e.handleModify(!1)}else e.handleModify(!0)},children:e.modify?Object(A.jsx)(tt.a,{fontSize:"large",style:{color:"black"}}):Object(A.jsx)(Ke.a,{fontSize:"large",style:{color:"black"}})})]})]}),Object(A.jsxs)(xt,{children:[Object(A.jsx)(yt,{children:Object(A.jsxs)("ul",{children:[Object(A.jsxs)("li",{children:["Name: ",e.modify?qt(e):e.newRuleName]},"name"),Object(A.jsxs)("li",{children:["Last time true: ",t.last_true]},"last_true"),Object(A.jsxs)("li",{children:["Last time false:  ",t.last_false]},"last_false")]})}),Object(A.jsxs)(gt,{children:[Object(A.jsxs)("div",{className:"RuleHeaderButtons",children:[Object(A.jsx)(Ue.a,{className:e.ruleBody?"UnclickedRuleBodyButton":"ClickedRuleBodyButton",id:"ruleAntecedentButton",onClick:function(){e.AntecedentRulePopUpBody()},children:"ANTECEDENTS"}),Object(A.jsx)(Ot,{style:{display:e.ruleBody?"none":""},id:"ruleAntecedentButton",onClick:function(){e.handleAddRuleAntecedentPopUp()},children:Object(A.jsx)(Ce.a,{})}),Object(A.jsx)(Ue.a,{className:e.ruleBody?"ClickedRuleBodyButton":"UnclickedRuleBodyButton",id:"ruleConsequentButton",onClick:function(){e.ConsequentRulePopUpBody()},children:"CONSEQUENTS"}),Object(A.jsx)(Ot,{style:{display:e.ruleBody?"":"none"},id:"ruleConsequentButton",onClick:function(){e.handleAddRuleConsequentPopUp()},children:Object(A.jsx)(Ce.a,{})})]}),Object(A.jsx)(wt,{ruleBody:e.ruleBody,rules:e.rules,newRuleId:e.newRuleId,newRuleIdx:e.newRuleIdx,deleteRuleConsequentRequest:e.deleteRuleConsequentRequest,deleteRuleAntecedentRequest:e.deleteRuleAntecedentRequest,modify:e.modify,setNewRuleCondition:e.setNewRuleCondition,setNewStartValue:e.setNewStartValue,setNewStopValue:e.setNewStopValue,setNewRuleMeasure:e.setNewRuleMeasure,handleModify:e.handleModify,setRuleRequest:e.setRuleRequest,setRuleConsequentDelay:e.setRuleConsequentDelay})]})]})]})}var Ot=Object(S.a)(Ue.a)(lt||(lt=Object(x.a)(["\nborder: solid black 2px !important;\nborder-radius: 0px !important;\nbackground-color: #eead4c !important;\n"]))),yt=S.a.div(ut||(ut=Object(x.a)(["\ntext-align: left;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-top: 2%;\ndisplay: flex;\nflex-flow: row;\n"]))),gt=S.a.div(dt||(dt=Object(x.a)(["\nborder: solid black 2px;\nborder-radius: 25px;\nmargint: 2%;\npadding: 2%;\ntext-align: center;\nbackground-color: #e6e6e6;\nwidth: 100%;\nheight: 100%;\n  \n"])));function qt(e){return Object(A.jsx)("form",{style:{display:"inline"},name:"ItemName",onSubmit:function(t){e.setRuleRequest(e.newRuleIdx),e.handleModify(!1),t.preventDefault()},children:Object(A.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:e.newRuleName,onChange:function(t){var n=t.target.value,s=e.checkRuleNameFunction(e.rules,n);e.updateRuleName(!0),s||e.modifyRuleName(n)}})})}function wt(e){return e.ruleBody?Object(A.jsxs)("table",{id:"tableRule",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"ORDER"}),Object(A.jsx)("th",{children:"DELAY"}),Object(A.jsx)("th",{children:"DEVICE"}),Object(A.jsx)("th",{children:"STATUS"}),Object(A.jsx)("th",{children:"MODALITY"}),Object(A.jsx)("th",{children:"IF"}),Object(A.jsx)("th",{children:"ELSE"})]})}),Object(A.jsx)("tbody",{children:Object(A.jsx)(At,{rules:e.rules,newRuleId:e.newRuleId,newRuleIdx:e.newRuleIdx,deleteRuleConsequentRequest:e.deleteRuleConsequentRequest,modify:e.modify,setRuleConsequentDelay:e.setRuleConsequentDelay})})]}):Object(A.jsxs)("table",{id:"tableRule",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"DEVICE"}),Object(A.jsx)("th",{children:"STATUS"}),Object(A.jsx)("th",{children:"MEASURE"}),Object(A.jsx)("th",{children:"VALUE"}),Object(A.jsx)("th",{children:"CONDITION"}),Object(A.jsx)("th",{children:"START"}),Object(A.jsx)("th",{children:"STOP"})]})}),Object(A.jsx)("tbody",{children:Object(A.jsx)(Ut,{rules:e.rules,newRuleId:e.newRuleId,newRuleIdx:e.newRuleIdx,deleteRuleAntecedentRequest:e.deleteRuleAntecedentRequest,modify:e.modify,setNewRuleCondition:e.setNewRuleCondition,setNewStartValue:e.setNewStartValue,setNewStopValue:e.setNewStopValue,setNewRuleMeasure:e.setNewRuleMeasure,handleModify:e.handleModify,setRuleRequest:e.setRuleRequest})})]})}function At(e){var t=e.newRuleIdx,n=e.rules[t].consequent.sort((function(e,t){return parseInt(e.order)>parseInt(t.order)?1:-1})),s=-1;return n.map((function(t){s++;var n=t.measure;t.device_id.includes("alert")&&(n="measure");var a=t.automatic;return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t.order}),Object(A.jsx)("td",{children:e.modify?It(e,s,t.delay):t.delay}),Object(A.jsx)("td",{children:t.name}),Object(A.jsx)("td",{children:"null"===n?"disconnected":"connected"}),Object(A.jsx)("td",{children:"true"===a?"automatic":"manual"}),Object(A.jsx)("td",{children:t.if_value}),Object(A.jsx)("td",{children:t.else_value}),Object(A.jsx)("td",{className:"deleteRuleRow",style:{visibility:e.modify?"visible":"hidden"},children:Object(A.jsx)("button",{onClick:function(){e.deleteRuleConsequentRequest(e.newRuleId,t.device_id)},children:"delete"})})]},s)}))}function Ut(e){var t=e.newRuleIdx,n=e.rules[t].antecedent,s=-1;return n.map((function(t){s++;var n="//";return t.device_id.includes("timer")?n="now":"null"!==t.value&&(n=t.value),Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t.name}),Object(A.jsx)("td",{children:"//"===n?"disconnected":"connected"}),Object(A.jsx)("td",{children:t.measure}),Object(A.jsx)("td",{children:n}),Object(A.jsx)("td",{children:e.modify?Ct(e,s,t.condition,t.device_id):t.condition}),Object(A.jsx)("td",{children:e.modify?St(e,t,s):t.start_value}),Object(A.jsx)("td",{children:e.modify?Nt(e,t,s):t.stop_value}),Object(A.jsx)("td",{className:"deleteRuleRow",style:{visibility:e.modify?"visible":"hidden"},children:Object(A.jsx)("button",{onClick:function(){e.deleteRuleAntecedentRequest(e.newRuleId,t.device_id)},children:"delete"})})]},s)}))}function It(e,t,n){return Object(A.jsx)("form",{name:"consequentDelay",children:Object(A.jsx)("input",{name:"delay",id:"delay",type:"number",min:"0",defaultValue:n,onChange:function(n){var s=n.target.value;s<0&&(s=0),e.setRuleConsequentDelay(e.newRuleIdx,t,s)}})})}function Ct(e,t,n,s){return s.includes("SWITCH")?Object(A.jsx)("form",{name:"ruleCondition",children:Object(A.jsx)("select",{name:"condition",id:"condition",defaultValue:n,onChange:function(n){e.setNewRuleCondition(e.newRuleIdx,t,n.target.value)},children:Object(A.jsx)("option",{value:"delta",children:"delta"})})}):s.includes("WATERLEVEL")?Object(A.jsx)("form",{name:"ruleCondition",children:Object(A.jsxs)("select",{name:"condition",id:"condition",defaultValue:n,onChange:function(n){e.setNewRuleCondition(e.newRuleIdx,t,n.target.value)},children:[Object(A.jsx)("option",{value:">",children:">"}),Object(A.jsx)("option",{value:"<",children:"<"}),Object(A.jsx)("option",{value:"between",children:"between"}),Object(A.jsx)("option",{value:"isteresi",children:"isteresi"})]})}):s.includes("BUTTON")?Object(A.jsx)("form",{name:"ruleCondition",children:Object(A.jsx)("select",{name:"condition",id:"condition",defaultValue:n,onChange:function(n){e.setNewRuleCondition(e.newRuleIdx,t,n.target.value)},children:Object(A.jsx)("option",{value:"=",children:"="})})}):Object(A.jsx)("form",{name:"ruleCondition",children:Object(A.jsxs)("select",{name:"condition",id:"condition",defaultValue:n,onChange:function(n){e.setNewRuleCondition(e.newRuleIdx,t,n.target.value)},children:[Object(A.jsx)("option",{value:">",children:">"}),Object(A.jsx)("option",{value:"<",children:"<"}),Object(A.jsx)("option",{value:"between",children:"between"})]})})}function St(e,t,n){var s=t.start_value,a=t.device_id;return a.includes("timer")||a.includes("SWITCH")?Object(A.jsx)("form",{name:"ruleAntecedentStartValue",children:Object(A.jsx)("input",{id:"time_start",name:"time_start",type:"time",defaultValue:s,onChange:function(t){e.setNewStartValue(e.newRuleIdx,n,t.target.value)}})}):a.includes("BUTTON")?Object(A.jsx)("form",{name:"ruleAntecedentStartValue",children:Object(A.jsxs)("select",{name:"button_status",id:"button_status",defaultValue:s,onChange:function(t){e.setNewStartValue(e.newRuleIdx,n,t.target.value)},children:[Object(A.jsx)("option",{value:"on",children:"ON"}),Object(A.jsx)("option",{value:"off",children:"OFF"})]})}):Object(A.jsx)("form",{name:"ruleAntecedentStartValue",children:Object(A.jsx)("input",{id:"StartValue",name:"StartValue",type:"number",min:"1",max:"100",step:"5",defaultValue:s,onChange:function(t){t.target.value>100?t.target.value=100:t.target.value<0&&(t.target.value=0),e.setNewStartValue(e.newRuleIdx,n,t.target.value)}})})}function Nt(e,t,n){var s=t.device_id;if(s.includes("timer")||s.includes("SWITCH"))return"between"===t.condition||"delta"===t.condition?Object(A.jsx)("form",{name:"ruleAntecedentStopValue",children:Object(A.jsx)("input",{id:"time_stop",name:"time_stop",type:"time",defaultValue:t.stop_value,onChange:function(t){e.setNewStopValue(e.newRuleIdx,n,t.target.value)}})}):Object(A.jsx)("div",{children:t.stop_value});if(s.includes("BUTTON"))return Object(A.jsx)("div",{children:t.stop_value});var a=t.stop_value;return"//"===a?Object(A.jsx)("div",{children:a}):Object(A.jsx)("form",{name:"ruleAntecedentStopValue",children:Object(A.jsx)("input",{id:"StopValue",name:"StopValue",type:"number",min:"0",max:"100",step:"5",defaultValue:a,onChange:function(t){t.target.value>100?t.target.value=100:t.target.value<0&&(t.target.value=0),e.setNewStopValue(e.newRuleIdx,n,t.target.value)}})})}var Pt,Dt,Et,kt,_t,Mt,Bt=n(356),Lt=n(360),Tt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).checkAddEmailFunction=function(e){s.setState({email:e})},s.addNewAlertEmail=function(){if(!s.state.checkAddNewEmail){var e=s.state.email;s.props.modifyEmailRequest(e,s.props.idx),s.handleModifyAlertEmail(!1)}},s.handleModifyAlertEmail=function(e){s.setState({modifyAlertEmail:e},(function(){s.state.modifyAlertEmail&&s.email_init()}))},s.email_init=function(){s.setState({email:s.props.email})},s.key_count=0,s.state={checkAddNewEmail:!1,email:"",modifyAlertEmail:!1},s}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:Object(A.jsx)(Vt,{addNewAlertEmail:this.addNewAlertEmail,email:this.props.email,checkAddEmailFunction:this.checkAddEmailFunction,modifyAlertEmail:this.state.modifyAlertEmail})}),Object(A.jsx)("td",{children:Object(A.jsxs)(nt.a,{variant:"text",color:"default","aria-label":"text primary button group",children:[Object(A.jsx)(Ue.a,{onClick:function(){e.state.modifyAlertEmail||""===e.props.email?e.addNewAlertEmail():e.handleModifyAlertEmail(!0)},children:this.state.modifyAlertEmail||""===this.props.email?Object(A.jsx)(tt.a,{fontSize:"small",style:{color:"black"}}):Object(A.jsx)(Ke.a,{fontSize:"small",style:{color:"black"}})}),Object(A.jsx)(Ue.a,{style:{display:this.state.modifyAlertEmail||""===this.props.email?"":"none"},onClick:function(){e.props.removeAlertEmailRequest(e.props.idx)},children:Object(A.jsx)($e.a,{fontSize:"small",style:{color:"red"}})})]})})]},this.key_count++)}}]),n}(u.a.Component);function Vt(e){return e.modifyAlertEmail||""===e.email?Object(A.jsx)("div",{children:Object(A.jsx)("form",{onSubmit:function(t){e.addNewAlertEmail(),t.preventDefault()},children:Object(A.jsx)("input",{type:"text",id:"email",name:"email",defaultValue:e.email,onChange:function(t){var n=t.target.value;e.checkAddEmailFunction(n)}})})}):Object(A.jsxs)("div",{children:[e.email," "]})}var Ft=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).checkDeviceNameFunction=function(e,t){var n=!1;return e.some((function(e){return e.name===t}))&&(n=!0),s.setState({checkDeviceName:n},(function(){s.render()})),n},s.state={checkDeviceName:!1},s}return Object(m.a)(n,[{key:"render",value:function(){if(""!==this.props.consequentId&&this.props.deviceConsequentPopUp){var e=this.props.consequentIdx,t=function(e){var t=e.consequentIdx,n=e.consequents[t].rules;if(n.length>0){var s=n.map((function(t){var n=t.id,s=t.name;return Object(A.jsxs)("div",{children:[Object(A.jsx)(_.a,{button:!0,onClick:function(){e.setNewRule(n,s),e.ruleRoute(),e.handleSetRulePopUp(!0)},children:Object(A.jsx)(B.a,{primary:s})}),Object(A.jsx)(L.a,{})]},n)}));return Object(A.jsx)(k.a,{component:"div","aria-label":"main mailbox folders",children:s})}return Object(A.jsxs)(k.a,{component:"div","aria-label":"main mailbox folders",children:[Object(A.jsx)(_.a,{children:Object(A.jsx)(B.a,{primary:"no rules setted"})}),Object(A.jsx)(L.a,{})]})}(this.props);return Object(A.jsx)(Wt,{checkDeviceName:this.state.checkDeviceName,modifyDevice:this.props.modifyDevice,consequentName:this.props.consequentName,consequentId:this.props.consequentId,consequents:this.props.consequents,consequentIdx:this.props.consequentIdx,index:e,rulesName:t,setConsequentAutomaticRequest:this.props.setConsequentAutomaticRequest,setConsequentManualMeasureRequest:this.props.setConsequentManualMeasureRequest,removeAlertEmailRequest:this.props.removeAlertEmailRequest,modifyAlertEmail:this.props.modifyAlertEmail,handleModifyAlertEmail:this.props.handleModifyAlertEmail,handleAddAlertEmailPopUp:this.props.handleAddAlertEmailPopUp,checkDeviceNameFunction:this.checkDeviceNameFunction,modifyConsequentName:this.props.modifyConsequentName,updateDeviceRequest:this.props.updateDeviceRequest,handleModifyDevice:this.props.handleModifyDevice,handleDeviceAntecedentPopUp:this.props.handleDeviceAntecedentPopUp,deleteDeviceRequest:this.props.deleteDeviceRequest,getConsequentById:this.props.getConsequentById,addEmailLocal:this.props.addEmailLocal,addNewAlertEmailRequest:this.props.addNewAlertEmailRequest,modifyEmailRequest:this.props.modifyEmailRequest,handleDeviceConsequentPopUp:this.props.handleDeviceConsequentPopUp})}return Object(A.jsx)("div",{children:" "})}}]),n}(u.a.Component);function Ht(e){return Object(A.jsx)("form",{style:{display:"inline"},name:"ItemName",onSubmit:function(t){e.updateDeviceRequest("consequent"),e.handleModifyDevice(),t.preventDefault()},children:Object(A.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:e.consequentName,onChange:function(t){var n=t.target.value;e.checkDeviceNameFunction(e.consequents,n)||e.modifyConsequentName(n)}})})}function zt(e){var t=e.consequents[e.index].measure;if("null"!==t&&"init"!==t){return{measure:t,status:"connected",color:"green"}}if("null"===t){return{measure:"off",status:"disconnected",color:"red"}}return{measure:"init",status:"initialization",color:"yellow"}}function Wt(e){var t=null,n="green";e.consequentId.includes("SWITCH")?(n=zt(e).color,t=function(e){var t=e.consequents[e.index],n=zt(e),s=n.measure,a=(n.status,Object(l.useState)(!1)),r=Object(Te.a)(a,2),i=r[0],o=r[1],c=function(){o(!i)};return Object(A.jsxs)(Jt,{children:[Object(A.jsxs)("ul",{children:[Object(A.jsxs)("li",{children:["Name: ",e.modifyDevice?Ht(e):e.consequentName]}),Object(A.jsx)("li",{children:"consequent - switch"}),Object(A.jsxs)("li",{children:["Id: ",e.consequentId]})]}),Object(A.jsxs)(Yt,{children:[Object(A.jsx)("h1",{children:s}),Object(A.jsxs)("p",{children:["last on (",t.last_on,")"]}),Object(A.jsxs)("p",{children:["last off (",t.last_off,")"]}),Object(A.jsxs)(Xt,{children:[Zt(e),$t(e)]})]}),Object(A.jsx)("br",{}),Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{children:Object(A.jsxs)(Ue.a,{onClick:function(){c()},children:["RULES  ",i?Object(A.jsx)(We.a,{}):Object(A.jsx)(Je.a,{})]})}),Object(A.jsx)(He.a,{in:i,timeout:"auto",unmountOnExit:!0,children:e.rulesName})]})]})}(e)):e.consequentId.includes("alert")&&(t=function(e){var t=Object(l.useState)(!1),n=Object(Te.a)(t,2),s=n[0],a=n[1],r=function(){a(!s)};return Object(A.jsxs)(Jt,{children:[Object(A.jsxs)("ul",{children:[Object(A.jsxs)("li",{children:["Name: ",e.modifyDevice?Ht(e):e.consequentName]},"name"),Object(A.jsx)("li",{children:"consequent - alert email sender"},"type"),Object(A.jsxs)("li",{children:["Id: ",e.consequentId]},"id")]}),Object(A.jsxs)(Yt,{children:[Object(A.jsxs)(Qt,{children:[Object(A.jsx)("h3",{children:" emails "}),Object(A.jsx)(Ue.a,{onClick:function(){e.addNewAlertEmailRequest()},children:Object(A.jsx)(Ce.a,{fontSize:"small",style:{color:"black"}})})]}),Object(A.jsx)(L.a,{}),Object(A.jsx)(Kt,{consequentIdx:e.consequentIdx,consequents:e.consequents,modifyAlertEmail:e.modifyAlertEmail,removeAlertEmailRequest:e.removeAlertEmailRequest,modifyEmailRequest:e.modifyEmailRequest})]}),Object(A.jsx)("br",{}),Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{children:Object(A.jsxs)(Ue.a,{onClick:function(){r()},children:["RULES  ",s?Object(A.jsx)(We.a,{}):Object(A.jsx)(Je.a,{})]})},"rules"),Object(A.jsx)(He.a,{in:s,timeout:"auto",unmountOnExit:!0,children:e.rulesName})]})]})}(e));return Object(A.jsxs)("div",{className:"DeviceContentDetail",children:[Object(A.jsxs)(Gt,{children:[Object(A.jsxs)("h1",{children:[" ",Object(A.jsx)(Fe.a,{style:{color:n}})," ",e.consequentName," "]}),Object(A.jsx)("p",{style:{display:e.checkDeviceName?"block":"none"},children:" Error: device name already exist! Choose another name."}),Object(A.jsxs)(nt.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(A.jsx)(Ue.a,{style:{display:e.modifyDevice&&!e.consequentId.includes("alert")?"":"none"},onClick:function(){e.handleModifyDevice(),e.handleDeviceConsequentPopUp(!1),e.deleteDeviceRequest("consequent")},children:Object(A.jsx)($e.a,{fontSize:"large",style:{color:"red"}})}),Object(A.jsx)(Ue.a,{onClick:function(){e.getConsequentById(e.consequentId)},children:Object(A.jsx)(Xe.a,{fontSize:"large",style:{color:"black"}})}),Object(A.jsx)(Ue.a,{onClick:function(){e.modifyDevice?(e.updateDeviceRequest("consequent"),e.handleModifyDevice()):e.handleModifyDevice()},children:e.modifyDevice?Object(A.jsx)(tt.a,{fontSize:"large",style:{color:"black"}}):Object(A.jsx)(Ke.a,{fontSize:"large",style:{color:"black"}})})]})]}),t]})}var Gt=S.a.div(Pt||(Pt=Object(x.a)(["\ntext-align: left;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-top: 2%;\ndisplay: flex;\nflex-flow: row;\n"]))),Jt=S.a.div(Dt||(Dt=Object(x.a)(["\nborder: solid #d9d9d9 1px;\nheight: 100%;\nborder-radius: 25px;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-bottom: 2%;\ntext-align: left;\npadding: 2%;\nbackground-color: #cccccc;\n"]))),Yt=(S.a.div(Et||(Et=Object(x.a)(["\nheight: 100%;\nwidth: 100%;\n"]))),S.a.div(kt||(kt=Object(x.a)(["\nborder: solid black 2px;\nborder-radius: 25px;\nmargin-left: 2%;\nmargin-right: 2%;\npadding: 2%;\nbackground-color: #a7b4a8;\ntext-align: center;\njustify-content: center;\nbackground-color: #e6e6e6;\n"])))),Xt=S.a.div(_t||(_t=Object(x.a)(["\nmargin-left: 2%;\nmargin-right: 2%;\njustify-content: center;\npadding: 1%;\ndisplay: flex;\nflex-flow: column;\nalign-items: center;\n"]))),Qt=S.a.div(Mt||(Mt=Object(x.a)(["\ntext-align: center;\njustify-content: center;\nmargin-left: 2%;\nmargin-right: 2%;\nmargin-top: 2%;\ndisplay: flex;\nflex-flow: row;\n"])));function Kt(e){var t=e.consequentIdx,n=e.consequents[t].email_list,s=-1;if(n.length>0){var a=n.map((function(t){return s++,Object(A.jsx)(Tt,{email:t,idx:s,consequentIdx:e.consequentIdx,consequents:e.consequents,addNewAlertEmailRequest:e.addNewAlertEmailRequest,removeAlertEmailRequest:e.removeAlertEmailRequest,modifyEmailRequest:e.modifyEmailRequest})}));return Object(A.jsx)("table",{align:"center",children:Object(A.jsx)("tbody",{children:a})})}return Object(A.jsx)("table",{align:"center",children:Object(A.jsx)("tbody",{})})}function Zt(e){var t=!1;return"true"===e.consequents[e.index].automatic&&(t=!0),Object(A.jsx)(Bt.a,{control:Object(A.jsx)(Lt.a,{checked:t,onChange:function(t){e.setConsequentAutomaticRequest(t.target.checked)},value:t,color:"primary"}),label:"automatic"})}function $t(e){var t=e.consequents[e.index],n=t.measure,s=t.automatic;return Object(A.jsx)(Bt.a,{control:Object(A.jsx)(Lt.a,{checked:"on"===n,onChange:function(t){e.setConsequentManualMeasureRequest(t.target.value)},value:"on"===n?"off":"on",color:"primary",disabled:"true"===s}),label:"on"})}var en,tn,nn,sn,an,rn,on,cn=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).state={},s}return Object(m.a)(n,[{key:"render",value:function(){return"sensor"===this.props.routeUrl?Object(A.jsx)(at,{ruleRoute:this.props.ruleRoute,rules:this.props.rules,deviceAntecedentPopUp:this.props.deviceAntecedentPopUp,handleDeviceAntecedentPopUp:this.props.handleDeviceAntecedentPopUp,modifyDevice:this.props.modifyDevice,handleModifyDevice:this.props.handleModifyDevice,antecedents:this.props.antecedents,antecedentId:this.props.antecedentId,antecedentName:this.props.antecedentName,antecedentIdx:this.props.antecedentIdx,setNewAntecedent:this.props.setNewAntecedent,modifyAntecedentSetting:this.props.modifyAntecedentSetting,modifyAntecedentSettingError:this.props.modifyAntecedentSettingError,updateDeviceRequest:this.props.updateDeviceRequest,deleteDeviceRequest:this.props.deleteDeviceRequest,getDeviceMeasureRequest:this.props.getDeviceMeasureRequest,modifyAntecedentName:this.props.modifyAntecedentName,setNewRule:this.props.setNewRule,handleSetRulePopUp:this.props.handleSetRulePopUp,getAntecedentById:this.props.getAntecedentById,getRuleById:this.props.getRuleById}):"switch"===this.props.routeUrl?Object(A.jsx)(Ft,{ruleRoute:this.props.ruleRoute,rules:this.props.rules,consequents:this.props.consequents,consequentId:this.props.consequentId,consequentName:this.props.consequentName,consequentIdx:this.props.consequentIdx,setNewConsequent:this.props.setNewConsequent,handleDeviceConsequentPopUp:this.props.handleDeviceConsequentPopUp,deviceConsequentPopUp:this.props.deviceConsequentPopUp,modifyDevice:this.props.modifyDevice,handleModifyDevice:this.props.handleModifyDevice,updateDeviceRequest:this.props.updateDeviceRequest,deleteDeviceRequest:this.props.deleteDeviceRequest,getDeviceMeasureRequest:this.props.getDeviceMeasureRequest,modifyConsequentName:this.props.modifyConsequentName,setNewRule:this.props.setNewRule,handleSetRulePopUp:this.props.handleSetRulePopUp,setConsequentAutomaticRequest:this.props.setConsequentAutomaticRequest,setConsequentManualMeasureRequest:this.props.setConsequentManualMeasureRequest,removeAlertEmailRequest:this.props.removeAlertEmailRequest,modifyAlertEmail:this.props.modifyAlertEmail,handleModifyAlertEmail:this.props.handleModifyAlertEmail,handleAddAlertEmailPopUp:this.props.handleAddAlertEmailPopUp,getConsequentById:this.props.getConsequentById,getRuleById:this.props.getRuleById,handleDeviceAntecedentPopUp:this.props.handleDeviceAntecedentPopUp,addEmailLocal:this.props.addEmailLocal,addNewAlertEmailRequest:this.props.addNewAlertEmailRequest,modifyEmailRequest:this.props.modifyEmailRequest}):"rule"===this.props.routeUrl?Object(A.jsx)(bt,{setRulePopUp:this.props.setRulePopUp,handleSetRulePopUp:this.props.handleSetRulePopUp,rules:this.props.rules,newRuleIdx:this.props.newRuleIdx,newRuleId:this.props.newRuleId,newRuleName:this.props.newRuleName,deleteRuleConsequentRequest:this.props.deleteRuleConsequentRequest,deleteRuleAntecedentRequest:this.props.deleteRuleAntecedentRequest,handleModify:this.props.handleModify,modify:this.props.modify,setNewRuleCondition:this.props.setNewRuleCondition,setNewStartValue:this.props.setNewStartValue,setNewStopValue:this.props.setNewStopValue,handleAddRuleAntecedentPopUp:this.props.handleAddRuleAntecedentPopUp,handleAddRuleConsequentPopUp:this.props.handleAddRuleConsequentPopUp,setRuleAntecedentRequest:this.props.setRuleAntecedentRequest,setRuleConsequentRequest:this.props.setRuleConsequentRequest,deleteRuleRequest:this.props.deleteRuleRequest,modifyRuleName:this.props.modifyRuleName,updateRuleName:this.props.updateRuleName,setNewRuleMeasure:this.props.setNewRuleMeasure,setRuleRequest:this.props.setRuleRequest,getRuleById:this.props.getRuleById,getAntecedents:this.props.getAntecedents,getConsequents:this.props.getConsequents,setRuleConsequentDelay:this.props.setRuleConsequentDelay,onDragEnd:this.props.onDragEnd}):Object(A.jsx)("div",{})}}]),n}(u.a.Component),ln=n(196),un=n.n(ln),dn=n(197),pn=n.n(dn),hn=n(135),mn=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;Object(h.a)(this,n),(s=t.call(this,e)).getAntecedents=Object(y.a)(O.a.mark((function e(){var t,n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App GET antecedent By User"),"http://93.51.10.117:8081/device/get/antecedents",e.prev=2,e.next=5,q.a.get("http://93.51.10.117:8081/device/get/antecedents");case 5:t=e.sent,n=t.data,(a=s.state.antecedents).length>0?(r=a.map((function(e){return e.id}))).map((function(e){if(r.some((function(t){return t===e.id}))){var t=r.indexOf(e.id);a[t].measure=e.measure}else a.concat(e);return null})):a=n,s.setState({antecedents:a,refreshAntecedents:!1},(function(){s.state.addRuleAntecedentPopUp||(s.setState({routeUrl:"sensor",deviceAntecedentPopUp:!0,deviceConsequentPopUp:!1,setRulePopUp:!1}),""!==s.state.antecedentId&&s.getAntecedentById(s.state.antecedentId))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),s.getConsequents=Object(y.a)(O.a.mark((function e(){var t,n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App GET consequents By User"),"http://93.51.10.117:8081/device/get/consequents",e.prev=2,e.next=5,q.a.get("http://93.51.10.117:8081/device/get/consequents");case 5:t=e.sent,n=t.data,(a=s.state.consequents).length>0?(r=a.map((function(e){return e.id})),n.map((function(e){if(r.some((function(t){return t===e.id}))){var t=r.indexOf(e.id);a[t].measure=e.measure}else a.concat(e);return null}))):a=n,s.setState({consequents:a,refreshConsequents:!1},(function(){s.state.addRuleConsequentPopUp||s.state.addRuleAntecedentPopUp||(s.setState({routeUrl:"switch",deviceAntecedentPopUp:!1,deviceConsequentPopUp:!0,setRulePopUp:!1}),""!==s.state.consequentId&&s.getConsequentById(s.state.consequentId))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),s.getRules=Object(y.a)(O.a.mark((function e(){var t,n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App GET Rules by user"),"http://93.51.10.117:8081/rule/user",e.prev=2,e.next=5,q.a.get("http://93.51.10.117:8081/rule/user");case 5:t=e.sent,n=t.data,(a=s.state.rules).length>0?(r=a.map((function(e){return e.id})),n.map((function(e){if(r.some((function(t){return t===e.id}))){var t=r.indexOf(e.id);a[t].evaluation=e.evaluation}else a.concat(e);return null}))):a=n,s.setState({rules:a,refreshRules:!1},(function(){""!==s.state.newRuleId?s.getRuleById(s.state.newRuleId):s.setState({routeUrl:"rule",deviceAntecedentPopUp:!1,deviceConsequentPopUp:!1,setRulePopUp:!0})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),s.getAntecedentById=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App GET antecedent By Id"),n="http://93.51.10.117:8081/device/antecedent/id/"+t,e.prev=2,e.next=5,q.a.get(n);case 5:a=e.sent,r=a.data,console.log(r),i=s.state.antecedentIdx,(o=s.state.antecedents)[i]=r,s.setState({antecedents:o},(function(){s.setState({routeUrl:"sensor",deviceAntecedentPopUp:!0,deviceConsequentPopUp:!1,setRulePopUp:!1})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),s.getConsequentById=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App GET consequent By Id"),n="http://93.51.10.117:8081/device/consequent/id/"+t,e.prev=2,e.next=5,q.a.get(n);case 5:a=e.sent,r=a.data,i=s.state.consequents,o=s.state.consequentIdx,i[o]=r,s.setState({consequents:i},(function(){s.setState({routeUrl:"switch",deviceAntecedentPopUp:!1,deviceConsequentPopUp:!0,setRulePopUp:!1})})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),s.getRuleById=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App GET Rule By ID"),n="http://93.51.10.117:8081/rule/id/"+t,e.prev=2,e.next=5,q.a.get(n);case 5:a=e.sent,r=a.data,console.log(r),i=s.state.rules,o=s.state.newRuleIdx,i[o]=r,s.setState({rules:i},(function(){s.setState({routeUrl:"rule",deviceAntecedentPopUp:!1,deviceConsequentPopUp:!1,setRulePopUp:!0})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),s.getDeviceMeasureRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o,c,l,u,d,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("App GET device measure"),"antecedent"!==t){e.next=19;break}return n="http://93.51.10.117:8081/device/measure/"+s.state.antecedentId,e.prev=3,e.next=6,q.a.get(n);case 6:a=e.sent,r=a.data,i=s.state.antecedentIdx,(o=s.state.antecedents)[i].measure=r,s.setState({antecedents:o},(function(){s.render()})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.warn(e.t0);case 17:e.next=34;break;case 19:return c="http://93.51.10.117:8081/device/measure/"+s.state.consequentId,e.prev=20,e.next=23,q.a.get(c);case 23:l=e.sent,u=l.data,d=s.state.consequentIdx,(p=s.state.consequents)[d].measure=u,s.setState({consequents:p},(function(){s.render()})),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(20),console.warn(e.t1);case 34:case"end":return e.stop()}}),e,null,[[3,14],[20,31]])})));return function(t){return e.apply(this,arguments)}}(),s.createRuleRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o,c,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST create rule"),n="http://93.51.10.117:8081/rule/create/"+t,e.prev=2,e.next=5,q.a.post(n);case 5:a=e.sent,r=a.data,console.log("response rule id: ",r),i={id:r,name:t,antecedent:[],consequent:[],evaluation:"false"},o=s.state.rules,c=o.length,l=o.concat([i]),s.setState({rules:l,newRuleIdx:c,newRuleId:r,newRuleName:t},(function(){s.handleModify(!0),s.ruleRoute(),s.handleAddRulePopUp(),s.handleSetRulePopUp(!0)})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.warn(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),s.setRuleRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST set new rule"),n=s.state.rules[t],a=JSON.stringify(n),"http://93.51.10.117:8081/rule/set",e.prev=4,e.next=7,q.a.post("http://93.51.10.117:8081/rule/set",{rule_json:a});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),s.setRuleAntecedentRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST new rule antecedent"),"http://93.51.10.117:8081/rule/set/antecedent",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/rule/set/antecedent",{},{params:{rule_id:s.state.newRuleId,device_id:t.device_id,start_value:t.start_value,stop_value:t.stop_value,condition:t.condition,measure:t.measure}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),s.setRuleConsequentRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST new rule consequent"),"http://93.51.10.117:8081/rule/set/consequent",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/rule/set/consequent",{},{params:{rule_id:s.state.newRuleId,device_id:t.device_id}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),s.updateDeviceRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST update device"),n="",a="",r=0,i=0,"antecedent"===t?(o=s.state.antecedentIdx,n=s.state.antecedentId,a=s.state.antecedentName,r=s.state.antecedents[o].setting,i=s.state.antecedents[o].error):(n=s.state.consequentId,a=s.state.consequentName,r="",i=""),"http://93.51.10.117:8081/device/update",e.prev=7,e.next=10,q.a.post("http://93.51.10.117:8081/device/update",{},{params:{device_id:n,device_name:a,setting:r,error:i}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),s.registerDeviceRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST register device"),"http://93.51.10.117:8081/device/register",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/device/register",{},{params:{device_id:n.id,device_name:n.name}});case 5:s.registerNewDeviceLocal(t,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),s.registerNewDeviceLocal=function(e,t){if("antecedent"===e){var n=s.state.antecedents,a=n.length;s.setState({antecedents:n.concat([t]),antecedentId:t.id,antecedentName:t.name,antecedentIdx:a,modifyDevice:!0},(function(){s.sensorRoute(),s.handleDeviceAntecedentPopUp(!0)}))}else{var r=s.state.consequents,i=r.length;s.setState({consequents:r.concat([t]),consequentId:t.id,consequentName:t.name,consequentIdx:i,modifyDevice:!0},(function(){s.switchRoute(),s.handleDeviceConsequentPopUp(!0)}))}},s.updateRuleName=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST update rule name"),"http://93.51.10.117:8081/rule/set/name",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/rule/set/name",{},{params:{rule_id:s.state.newRuleId,rule_name:s.state.newRuleName}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),s.setConsequentAutomaticRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST consequent automatic"),"http://93.51.10.117:8081/device/consequent/automatic",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/device/consequent/automatic",{},{params:{device_id:s.state.consequentId,automatic:t}});case 5:n=e.sent,a=n.data,r=s.state.consequents,i=s.state.consequentIdx,r[i]=a,s.setState({consequents:r},(function(){s.render()})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),s.setConsequentManualMeasureRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App POST consequent manual measure"),"http://93.51.10.117:8081/device/consequent/manual",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/device/consequent/manual",{},{params:{device_id:s.state.consequentId,manual_measure:t}});case 5:n=s.state.consequents,a=s.state.consequentIdx,n[a].manual_measure=t,n[a].measure=t,s.setState({consequents:n},(function(){s.render()})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),s.modifyEmailRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n){var a,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App ADD email alert"),a="http://93.51.10.117:8081/device/alert/modify/"+t+"/"+n,e.prev=2,e.next=5,q.a.post(a);case 5:r=s.state.consequentIdx,(i=s.state.consequents)[r].email_list[n]=t,s.setState({consequents:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),s.addNewAlertEmailRequest=Object(y.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App ADD email alert"),"http://93.51.10.117:8081/device/alert/add/",e.prev=2,e.next=5,q.a.post("http://93.51.10.117:8081/device/alert/add/");case 5:s.addEmailLocal(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),s.deleteRuleRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App DELETE rule"),a="http://93.51.10.117:8081/rule/delete/"+t,e.prev=2,e.next=5,q.a.delete(a);case 5:(r=s.state.rules).splice(n,1),s.setState({rules:r,newRuleIdx:0,newRuleName:"",newRuleId:"",setRulePopUp:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.warn(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),s.deleteRuleConsequentRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App DELETE rule consequent"),a="http://93.51.10.117:8081/rule/delete/consequent/"+t+"/"+n,e.prev=2,e.next=5,q.a.delete(a);case 5:s.deleteRuleConsequentLocal(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),s.deleteRuleConsequentLocal=function(e){var t=s.state.rules,n=s.state.newRuleIdx,a=t[n].consequent,r=a.map((function(e){return e.device_id})).indexOf(e),i=0,o=a.map((function(e){return i>r&&(e.order=(parseInt(e.order)-1).toString()),i++,e}));o.splice(r,1),console.log(o),t[n].consequent=o,s.setState({rules:t})},s.deleteRuleAntecedentRequest=function(){var e=Object(y.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App DELETE rule antecedent"),a="http://93.51.10.117:8081/rule/delete/antecedent/"+t+"/"+n,e.prev=2,e.next=5,q.a.delete(a);case 5:s.deleteRuleAntecedentLocal(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),s.deleteRuleAntecedentLocal=function(e){var t=s.state.rules,n=s.state.newRuleIdx,a=t[n].antecedent.map((function(e){return e.device_id})).indexOf(e);t[n].antecedent.splice(a,1),s.setState({rules:t})},s.deleteDeviceRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r,i,o,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("App DELETE device"),"antecedent"!==t){e.next=17;break}return n="http://93.51.10.117:8081/device/delete/"+s.state.antecedentId,a=s.state.antecedents,r=s.state.antecedentIdx,a.splice(r,1),e.prev=6,e.next=9,q.a.delete(n);case 9:s.setState({antecedentIdx:0,antecedents:a,deviceAntecedentPopUp:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.warn(e.t0);case 15:e.next=31;break;case 17:return console.log(s.state.consequentId),i="http://93.51.10.117:8081/device/delete/"+s.state.consequentId,o=s.state.consequentIdx,(c=s.state.consequents).splice(o,1),e.prev=22,e.next=25,q.a.delete(i);case 25:s.setState({consequentIdx:0,consequents:c}),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(22),console.warn(e.t1);case 31:case"end":return e.stop()}}),e,null,[[6,12],[22,28]])})));return function(t){return e.apply(this,arguments)}}(),s.removeAlertEmailRequest=function(){var e=Object(y.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("App DELETE email alert"),n="http://93.51.10.117:8081/device/alert/delete/"+t,e.prev=2,e.next=5,q.a.delete(n);case 5:a=s.state.consequentIdx,(r=s.state.consequents)[a].email_list.splice(t,1),console.log(r[a]),s.setState({consequents:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.warn(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),s.modifyRuleName=function(e){var t=s.state.rules;t[s.state.newRuleIdx].name=e,s.setState({rules:t,newRuleName:e},(function(){s.render()}))},s.setConsequentRuleLocal=function(e,t){var n=s.state.rules;n[e].consequent.push(t),s.setState({rules:n},(function(){s.handleAddRuleConsequentPopUp(),s.handleSetRulePopUp(!0)}))},s.setAntecedentRuleLocal=function(e,t){var n=s.state.rules;n[e].antecedent.push(t),s.setState({rules:n},(function(){s.handleAddRuleAntecedentPopUp(),s.handleSetRulePopUp(!0)}))},s.setNewRuleCondition=function(e,t,n){var a=s.state.rules;a[e].antecedent[t].condition=n,a[e].antecedent[t].stop_value="between"===n||"isteresi"===n?a[e].antecedent[t].start_value:"//",s.setState({rules:a})},s.setNewStartValue=function(e,t,n){var a=s.state.rules;a[e].antecedent[t].start_value=n,s.setState({rules:a})},s.setNewStopValue=function(e,t,n){var a=s.state.rules;a[e].antecedent[t].stop_value=n,s.setState({rules:a})},s.setNewRuleMeasure=function(e,t,n){var a=s.state.rules;a[e].antecedent[t].measure=n,"now"===n?(a[e].antecedent[t].condition="between",a[e].antecedent[t].stop_value=a[e].antecedent[t].start_value):(a[e].antecedent[t].condition="delta",a[e].antecedent[t].stop_value="//"),s.setState({rules:a})},s.setRuleConsequentDelay=function(e,t,n){var a=s.state.rules;a[e].consequent[t].delay=n,s.setState({rules:a})},s.onDragEnd=function(e){var t=e.destination,n=e.source;e.reason;if(t.droppableId!==n.droppableId||t.index!==n.index){var a=s.state.newRuleIdx,r=s.state.rules,i=r[a].consequent,o=i[n.index],c=i.map((function(e){var s=parseInt(e.order);return s>=n.index&&s<t.index?(s-=1,e.order=s.toString()):s>=t.index&&(s+=1,e.order=s.toString()),e}));c.splice(n.index,1),o.order=t.index.toString(),c.splice(t.index,0,o),r[a].consequent=c,s.setState({rules:r})}},s.modifyAntecedentSetting=function(e){var t=s.state.antecedents;t[s.state.antecedentIdx].setting=e,s.setState({antecendents:t},(function(){var e=s.state.antecedents,t=s.state.antecedentIdx,n=st("relative_measure",s.state.antecedents,s.state.antecedentIdx);e[t].measure=n.measure,s.setState({antecedents:e})}))},s.modifyAntecedentSettingError=function(e){var t=s.state.antecedents;t[s.state.antecedentIdx].error=e,s.setState({antecendents:t},(function(){var e=s.state.antecedents,t=s.state.antecedentIdx,n=st("relative_measure",s.state.antecedents,s.state.antecedentIdx);e[t].measure=n.measure,s.setState({antecedents:e})}))},s.modifyAntecedentName=function(e){var t=s.state.antecedents;t[s.state.antecedentIdx].name=e,s.setState({antecendents:t,antecedentName:e})},s.modifyConsequentName=function(e){var t=s.state.consequents;t[s.state.consequentIdx].name=e,s.setState({consequents:t,consequentName:e})},s.addEmailLocal=function(){var e=s.state.consequentIdx,t=s.state.consequents;t[e].email_list.push(""),s.setState({consequents:t},(function(){s.handleModifyAlertEmail(!0)}))},s.setNewRule=function(e,t){var n=s.state.rules.map((function(e){return e.id})).indexOf(e);s.setState({newRuleIdx:n,newRuleId:e,newRuleName:t})},s.setNewAntecedent=function(e,t,n){s.setState({antecedentId:e,antecedentName:t,antecedentIdx:n})},s.setNewConsequent=function(e,t,n){s.setState({consequentId:e,consequentName:t,consequentIdx:n})},s.handleMenuPopUp=function(e){s.setState({menuPopUp:!s.state.menuPopUp,anchorEl:e.currentTarget})},s.handleAddRulePopUp=function(){s.setState({AddRulePopUp:!s.state.AddRulePopUp})},s.handleModify=function(e){s.setState({modify:e})},s.handleModifyDevice=function(){s.setState({modifyDevice:!s.state.modifyDevice})},s.handleAddRuleAntecedentPopUp=function(){s.setState({addRuleAntecedentPopUp:!s.state.addRuleAntecedentPopUp},(function(){s.state.addRuleAntecedentPopUp&&s.getAntecedents()}))},s.handleAddRuleConsequentPopUp=function(){s.setState({addRuleConsequentPopUp:!s.state.addRuleConsequentPopUp},(function(){s.state.addRuleConsequentPopUp&&s.getConsequents()}))},s.handleRegisterDevicePopUp=function(){s.setState({registerDevicePopUp:!s.state.registerDevicePopUp})},s.handleDeviceAntecedentPopUp=function(e){s.setState({deviceAntecedentPopUp:e})},s.handleDeviceConsequentPopUp=function(e){s.setState({deviceConsequentPopUp:e})},s.handleSetRulePopUp=function(e){s.setState({setRulePopUp:e})},s.handleLogOut=function(){s.setState({logout:!0},(function(){s.render()}))},s.handleAddAlertEmailPopUp=function(){s.setState({addAlertEmailPopUp:!s.state.addAlertEmailPopUp})},s.handleModifyAlertEmail=function(e){s.setState({modifyAlertEmail:e})},s.handleRefreshAntecedents=function(e){s.setState({refreshAntecedents:e})},s.handleRefreshConsequents=function(e){s.setState({refreshConsequents:e})},s.handleRefreshRules=function(e){s.setState({refreshRules:e})},s.AntecedentRulePopUpBody=function(){s.setState({ruleBody:!1,classButtonRuleSelection:"AntecedentRuleSelection"})},s.ConsequentRulePopUpBody=function(){s.setState({ruleBody:!0,classButtonRuleSelection:"ConsequentRuleSelection"})},s.handleServerErrorPopUp=function(){s.setState({server_error:!s.state.server_error})},s.sensorRoute=function(){console.log("sensor route"),"sensor"!==s.state.routeUrl&&s.getAntecedents()},s.ruleRoute=function(){console.log("rule route"),"rule"!==s.state.routeUrl&&s.getRules()},s.switchRoute=function(){console.log("switch route"),"switch"!==s.state.routeUrl&&s.getConsequents()};var a=hn.decode(s.props.idToken,"secret"),r=hn.encode({uid:a.uid},"secret");return q.a.defaults.headers.common.Authorization=r,q.a.defaults.timeout.toFixed(0),s.state={email:a.email,password:a.password,name:a.name,surname:a.surname,menuPopUp:!1,anchorEl:void 0,AddRulePopUp:!1,setRulePopUp:!1,addRuleAntecedentPopUp:!1,addRuleConsequentPopUp:!1,registerDevicePopUp:!1,addAlertEmailPopUp:!1,modifyAlertEmail:!1,newRuleId:"",newRuleIdx:0,newRuleName:"",modify:!1,deviceAntecedentPopUp:!1,antecedentId:"",antecedentName:"",antecedentIdx:0,deviceConsequentPopUp:!1,consequentId:"",consequentName:"",consequentIdx:0,modifyDevice:!1,antecedents:[],consequents:[],rules:[],allDeviceId:[],logout:!1,routeUrl:"sensor",refreshAntecedents:!0,refreshConsequents:!0,refreshRules:!0,ruleBody:!1,classButtonRuleSelection:"AntecedentRuleSelection",server_error:!1},s}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.getAntecedents()}},{key:"render",value:function(){var e=this;return this.state.logout?Object(A.jsx)(v.a,{to:"/"}):Object(A.jsxs)(bn,{children:[Object(A.jsxs)(vn,{children:[Object(A.jsx)(xn,{children:"YOURULE"}),Object(A.jsx)(Rn,{onClick:function(t){e.handleMenuPopUp(t)},children:Object(A.jsx)(E.a,{fontSize:"large",style:{color:"white"}})}),Object(A.jsxs)(fn,{placement:"bottom-end",id:"menu-popper",open:this.state.menuPopUp,anchorEl:this.state.anchorEl,children:[Object(A.jsxs)(k.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(A.jsxs)(_.a,{button:!0,children:[Object(A.jsx)(M.a,{children:Object(A.jsx)(un.a,{fontSize:"small",style:{color:"white"}})}),Object(A.jsx)(B.a,{primary:"profile"})]}),Object(A.jsx)(L.a,{style:{color:"white !important"}}),Object(A.jsxs)(_.a,{button:!0,onClick:function(){e.handleLogOut()},children:[Object(A.jsx)(M.a,{children:Object(A.jsx)(pn.a,{fontSize:"small",style:{color:"white"}})}),Object(A.jsx)(B.a,{primary:"logout"})]})]}),Object(A.jsx)(L.a,{})]}),Object(A.jsx)(jn,{server_error:this.state.server_error,handleServerErrorPopUp:this.handleServerErrorPopUp,sensorRoute:this.sensorRoute}),Object(A.jsx)(Z,{AddRulePopUp:this.state.AddRulePopUp,rules:this.state.rules,base_url:"http://93.51.10.117:8081",handleAddRulePopUp:this.handleAddRulePopUp,createRuleRequest:this.createRuleRequest,ruleRoute:this.ruleRoute,handleModify:this.handleModify}),Object(A.jsx)($,{addRuleConsequentPopUp:this.state.addRuleConsequentPopUp,handleSetRulePopUp:this.handleSetRulePopUp,handleAddRuleConsequentPopUp:this.handleAddRuleConsequentPopUp,newRuleIdx:this.state.newRuleIdx,rules:this.state.rules,consequents:this.state.consequents,setConsequentRuleLocal:this.setConsequentRuleLocal,handleModify:this.handleModify}),Object(A.jsx)(te,{addRuleAntecedentPopUp:this.state.addRuleAntecedentPopUp,handleSetRulePopUp:this.handleSetRulePopUp,handleAddRuleAntecedentPopUp:this.handleAddRuleAntecedentPopUp,newRuleIdx:this.state.newRuleIdx,rules:this.state.rules,antecedents:this.state.antecedents,consequents:this.state.consequents,setAntecedentRuleLocal:this.setAntecedentRuleLocal,handleModify:this.handleModify}),Object(A.jsx)(ie,{registerDevicePopUp:this.state.registerDevicePopUp,handleRegisterDevicePopUp:this.handleRegisterDevicePopUp,registerDeviceRequest:this.registerDeviceRequest,allDeviceId:this.state.allDeviceId})]}),Object(A.jsx)("div",{className:"TopBar2",children:Object(A.jsxs)(nt.a,{variant:"text",color:"default","aria-label":"text primary button group",children:[Object(A.jsx)(Ue.a,{style:{color:"#bfbfbf"},className:"sensor"===this.state.routeUrl?"ButtonClicked":"",onClick:function(){e.sensorRoute()},children:"SENSORS"}),Object(A.jsx)(Ue.a,{style:{color:"#bfbfbf"},className:"rule"===this.state.routeUrl?"ButtonClicked":"",onClick:function(){e.ruleRoute()},children:"RULES"}),Object(A.jsx)(Ue.a,{style:{color:"#bfbfbf"},className:"switch"===this.state.routeUrl?"ButtonClicked":"",onClick:function(){e.switchRoute()},children:"SWITCHES"})]})}),Object(A.jsxs)(On,{children:[Object(A.jsx)(Se,{routeUrl:this.state.routeUrl,antecedents:this.state.antecedents,handleDeviceAntecedentPopUp:this.handleDeviceAntecedentPopUp,setNewAntecedent:this.setNewAntecedent,getAntecedentById:this.getAntecedentById,handleSetRulePopUp:this.handleSetRulePopUp,rules:this.state.rules,setNewRule:this.setNewRule,getRuleById:this.getRuleById,consequents:this.state.consequents,handleDeviceConsequentPopUp:this.handleDeviceConsequentPopUp,setNewConsequent:this.setNewConsequent,getConsequentById:this.getConsequentById,antecedentId:this.state.antecedentId,consequentId:this.state.consequentId,newRuleId:this.state.newRuleId,sensorRoute:this.sensorRoute,ruleRoute:this.ruleRoute,switchRoute:this.switchRoute,modifyDevice:this.state.modifyDevice,updateDeviceRequest:this.updateDeviceRequest,handleModifyDevice:this.handleModifyDevice,deleteDeviceRequest:this.deleteDeviceRequest,handleRegisterDevicePopUp:this.handleRegisterDevicePopUp,handleAddRulePopUp:this.handleAddRulePopUp,modify:this.state.modify,handleModify:this.handleModify,AntecedentRulePopUpBody:this.AntecedentRulePopUpBody,deleteRuleRequest:this.deleteRuleRequest,newRuleIdx:this.state.newRuleIdx,setRuleRequest:this.setRuleRequest}),Object(A.jsx)(yn,{children:Object(A.jsx)(cn,{routeUrl:this.state.routeUrl,ruleRoute:this.ruleRoute,rules:this.state.rules,deviceAntecedentPopUp:this.state.deviceAntecedentPopUp,handleDeviceAntecedentPopUp:this.handleDeviceAntecedentPopUp,modifyDevice:this.state.modifyDevice,handleModifyDevice:this.handleModifyDevice,antecedents:this.state.antecedents,antecedentId:this.state.antecedentId,antecedentName:this.state.antecedentName,antecedentIdx:this.state.antecedentIdx,setNewAntecedent:this.setNewAntecedent,modifyAntecedentSetting:this.modifyAntecedentSetting,modifyAntecedentSettingError:this.modifyAntecedentSettingError,updateDeviceRequest:this.updateDeviceRequest,deleteDeviceRequest:this.deleteDeviceRequest,getDeviceMeasureRequest:this.getDeviceMeasureRequest,modifyAntecedentName:this.modifyAntecedentName,setNewRule:this.setNewRule,handleSetRulePopUp:this.handleSetRulePopUp,setRulePopUp:this.state.setRulePopUp,newRuleIdx:this.state.newRuleIdx,newRuleId:this.state.newRuleId,newRuleName:this.state.newRuleName,deleteRuleConsequentRequest:this.deleteRuleConsequentRequest,deleteRuleAntecedentRequest:this.deleteRuleAntecedentRequest,handleModify:this.handleModify,modify:this.state.modify,setNewRuleCondition:this.setNewRuleCondition,setNewStartValue:this.setNewStartValue,setNewStopValue:this.setNewStopValue,handleAddRuleAntecedentPopUp:this.handleAddRuleAntecedentPopUp,handleAddRuleConsequentPopUp:this.handleAddRuleConsequentPopUp,setRuleAntecedentRequest:this.setRuleAntecedentRequest,setRuleConsequentRequest:this.setRuleConsequentRequest,deleteRuleRequest:this.deleteRuleRequest,modifyRuleName:this.modifyRuleName,updateRuleName:this.updateRuleName,setNewRuleMeasure:this.setNewRuleMeasure,setRuleRequest:this.setRuleRequest,consequents:this.state.consequents,consequentId:this.state.consequentId,consequentName:this.state.consequentName,consequentIdx:this.state.consequentIdx,setNewConsequent:this.setNewConsequent,handleDeviceConsequentPopUp:this.handleDeviceConsequentPopUp,deviceConsequentPopUp:this.state.deviceConsequentPopUp,modifyConsequentName:this.modifyConsequentName,setConsequentAutomaticRequest:this.setConsequentAutomaticRequest,setConsequentManualMeasureRequest:this.setConsequentManualMeasureRequest,removeAlertEmailRequest:this.removeAlertEmailRequest,modifyAlertEmail:this.state.modifyAlertEmail,handleModifyAlertEmail:this.handleModifyAlertEmail,handleAddAlertEmailPopUp:this.handleAddAlertEmailPopUp,getRuleById:this.getRuleById,getAntecedentById:this.getAntecedentById,getConsequentById:this.getConsequentById,addEmailLocal:this.addEmailLocal,addNewAlertEmailRequest:this.addNewAlertEmailRequest,modifyEmailRequest:this.modifyEmailRequest,getAntecedents:this.getAntecedents,getConsequents:this.getConsequents,setRuleConsequentDelay:this.setRuleConsequentDelay,onDragEnd:this.onDragEnd})})]})]})}}]),n}(u.a.Component);function jn(e){return Object(A.jsxs)(w.a,{show:e.server_error,onHide:function(){e.handleServerErrorPopUp(),e.sensorRoute()},children:[Object(A.jsx)(w.a.Header,{closeButton:!0,children:Object(A.jsx)(w.a.Title,{children:"ERROR"})}),Object(A.jsx)(w.a.Body,{children:Object(A.jsx)("p",{children:"Server Error! Try Again"})}),Object(A.jsx)(w.a.Footer,{children:Object(A.jsx)("button",{onClick:function(){e.handleServerErrorPopUp(),e.sensorRoute()},children:"Close"})})]})}var fn=Object(S.a)(P.a)(en||(en=Object(x.a)(["\ncolor: white;\nbackground-color: #737373;\nborder-style: solid;\n"]))),bn=S.a.div(tn||(tn=Object(x.a)(["\ndisplay: flex;\nflex-flow: column;\nwidth: 100%;\nheight: 100%;\nbackground-color: rgb(190, 210, 218);\n"]))),vn=S.a.div(nn||(nn=Object(x.a)(["\nbackground-color: #737373;\nwidth: 100%;\n"]))),xn=S.a.div(sn||(sn=Object(x.a)(["\n  float: left;\n  color: #eead4c;\n  text-align: center;\n  padding: 14px 16px;\n  text-decoration: none;\n  font-size: 15px;\n  font-style: oblique;\n  font-weight: bold !important;\n"]))),Rn=Object(S.a)(N.a)(an||(an=Object(x.a)(["\n  float: right;\n  margin: 2%;\n"]))),On=S.a.div(rn||(rn=Object(x.a)(["\ndisplay: flex;\nflex-flow: row;\nwidth: 100%;\nheight: 100%;\n"]))),yn=S.a.div(on||(on=Object(x.a)(["\nwidth: 100%;\nheight: 100%;\ndisplay: flex;\nflex-flow: column;\ntext-align: center;\nmax-height:100%;\noverflow-y: auto;\nbackground-color: #e6e6e6;\n"]))),gn=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e){var s;return Object(h.a)(this,n),(s=t.call(this,e)).state={},s}return Object(m.a)(n,[{key:"render",value:function(){return Object(A.jsx)(b.a,{children:Object(A.jsxs)(v.d,{children:[Object(A.jsx)(v.b,{path:"/protected",children:Object(A.jsx)(qn,{})}),Object(A.jsx)(v.b,{path:"/",children:Object(A.jsx)(W,{})})]})})}}]),n}(u.a.Component);function qn(){console.log("route private");var e=Object(v.h)(),t=e.path,n=e.url,s=Object(v.g)().state.idToken;return Object(A.jsx)(mn,{idToken:s,user_id:"user",url:n,path:t})}p.a.render(Object(A.jsx)(u.a.StrictMode,{children:Object(A.jsx)(gn,{})}),document.getElementById("root"))}},[[331,1,2]]]);
//# sourceMappingURL=main.c3da34a2.chunk.js.map