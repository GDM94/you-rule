(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),i=n(19),o=n.n(i),r=(n(44),n(45),n(7)),a=n(8),d=n(10),u=n(9),l=n(21),p=n(12),h=n(6),j=n.n(h),b=n(2),m=n(0),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).setUserName=function(e){s.setState({userName:e},(function(){s.render()}))},s.setPassword=function(e){s.setState({password:e},(function(){s.render()}))},s.state={userName:"",password:""},s}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)(b.a,{show:this.props.userLoginPopUp,onHide:function(){return e.props.handleLoginPopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:'"LOGIN"'})}),Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)("div",{children:Object(m.jsxs)("form",{name:"login",children:[Object(m.jsx)("label",{htmlFor:"name",children:"User Name: "}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",onChange:function(t){e.props.handleCheckUserLoginCorrect(!0);var n=t.target.value;e.setUserName(n)}}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(m.jsx)("input",{type:"text",id:"password",name:"password",onChange:function(t){e.props.handleCheckUserLoginCorrect(!0);var n=t.target.value;e.setPassword(n)}})]})}),Object(m.jsx)("div",{children:Object(m.jsx)("p",{style:{display:this.props.checkUserLoginCorrect?"none":"block"},children:" Error: User Name or Password are not correct!"})})]}),Object(m.jsx)(b.a.Footer,{children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){e.props.UserLoginRequest(e.state.userName,e.state.password)},children:"LOGIN"})})})]})}}]),n}(c.a.Component),f=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).setUserName=function(e){s.setState({userName:e},(function(){s.render()}))},s.setPassword=function(e){s.setState({password:e},(function(){s.render()}))},s.checkuserNameFunction=function(e){var t=!1;return s.props.userNameList.some((function(t){return t===e}))&&(t=!0),s.setState({checkuserName:t},(function(){s.render()})),t},s.state={checkuserName:!1,userName:"",password:""},s}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)(b.a,{show:this.props.userRegisterPopUp,onHide:function(){return e.props.handleRegisterPopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:'"REGISTER"'})}),Object(m.jsxs)(b.a.Body,{children:[Object(m.jsx)("div",{children:Object(m.jsxs)("form",{name:"login",children:[Object(m.jsx)("label",{htmlFor:"name",children:"User Name: "}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",onChange:function(t){var n=t.target.value;e.checkuserNameFunction(n)||e.setUserName(n)}}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(m.jsx)("input",{type:"text",id:"password",name:"password",onChange:function(t){var n=t.target.value;e.setPassword(n)}})]})}),Object(m.jsx)("div",{children:Object(m.jsx)("p",{style:{display:this.state.checkuserName?"block":"none"},children:" Error: User Name already exist. Choose another name!"})})]}),Object(m.jsx)(b.a.Footer,{children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){!e.state.checkuserName&&e.state.userName.length>1&&e.state.password.length>1&&e.props.UserRegistrationRequest(e.state.userName,e.state.password)},children:"REGISTER"})})})]})}}]),n}(c.a.Component),x=n(20),O=(n(67),n(38));n.n(O).a.config();var R=function(e){0===x.a.apps.length&&x.a.initializeApp({apiKey:"AIzaSyDYKT4i-17UPlgaiojouyHNv1sA_svhkjM",authDomain:"you-rule-iot.firebaseapp.com",projectId:"you-rule-iot",storageBucket:"you-rule-iot.appspot.com",messagingSenderId:"645027876603",appId:"1:645027876603:web:2bfb86a6f5eb91b19d6a5e"});var t=new x.a.auth.GoogleAuthProvider;x.a.auth().signInWithPopup(t).then((function(t){var n=t.user.displayName,s=t.credential.idToken;e(n,s)})).catch((function(e){var t=e.message;console.log(t)}))},g=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).GetUserNameList=function(){console.log("UserAccess GET user name list");j.a.get("http://192.168.1.96:5000/user/names").then((function(e){var t=e.data;console.log("user name list:",t),s.setState({userNameList:t},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.UserLoginRequest=function(e,t){console.log("UserAccess GET login");var n="http://192.168.1.96:5000/user/login/"+e+"/"+t;j.a.get(n).then((function(t){var n=t.data;console.log("user name:",e),console.log("user id:",n),"false"!==n?(s.handleLoginPopUp(),s.setState({redirect:"/protected?user_id="+n+"&user_name="+e},(function(){s.render()}))):s.handleCheckUserLoginCorrect(!1)})).catch((function(e){return console.warn(e)}))},s.UserRegistrationRequest=function(e,t){console.log("UserAccess POST registration");var n="http://192.168.1.96:5000/user/registration/"+e+"/"+t;console.log("debug user_name ",e),j.a.get(n).then((function(t){var n=t.data;s.handleRegisterPopUp(),s.setState({redirect:"/protected?user_id="+n+"&user_name="+e},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.handleCheckUserLoginCorrect=function(e){s.setState({checkUserLoginCorrect:e})},s.handleLoginPopUp=function(){s.setState({userLoginPopUp:!s.state.userLoginPopUp})},s.handleRegisterPopUp=function(){s.GetUserNameList(),s.setState({userRegisterPopUp:!s.state.userRegisterPopUp})},s.setUser=function(e,t){s.setState({userName:e,idToken:t,redirect:"/protected?userName="+e+"&idToken="+t}),console.log("redirect")},s.state={userNameList:[],userLoginPopUp:!1,userRegisterPopUp:!1,userName:"",password:"",redirect:"",checkUserLoginCorrect:!0,idToken:""},s}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.GetUserNameList()}},{key:"render",value:function(){var e=this;return""===this.state.redirect?Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)("div",{className:"TopBar",children:[Object(m.jsx)("div",{className:"TopBarElement",children:"WELCOME PORTAL"}),Object(m.jsx)("div",{className:"TopBarElement",children:Object(m.jsx)("button",{variant:"primary",onClick:function(){R(e.setUser)},children:"LOGIN"})}),Object(m.jsx)("div",{className:"TopBarElement",children:Object(m.jsx)("button",{variant:"primary",onClick:function(){e.handleRegisterPopUp()},children:"REGISTER"})})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(v,{userLoginPopUp:this.state.userLoginPopUp,handleLoginPopUp:this.handleLoginPopUp,handleCheckUserLoginCorrect:this.handleCheckUserLoginCorrect,checkUserLoginCorrect:this.state.checkUserLoginCorrect,UserLoginRequest:this.UserLoginRequest,handleGoogleSignIn:this.handleGoogleSignIn}),Object(m.jsx)(f,{userRegisterPopUp:this.state.userRegisterPopUp,handleRegisterPopUp:this.handleRegisterPopUp,userNameList:this.state.userNameList,UserRegistrationRequest:this.UserRegistrationRequest})]})]}):Object(m.jsx)(p.a,{to:this.state.redirect})}}]),n}(c.a.Component),y=(n(73),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={checkCreateNewRule:!1,ruleName:""},s}return Object(a.a)(n,[{key:"checkCreateRuleFunction",value:function(e,t){e.some((function(e){return e.name===t}))?this.setState({checkCreateNewRule:!0}):this.setState({checkCreateNewRule:!1,ruleName:t})}},{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{children:Object(m.jsxs)(b.a,{show:this.props.AddRulePopUp,onHide:function(){return e.props.handleAddRulePopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:"ADD RULE"})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsxs)("div",{className:"GenericModalBody",children:[Object(m.jsx)("p",{style:{display:this.state.checkCreateNewRule?"block":"none"},children:" Error: rule name already exist! Choose another name."}),Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{htmlFor:"ruleName",children:"RULE NAME: "}),Object(m.jsx)("input",{name:"ruleName",id:"ruleName",type:"text",onChange:function(t){var n=t.target.value;e.checkCreateRuleFunction(e.props.rules,n)}})]})]})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)("button",{onClick:function(){if(!e.state.checkCreateNewRule){var t=e.state.ruleName;e.props.createRuleRequest(t)}},children:"NEXT"}),Object(m.jsx)("button",{onClick:function(){return e.props.handleAddRulePopUp()},children:"Close"})]})]})})}}]),n}(c.a.Component)),U=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).checkRuleNameFunction=function(e,t){var n=!1;return e.some((function(e){return e.name===t}))&&(n=!0),s.setState({checkRuleName:n},(function(){s.render()})),n},s.updateRuleName=function(e){s.setState({updateName:e})},s.state={ruleBody:!1,checkRuleName:!1,updateName:!1,classButtonRuleSelection:"AntecedentRuleSelection"},s}return Object(a.a)(n,[{key:"AntecedentRulePopUpBody",value:function(){this.setState({ruleBody:!1,classButtonRuleSelection:"AntecedentRuleSelection"})}},{key:"ConsequentRulePopUpBody",value:function(){this.setState({ruleBody:!0,classButtonRuleSelection:"ConsequentRuleSelection"})}},{key:"render",value:function(){var e,t,n,s=this;return this.props.rules.length>0?Object(m.jsx)("div",{className:"SetRulePopUp",children:Object(m.jsxs)(b.a,{show:this.props.setRulePopUp,onHide:function(){s.props.handleSetRulePopUp(),s.AntecedentRulePopUpBody()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsxs)(b.a.Title,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{style:{display:this.state.checkRuleName?"block":"none"},children:" Error: rule name already exist! Choose another name."}),this.props.modify?(e=this.props,t=this.checkRuleNameFunction,n=this.updateRuleName,Object(m.jsxs)("form",{name:"ItemName",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Rule: "}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:e.newRuleName,onChange:function(s){var c=s.target.value,i=t(e.rules,c);n(!0),i||e.modifyRuleName(c)}})]})):"Rule name: "+this.props.newRuleName]}),Object(m.jsxs)("div",{className:"RuleEvaliation",children:["Evaluation: ",this.props.rules[this.props.newRuleIdx].evaluation]}),Object(m.jsxs)("div",{className:"RuleSectionButton",children:[Object(m.jsx)("button",{className:this.state.classButtonRuleSelection,type:"button",id:"ruleAntecedentButton",onClick:function(){s.AntecedentRulePopUpBody()},children:"ANTECEDENT"}),Object(m.jsx)("button",{className:this.state.classButtonRuleSelection,id:"ruleConsequentButton",onClick:function(){s.ConsequentRulePopUpBody()},children:"CONSEQUENT"})]})]})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsx)(N,{ruleBody:this.state.ruleBody,rules:this.props.rules,newRuleId:this.props.newRuleId,newRuleIdx:this.props.newRuleIdx,deleteRuleConsequentRequest:this.props.deleteRuleConsequentRequest,deleteRuleAntecedentRequest:this.props.deleteRuleAntecedentRequest,modify:this.props.modify,setNewRuleCondition:this.props.setNewRuleCondition,setNewStartValue:this.props.setNewStartValue,setNewStopValue:this.props.setNewStopValue})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)(P,{ruleBody:this.state.ruleBody,modify:this.props.modify,handleSetRulePopUp:this.props.handleSetRulePopUp,handleAddRuleConsequentPopUp:this.props.handleAddRuleConsequentPopUp,handleAddRuleAntecedentPopUp:this.props.handleAddRuleAntecedentPopUp}),Object(m.jsx)("button",{onClick:function(){if(s.props.modify){var e=s.props.newRuleIdx,t=s.props.rules[e];s.state.updateName&&(s.updateRuleName(!1),s.props.updateRuleName()),t.antecedent.map((function(e){return s.props.setRuleAntecedentRequest(e),null})),t.consequent.map((function(e){return s.props.setRuleConsequentRequest(e),null})),s.props.handleModify()}else s.props.handleModify()},children:this.props.modify?"Save":"Modify"}),Object(m.jsx)("button",{onClick:function(){s.props.modify?(s.props.handleModify(),s.props.handleSetRulePopUp(),s.AntecedentRulePopUpBody(),s.props.deleteRuleRequest(s.props.newRuleId,s.props.newRuleIdx)):(s.AntecedentRulePopUpBody(),s.props.handleSetRulePopUp())},children:this.props.modify?"Delete":"Close"})]})]})}):Object(m.jsx)("div",{})}}]),n}(c.a.Component);function N(e){return e.ruleBody?Object(m.jsx)("div",{className:"RuleConsequentDetail",children:Object(m.jsx)("div",{children:Object(m.jsxs)("table",{id:"rule",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"DEVICE"}),Object(m.jsx)("th",{children:"IF"}),Object(m.jsx)("th",{children:"ELSE"})]})}),Object(m.jsx)("tbody",{children:Object(m.jsx)(q,{rules:e.rules,newRuleId:e.newRuleId,newRuleIdx:e.newRuleIdx,deleteRuleConsequentRequest:e.deleteRuleConsequentRequest,modify:e.modify})})]})})}):Object(m.jsx)("div",{className:"RuleAntecedentDetail",children:Object(m.jsx)("div",{children:Object(m.jsxs)("table",{id:"rule",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"DEVICE"}),Object(m.jsx)("th",{children:"CONDITION"}),Object(m.jsx)("th",{children:"START"}),Object(m.jsx)("th",{children:"STOP"})]})}),Object(m.jsx)("tbody",{children:Object(m.jsx)(C,{rules:e.rules,newRuleId:e.newRuleId,newRuleIdx:e.newRuleIdx,deleteRuleAntecedentRequest:e.deleteRuleAntecedentRequest,modify:e.modify,setNewRuleCondition:e.setNewRuleCondition,setNewStartValue:e.setNewStartValue,setNewStopValue:e.setNewStopValue})})]})})})}function q(e){var t=e.newRuleIdx,n=e.rules[t].consequent,s=-1;return n.map((function(t){return s++,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.if_value}),Object(m.jsx)("td",{children:t.else_value}),Object(m.jsx)("td",{className:"deleteRuleRow",style:{visibility:e.modify?"visible":"hidden"},children:Object(m.jsx)("button",{onClick:function(){e.deleteRuleConsequentRequest(e.newRuleId,t.device_id)},children:"delete"})})]},s)}))}function C(e){var t=e.newRuleIdx,n=e.rules[t].antecedent,s=-1;return n.map((function(t){return s++,Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:e.modify?w(e,s,t.condition):t.condition}),Object(m.jsx)("td",{children:e.modify?I(e,t.device_id,s,t.start_value):t.start_value}),Object(m.jsx)("td",{children:e.modify?S(e,t.device_id,s,t):t.stop_value}),Object(m.jsx)("td",{className:"deleteRuleRow",style:{visibility:e.modify?"visible":"hidden"},children:Object(m.jsx)("button",{onClick:function(){e.deleteRuleAntecedentRequest(e.newRuleId,t.device_id)},children:"delete"})})]},s)}))}function P(e){return e.ruleBody?Object(m.jsx)("button",{style:{display:e.modify?"block":"none"},onClick:function(){e.handleSetRulePopUp(),e.handleAddRuleConsequentPopUp()},children:"Add Consequent"}):Object(m.jsx)("button",{style:{display:e.modify?"block":"none"},onClick:function(){e.handleSetRulePopUp(),e.handleAddRuleAntecedentPopUp()},children:"Add Antecedent"})}function w(e,t,n){return Object(m.jsx)("form",{name:"ruleCondition",children:Object(m.jsxs)("select",{name:"condition",id:"condition",defaultValue:n,onChange:function(n){e.setNewRuleCondition(e.newRuleIdx,t,n.target.value)},children:[Object(m.jsx)("option",{value:">",children:">"}),Object(m.jsx)("option",{value:"<",children:"<"}),Object(m.jsx)("option",{value:"between",children:"'between'"})]})})}function I(e,t,n,s){return t.includes("timer")?function(e,t,n){return Object(m.jsx)("form",{name:"ruleAntecedentStartValue",children:Object(m.jsx)("input",{id:"time_start",name:"time_start",type:"time",defaultValue:n,onChange:function(n){e.setNewStartValue(e.newRuleIdx,t,n.target.value)}})})}(e,n,s):Object(m.jsx)("form",{name:"ruleAntecedentStartValue",children:Object(m.jsx)("input",{id:"StartValue",name:"StartValue",type:"number",min:"1",max:"100",step:"5",defaultValue:s,onChange:function(t){t.target.value>100?t.target.value=100:t.target.value<0&&(t.target.value=0),e.setNewStartValue(e.newRuleIdx,n,t.target.value)}})})}function S(e,t,n,s){return t.includes("timer")?function(e,t,n){return"between"===n.condition?Object(m.jsx)("form",{name:"ruleAntecedentStopValue",children:Object(m.jsx)("input",{id:"time_stop",name:"time_stop",type:"time",defaultValue:n.stop_value,onChange:function(n){e.setNewStopValue(e.newRuleIdx,t,n.target.value)}})}):Object(m.jsx)("div",{children:n.stop_value})}(e,n,s):"between"===s.condition?Object(m.jsx)("form",{name:"ruleAntecedentStopValue",children:Object(m.jsx)("input",{id:"StopValue",name:"StopValue",type:"number",min:"0",max:"100",step:"5",defaultValue:s.stop_value,onChange:function(t){t.target.value>100?t.target.value=100:t.target.value<0&&(t.target.value=0),e.setNewStopValue(e.newRuleIdx,n,t.target.value)}})}):Object(m.jsx)("div",{children:s.stop_value})}var A=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={},s}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{children:Object(m.jsxs)(b.a,{show:this.props.addRuleConsequentPopUp,onHide:function(){e.props.handleAddRuleConsequentPopUp(),e.props.handleSetRulePopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:Object(m.jsx)("div",{children:"SWITCHES"})})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsx)("div",{className:"GenericModalBody",children:Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:Object(m.jsx)(D,{newRuleIdx:this.props.newRuleIdx,rules:this.props.rules,consequents:this.props.consequents,setConsequentRuleLocal:this.props.setConsequentRuleLocal})})})})}),Object(m.jsx)(b.a.Footer,{children:Object(m.jsx)("button",{onClick:function(){e.props.handleAddRuleConsequentPopUp(),e.props.handleSetRulePopUp()},children:"Close"})})]})})}}]),n}(c.a.Component);function D(e){var t=-1,n=e.newRuleIdx,s=e.rules[n].consequent,c=[];return s.length>0&&(c=s.map((function(e){return e.device_id}))),e.consequents.map((function(n){return c.some((function(e){return e===n.id}))?null:(t++,Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){var t={device_id:n.id,name:n.name,if_value:"on",else_value:"off"};e.setConsequentRuleLocal(e.newRuleIdx,t)},children:n.name})})},t))}))}var k=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={},s}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{children:Object(m.jsxs)(b.a,{show:this.props.addRuleAntecedentPopUp,onHide:function(){e.props.handleAddRuleAntecedentPopUp(),e.props.handleSetRulePopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:Object(m.jsx)("div",{children:"SENSORS"})})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsx)("div",{className:"GenericModalBody",children:Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:Object(m.jsx)(E,{newRuleIdx:this.props.newRuleIdx,rules:this.props.rules,antecedents:this.props.antecedents,setAntecedentRuleLocal:this.props.setAntecedentRuleLocal})})})})}),Object(m.jsx)(b.a.Footer,{children:Object(m.jsx)("button",{onClick:function(){e.props.handleAddRuleAntecedentPopUp(),e.props.handleSetRulePopUp()},children:"Close"})})]})})}}]),n}(c.a.Component);function E(e){var t=-1,n=e.newRuleIdx,s=e.rules[n].antecedent,c=[];return s.length>0&&(c=s.map((function(e){return e.device_id}))),e.antecedents.map((function(n){return c.some((function(e){return e===n.id}))?null:(t++,Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){var t={device_id:n.id,name:n.name,start_value:"0",stop_value:"0",condition:"between"};n.id.includes("timer")&&(t.start_value="00:00",t.stop_value="00:00"),e.setAntecedentRuleLocal(e.newRuleIdx,t)},children:n.name})})},t))}))}function L(e){return Object(m.jsx)("div",{className:"RuleContainer",children:Object(m.jsx)("div",{className:"MyList",children:Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:Object(m.jsx)("th",{children:"RULE ENGINE"})})}),Object(m.jsx)("tbody",{children:Object(m.jsx)(_,{handleSetRulePopUp:e.handleSetRulePopUp,setNewRule:e.setNewRule,rules:e.rules,getRuleById:e.getRuleById})})]})})})}function _(e){if(e.rules.length>0){var t=e.rules.map((function(e){return e.id}));return e.rules.map((function(n){var s=t.indexOf(n.id);return Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{variant:"primary",onClick:function(){e.getRuleById(n.id),e.setNewRule(n.id,n.name,s),e.handleSetRulePopUp()},children:n.name})})})},s)}))}return Object(m.jsx)("tr",{children:Object(m.jsx)("td",{})},0)}function B(e){return Object(m.jsx)("div",{className:"AntecedentContainer",children:Object(m.jsx)("div",{className:"MyList",children:Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:Object(m.jsx)("th",{children:"SENSORS"})})}),Object(m.jsx)("tbody",{children:Object(m.jsx)(T,{antecedents:e.antecedents,handleDeviceAntecedentPopUp:e.handleDeviceAntecedentPopUp,setNewAntecedent:e.setNewAntecedent,getAntecedentById:e.getAntecedentById})})]})})})}function T(e){if(e.antecedents.length>0){var t=e.antecedents.map((function(e){return e.id}));return e.antecedents.map((function(n){var s=t.indexOf(n.id);return Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{variant:"primary",onClick:function(){e.getAntecedentById(n.id),e.setNewAntecedent(n.id,n.name,s),e.handleDeviceAntecedentPopUp()},children:n.name})})})},s)}))}return Object(m.jsx)("tr",{children:Object(m.jsx)("td",{})},0)}function M(e){return Object(m.jsx)("div",{className:"ConsequentContainer",children:Object(m.jsx)("div",{className:"MyList",children:Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:Object(m.jsx)("th",{children:"SWITCHES"})})}),Object(m.jsx)("tbody",{children:Object(m.jsx)(V,{consequents:e.consequents,handleDeviceConsequentPopUp:e.handleDeviceConsequentPopUp,setNewConsequent:e.setNewConsequent,getConsequentById:e.getConsequentById})})]})})})}function V(e){if(e.consequents.length>0){var t=e.consequents.map((function(e){return e.id}));return e.consequents.map((function(n){var s=t.indexOf(n.id);return Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{variant:"primary",onClick:function(){e.getConsequentById(n.id),e.setNewConsequent(n.id,n.name,s),e.handleDeviceConsequentPopUp()},children:n.name})})})},s)}))}return Object(m.jsx)("tr",{children:Object(m.jsx)("td",{})},0)}var F=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).checkDeviceNameFunction=function(e,t){var n=!1;return e.some((function(e){return e.name===t}))&&(n=!0),s.setState({checkDeviceName:n},(function(){s.render()})),n},s.state={checkDeviceName:!1},s}return Object(a.a)(n,[{key:"render",value:function(){var e,t,n=this;if(this.props.antecedents.length>0){var s=this.props.antecedentIdx,c=function(e){var t=e.antecedentIdx,n=e.antecedents[t].rules;try{var s=e.antecedents[t].rules,c=e.rules;if(s.length>0&&c.length>0){var i=c.map((function(e){return e.id}));return s.map((function(t){var n=i.indexOf(t);return Object(m.jsx)("li",{children:Object(m.jsx)("button",{onClick:function(){e.setNewRule(t,c[n].name,n),e.handleDeviceAntecedentPopUp(),e.handleSetRulePopUp()},children:c[n].name})},t)}))}return Object(m.jsx)("li",{})}catch(o){return n.map((function(e){return Object(m.jsx)("li",{children:e},e)}))}}(this.props);return Object(m.jsxs)(b.a,{show:this.props.deviceAntecedentPopUp,onHide:function(){return n.props.handleDeviceAntecedentPopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsxs)(b.a.Title,{children:[Object(m.jsx)("p",{style:{display:this.state.checkDeviceName?"block":"none"},children:" Error: device name already exist! Choose another name."}),this.props.modifyDevice?(e=this.props,t=this.checkDeviceNameFunction,Object(m.jsxs)("form",{name:"ItemName",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:e.antecedentName,onChange:function(n){var s=n.target.value,c=t(e.antecedents,s);c||e.modifyAntecedentName(s)}})]})):this.props.antecedentName]})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsx)("div",{children:Object(m.jsx)(H,{antecedentIdx:this.props.antecedentIdx,antecedentId:this.props.antecedentId,antecedentName:this.props.antecedentName,antecedents:this.props.antecedents,index:s,rulesName:c,modifyAntecedentName:this.props.modifyAntecedentName,modifyAntecedentSetting:this.props.modifyAntecedentSetting,modifyDevice:this.props.modifyDevice})})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)("button",{onClick:function(){n.props.getDeviceMeasureRequest("antecedent")},children:"Refresh"}),Object(m.jsx)("button",{onClick:function(){n.props.modifyDevice?(n.props.updateDeviceRequest("antecedent"),n.props.handleModifyDevice()):n.props.handleModifyDevice()},children:this.props.modifyDevice?"Save":"Modify"}),Object(m.jsx)("button",{onClick:function(){n.props.modifyDevice?(n.props.handleModifyDevice(),n.props.handleDeviceAntecedentPopUp(),n.props.deleteDeviceRequest("antecedent")):n.props.handleDeviceAntecedentPopUp()},children:this.props.modifyDevice?"Delete":"Close"})]})]})}return Object(m.jsx)("div",{})}}]),n}(c.a.Component);function H(e){var t=e.antecedentId;if(t.includes("timer")){var n=new Date,s=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();return Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:"Type: sensor - timer"},"type"),Object(m.jsxs)("li",{children:["Id: ",e.antecedentId]},"id"),Object(m.jsxs)("li",{children:["Measure: ",s]},"measure"),Object(m.jsx)("li",{children:"Rules:"},"rules"),Object(m.jsx)("ul",{children:e.rulesName})]})}if(t.includes("PHOTOCELL")||t.includes("SOILMOISTURE")){var c=parseInt(e.antecedents[e.index].setting),i=(100*parseInt(e.antecedents[e.index].measure)/c).toFixed(1);return Object(m.jsxs)("ol",{children:[Object(m.jsxs)("li",{children:["Type: sensor - ",t.includes("PHOTOCELL")?"photocell":"soil moisture"]},"type"),Object(m.jsxs)("li",{children:["Id: ",e.antecedentId]},"id"),Object(m.jsxs)("li",{children:["Measure: ",i," %"]},"measure"),Object(m.jsx)("li",{children:"Rules:"},"rules"),Object(m.jsx)("ul",{children:e.rulesName})]})}if(t.includes("WATERLEVEL")){var o=parseInt(e.antecedents[e.index].setting),r=(100*parseInt(e.antecedents[e.index].measure)/o).toFixed(1);return Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:"Type: sensor - water level"},"type"),Object(m.jsxs)("li",{children:["id: ",e.antecedentId]},"id"),Object(m.jsxs)("li",{children:["measure: ",r," %"]},"measure"),Object(m.jsx)("li",{children:e.modifyDevice?G(e):"Setting:"+e.antecedents[e.index].setting},"setting"),Object(m.jsx)("li",{children:"rules:"},"rules"),Object(m.jsx)("ul",{children:e.rulesName})]})}}function G(e){var t=e.antecedentIdx;return Object(m.jsxs)("form",{name:"ItemSetting",children:[Object(m.jsx)("label",{htmlFor:"setting",children:"Setting: "}),Object(m.jsx)("input",{type:"number",id:"setting",name:"setting",defaultValue:e.antecedents[t].setting,onChange:function(t){var n=t.target.value;e.modifyAntecedentSetting(n)}})]})}var W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={registerDeviceError:!1,newDeviceId:""},s}return Object(a.a)(n,[{key:"CheckRegisterDeviceRecognition",value:function(){var e=this,t=this.state.newDeviceId,n=!1;return(t.includes("SWITCH")||t.includes("PHOTOCELL")||t.includes("WATERLEVEL")||t.includes("SOILMOISTURE"))&&(n=!0),this.setState({registerDeviceError:!n},(function(){e.render()})),n}},{key:"NewDeviceIdRegistration",value:function(e){var t=this;this.setState({newDeviceId:e},(function(){t.render()}))}},{key:"render",value:function(){var e=this;return Object(m.jsx)("div",{children:Object(m.jsxs)(b.a,{show:this.props.registerDevicePopUp,onHide:function(){return e.props.handleRegisterDevicePopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:"ADD DEVICE"})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsxs)("div",{className:"GenericModalBody",children:[Object(m.jsx)("p",{style:{display:this.state.registerDeviceError?"block":"none"},children:" Error: device Id is not correct!"}),Object(m.jsxs)("form",{children:[Object(m.jsx)("label",{htmlFor:"deviceId",children:"DEVICE ID: "}),Object(m.jsx)("input",{name:"deviceId",id:"deviceId",type:"text",onChange:function(t){var n=t.target.value;e.NewDeviceIdRegistration(n)}})]})]})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)("button",{onClick:function(){e.CheckRegisterDeviceRecognition()&&(!function(e,t){var n=null;t.includes("SWITCH")?(n={id:t,name:"switch",measure:"init",rules:[]},e.registerDeviceRequest("consequent",n)):(t.includes("PHOTOCELL")?n={id:t,name:"photocell",setting:"1024",measure:"init",rules:[]}:t.includes("WATERLEVEL")?n={id:t,name:"waterlevel",setting:"100",measure:"init",rules:[]}:t.includes("SOILMOISTURE")&&(n={id:t,name:"soilmoisture",setting:"1024",measure:"init",rules:[]}),e.registerDeviceRequest("antecedent",n))}(e.props,e.state.newDeviceId),e.props.handleRegisterDevicePopUp())},children:"NEXT"}),Object(m.jsx)("button",{onClick:function(){return e.props.handleRegisterDevicePopUp()},children:"Close"})]})]})})}}]),n}(c.a.Component);var z=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).checkDeviceNameFunction=function(e,t){var n=!1;return e.some((function(e){return e.name===t}))&&(n=!0),s.setState({checkDeviceName:n},(function(){s.render()})),n},s.state={checkDeviceName:!1},s}return Object(a.a)(n,[{key:"render",value:function(){var e,t,n=this;if(this.props.consequents.length>0){var s=this.props.consequentIdx,c=function(e){var t=e.consequentIdx,n=e.consequents[t].rules;try{var s=e.consequents[t].rules,c=e.rules;if(s.length>0&&c.length>0){var i=c.map((function(e){return e.id}));return s.map((function(t){var n=i.indexOf(t);return Object(m.jsx)("li",{children:Object(m.jsx)("button",{onClick:function(){e.setNewRule(t,c[n].name,n),e.handleDeviceConsequentPopUp(),e.handleSetRulePopUp()},children:c[n].name})},t)}))}return Object(m.jsx)("li",{})}catch(o){return n.map((function(e){return Object(m.jsx)("li",{children:e},e)}))}}(this.props);return Object(m.jsxs)(b.a,{show:this.props.deviceConsequentPopUp,onHide:function(){return n.props.handleDeviceConsequentPopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:"SWITCH"})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{style:{display:this.state.checkDeviceName?"block":"none"},children:" Error: device name already exist! Choose another name."}),Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:this.props.modifyDevice?(e=this.props,t=this.checkDeviceNameFunction,Object(m.jsxs)("form",{name:"ItemName",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(m.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:e.consequentName,onChange:function(n){var s=n.target.value,c=t(e.consequents,s);c||e.modifyConsequentName(s)}})]})):"Name: "+this.props.consequentName},"name"),Object(m.jsxs)("li",{children:["id: ",this.props.consequentId]},"id"),Object(m.jsxs)("li",{children:["measure: ",this.props.consequents[s].measure]},"measure"),Object(m.jsx)("li",{children:"rules:"},"rules"),Object(m.jsx)("ul",{children:c})]})]})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)("button",{onClick:function(){n.props.getDeviceMeasureRequest("consequent")},children:"Refresh"}),Object(m.jsx)("button",{onClick:function(){n.props.modifyDevice?(n.props.updateDeviceRequest("consequent"),n.props.handleModifyDevice()):n.props.handleModifyDevice()},children:this.props.modifyDevice?"Save":"Modify"}),Object(m.jsx)("button",{onClick:function(){n.props.modifyDevice?(n.props.deleteDeviceRequest("consequent"),n.props.handleModifyDevice(),n.props.handleDeviceConsequentPopUp()):(n.props.handleModifyDevice(),n.props.handleDeviceConsequentPopUp())},children:this.props.modifyDevice?"Delete":"Close"})]})]})}return Object(m.jsx)("div",{children:" "})}}]),n}(c.a.Component);var J=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).getAllDeviceIdRegistered=function(){console.log("App GET all devices ID registered");j.a.get("http://192.168.1.96:5000/device/get/all").then((function(e){var t=e.data;s.setState({allDeviceId:t},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.getAntecedents=function(){console.log("App GET antecedent By User");j.a.get("http://192.168.1.96:5000/device/get/antecedents",{},{params:{user_id:s.props.user_id}}).then((function(e){var t=e.data;s.setState({antecedents:t},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.getConsequents=function(){console.log("App GET consequents By User");j.a.get("http://192.168.1.96:5000/device/get/consequents",{},{params:{user_id:s.props.user_id}}).then((function(e){var t=e.data;s.setState({consequents:t},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.getRules=function(){console.log("App GET Rules by user");j.a.get("http://192.168.1.96:5000/rule/user",{},{params:{user_id:s.props.user_id}}).then((function(e){var t=e.data;s.setState({rules:t},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.getAntecedentById=function(e){console.log("App GET antecedent By Id");var t="http://192.168.1.96:5000/device/antecedent/id/"+e;j.a.get(t).then((function(e){var t=e.data,n=s.state.antecedentIdx,c=s.state.antecedents;c[n]=t,s.setState({antecedents:c},(function(){s.render()}))}))},s.getConsequentById=function(e){console.log("App GET consequent By Id");var t="http://192.168.1.96:5000/device/consequent/id/"+e;j.a.get(t).then((function(e){var t=e.data,n=s.state.consequents;n[s.state.consequentIdx]=t,s.setState({consequents:n},(function(){s.render()}))}))},s.getRuleById=function(e){console.log("App GET Rule By ID");var t="http://192.168.1.96:5000/rule/id/"+e;j.a.get(t,{},{params:{user_id:s.props.user_id}}).then((function(e){var t=e.data,n=s.state.rules;n[s.state.newRuleIdx]=t,s.setState({rules:n},(function(){s.render()}))})).catch((function(e){return console.warn(e)}))},s.getDeviceMeasureRequest=function(e){if(console.log("App GET device measure"),"antecedent"===e){var t="http://192.168.1.96:5000/device/measure/"+s.state.antecedentId;j.a.get(t).then((function(e){var t=e.data,n=s.state.antecedentIdx,c=s.state.antecedents;c[n].measure=t,s.setState({antecedents:c},(function(){s.render()}))}))}},s.createRuleRequest=function(e){console.log("App POST create rule");var t="http://192.168.1.96:5000/rule/create/"+e;j.a.post(t,{},{params:{user_id:s.props.user_id}}).then((function(t){var n=t.data,c={id:n,name:e,antecedent:[],consequent:[]},i=s.state.rules,o=i.length,r=i.concat([c]);s.setState({rules:r,newRuleIdx:o,newRuleId:n,newRuleName:e},(function(){s.render(),s.handleAddRulePopUp(),s.handleSetRulePopUp()}))})).catch((function(e){return console.warn(e)}))},s.setRuleAntecedentRequest=function(e){console.log("App POST new rule antecedent");j.a.post("http://192.168.1.96:5000/rule/set/antecedent",{},{params:{user_id:s.props.user_id,rule_id:s.state.newRuleId,device_id:e.device_id,start_value:e.start_value,stop_value:e.stop_value,condition:e.condition}}).catch((function(e){return console.warn(e)}))},s.setRuleConsequentRequest=function(e){console.log("App POST new rule consequent");j.a.post("http://192.168.1.96:5000/rule/set/consequent",{},{params:{user_id:s.props.user_id,rule_id:s.state.newRuleId,device_id:e.device_id}}).catch((function(e){return console.warn(e)}))},s.updateDeviceRequest=function(e){console.log("App POST update device");var t="",n="",c=0;if("antecedent"===e){var i=s.state.antecedentIdx;t=s.state.antecedentId,n=s.state.antecedentName,c=s.state.antecedents[i].setting}else t=s.state.consequentId,n=s.state.consequentName,c="";j.a.post("http://192.168.1.96:5000/device/update",{},{params:{user_id:s.props.user_id,device_id:t,device_name:n,setting:c}}).catch((function(e){return console.warn(e)}))},s.registerDeviceRequest=function(e,t){console.log("App POST register device");j.a.post("http://192.168.1.96:5000/device/register",{},{params:{device_id:t.id,device_name:t.name,user_id:s.props.user_id}}).catch((function(e){return console.warn(e)})),s.registerNewDeviceLocal(e,t)},s.registerNewDeviceLocal=function(e,t){if("antecedent"===e){var n=s.state.antecedents,c=n.length;s.setState({antecedents:n.concat([t]),antecedentId:t.id,antecedentName:t.name,antecedentIdx:c,modifyDevice:!0},(function(){s.render(),s.handleDeviceAntecedentPopUp()}))}else{var i=s.state.consequents,o=i.length;s.setState({consequents:i.concat([t]),consequentId:t.id,consequentName:t.name,consequentIdx:o,modifyDevice:!0},(function(){s.render(),s.handleDeviceConsequentPopUp()}))}},s.updateRuleName=function(){console.log("App POST update rule name");j.a.post("http://192.168.1.96:5000/rule/set/name",{},{params:{user_id:s.props.user_id,rule_id:s.state.newRuleId,rule_name:s.state.newRuleName}}).catch((function(e){return console.warn(e)}))},s.deleteRuleRequest=function(e,t){console.log("App DELETE rule");var n="http://192.168.1.96:5000/rule/delete/"+e;j.a.delete(n,{},{params:{user_id:s.props.user_id}}).catch((function(e){return console.warn(e)}));var c=s.state.rules;c.splice(t,1),s.setState({rules:c,newRuleIdx:0},(function(){s.render()}))},s.deleteRuleConsequentRequest=function(e,t){console.log("App DELETE rule consequent");var n="http://192.168.1.96:5000/rule/delete/consequent/"+e+"/"+t;j.a.delete(n,{},{params:{user_id:s.props.user_id}}).catch((function(e){return console.warn(e)})),s.deleteRuleConsequentLocal(e,t)},s.deleteRuleConsequentLocal=function(e){var t=s.state.rules,n=s.state.newRuleIdx,c=t[n].consequent.indexOf(e);t[n].consequent.splice(c,1),s.setState({rules:t},(function(){s.render()}))},s.deleteRuleAntecedentRequest=function(e,t){console.log("App DELETE rule antecedent");var n="http://192.168.1.96:5000/rule/delete/antecedent/"+e+"/"+t;j.a.delete(n,{},{params:{user_id:s.props.user_id}}).catch((function(e){return console.warn(e)})),s.deleteRuleAntecedentLocal(t)},s.deleteRuleAntecedentLocal=function(e){var t=s.state.rules,n=s.state.newRuleIdx,c=t[n].antecedent.indexOf(e);t[n].antecedent.splice(c,1),s.setState({rules:t},(function(){s.render()}))},s.deleteDeviceRequest=function(e){if(console.log("App DELETE device"),"antecedent"===e){var t="http://192.168.1.96:5000/device/delete/"+s.state.antecedentId,n=s.state.antecedents,c=s.state.antecedentIdx;n.splice(c,1),j.a.delete(t,{},{params:{user_id:s.props.user_id}}).then(s.setState({antecedentIdx:0,antecedents:n},(function(){s.render()}))).catch((function(e){return console.warn(e)}))}else{var i="http://192.168.1.96:5000/device/delete/"+s.state.consequentId,o=s.state.consequentIdx,r=s.state.consequents;r.splice(o,1),j.a.delete(i,{},{params:{user_id:s.props.user_id}}).then(s.setState({consequentIdx:0,consequents:r},(function(){s.render()}))).catch((function(e){return console.warn(e)}))}},s.modifyRuleName=function(e){var t=s.state.rules;t[s.state.newRuleIdx].name=e,s.setState({rules:t,newRuleName:e},(function(){s.render()}))},s.setConsequentRuleLocal=function(e,t){var n=s.state.rules;n[e].consequent.push(t),s.setState({rules:n},(function(){s.render(),s.handleAddRuleConsequentPopUp(),s.handleSetRulePopUp()}))},s.setAntecedentRuleLocal=function(e,t){var n=s.state.rules;n[e].antecedent.push(t),s.setState({rules:n},(function(){s.render(),s.handleAddRuleAntecedentPopUp(),s.handleSetRulePopUp()}))},s.setNewRuleCondition=function(e,t,n){var c=s.state.rules;c[e].antecedent[t].condition=n,c[e].antecedent[t].stop_value="between"===n?c[e].antecedent[t].start_value:"//",s.setState({rules:c},(function(){s.render()}))},s.setNewStartValue=function(e,t,n){var c=s.state.rules;c[e].antecedent[t].start_value=n,s.setState({rules:c},(function(){s.render()}))},s.setNewStopValue=function(e,t,n){var c=s.state.rules;c[e].antecedent[t].stop_value=n,s.setState({rules:c},(function(){s.render()}))},s.modifyAntecedentSetting=function(e){var t=s.state.antecedents;t[s.state.antecedentIdx].setting=e,s.setState({antecendents:t},(function(){s.render()}))},s.modifyAntecedentName=function(e){var t=s.state.antecedents;t[s.state.antecedentIdx].name=e,s.setState({antecendents:t,antecedentName:e},(function(){s.render()}))},s.modifyConsequentName=function(e){var t=s.state.consequents;t[s.state.consequentIdx].name=e,s.setState({consequents:t,consequentName:e},(function(){s.render()}))},s.setNewRule=function(e,t,n){s.setState({newRuleIdx:n,newRuleId:e,newRuleName:t},(function(){s.render()}))},s.setNewAntecedent=function(e,t,n){s.setState({antecedentId:e,antecedentName:t,antecedentIdx:n},(function(){s.render()}))},s.setNewConsequent=function(e,t,n){s.setState({consequentId:e,consequentName:t,consequentIdx:n},(function(){s.render()}))},s.handleMenuPopUp=function(){s.setState({menuPopUp:!s.state.menuPopUp})},s.handleAddRulePopUp=function(){s.setState({AddRulePopUp:!s.state.AddRulePopUp})},s.handleSetRulePopUp=function(){s.setState({setRulePopUp:!s.state.setRulePopUp})},s.handleModify=function(){s.setState({modify:!s.state.modify})},s.handleModifyDevice=function(){s.setState({modifyDevice:!s.state.modifyDevice})},s.handleAddRuleAntecedentPopUp=function(){s.setState({addRuleAntecedentPopUp:!s.state.addRuleAntecedentPopUp})},s.handleAddRuleConsequentPopUp=function(){s.setState({addRuleConsequentPopUp:!s.state.addRuleConsequentPopUp})},s.handleRegisterDevicePopUp=function(){s.setState({registerDevicePopUp:!s.state.registerDevicePopUp})},s.handleDeviceAntecedentPopUp=function(){s.setState({deviceAntecedentPopUp:!s.state.deviceAntecedentPopUp})},s.handleDeviceConsequentPopUp=function(){s.setState({deviceConsequentPopUp:!s.state.deviceConsequentPopUp})},s.handleLogOut=function(){s.setState({logout:!0},(function(){s.render()}))},j.a.defaults.headers.common.Authorization=s.props.idToken,s.state={menuPopUp:!1,AddRulePopUp:!1,setRulePopUp:!1,addRuleAntecedentPopUp:!1,addRuleConsequentPopUp:!1,registerDevicePopUp:!1,newRuleId:0,newRuleIdx:0,newRuleName:"",modify:!1,deviceAntecedentPopUp:!1,antecedentId:"",antecedentName:"",antecedentIdx:0,deviceConsequentPopUp:!1,consequentId:"",consequentName:"",consequentIdx:0,modifyDevice:!1,antecedents:[],consequents:[],rules:[],allDeviceId:[],logout:!1},s}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.getAntecedents(),this.getConsequents(),this.getRules()}},{key:"render",value:function(){var e=this;return this.state.logout?Object(m.jsx)(p.a,{to:"/"}):Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)("div",{className:"TopBar",children:[Object(m.jsxs)("div",{className:"TopBarElement",children:["Welcome ",this.props.user_name]}),Object(m.jsx)("div",{className:"TopBarButtonMenu",children:Object(m.jsx)("button",{onClick:function(){e.handleMenuPopUp()},children:"MENU"})}),Object(m.jsx)(K,{menuPopUp:this.state.menuPopUp,handleMenuPopUp:this.handleMenuPopUp,handleAddRulePopUp:this.handleAddRulePopUp,handleRegisterDevicePopUp:this.handleRegisterDevicePopUp,handleModify:this.handleModify,handleLogOut:this.handleLogOut}),Object(m.jsx)(y,{AddRulePopUp:this.state.AddRulePopUp,rules:this.state.rules,user_id:this.props.user_id,base_url:"http://192.168.1.96:5000",handleAddRulePopUp:this.handleAddRulePopUp,createRuleRequest:this.createRuleRequest}),Object(m.jsx)(U,{setRulePopUp:this.state.setRulePopUp,handleSetRulePopUp:this.handleSetRulePopUp,rules:this.state.rules,newRuleIdx:this.state.newRuleIdx,newRuleId:this.state.newRuleId,newRuleName:this.state.newRuleName,deleteRuleConsequentRequest:this.deleteRuleConsequentRequest,deleteRuleAntecedentRequest:this.deleteRuleAntecedentRequest,handleModify:this.handleModify,modify:this.state.modify,setNewRuleCondition:this.setNewRuleCondition,setNewStartValue:this.setNewStartValue,setNewStopValue:this.setNewStopValue,handleAddRuleAntecedentPopUp:this.handleAddRuleAntecedentPopUp,handleAddRuleConsequentPopUp:this.handleAddRuleConsequentPopUp,setRuleAntecedentRequest:this.setRuleAntecedentRequest,setRuleConsequentRequest:this.setRuleConsequentRequest,deleteRuleRequest:this.deleteRuleRequest,modifyRuleName:this.modifyRuleName,updateRuleName:this.updateRuleName}),Object(m.jsx)(A,{addRuleConsequentPopUp:this.state.addRuleConsequentPopUp,handleSetRulePopUp:this.handleSetRulePopUp,handleAddRuleConsequentPopUp:this.handleAddRuleConsequentPopUp,newRuleIdx:this.state.newRuleIdx,rules:this.state.rules,consequents:this.state.consequents,setConsequentRuleLocal:this.setConsequentRuleLocal}),Object(m.jsx)(k,{addRuleAntecedentPopUp:this.state.addRuleAntecedentPopUp,handleSetRulePopUp:this.handleSetRulePopUp,handleAddRuleAntecedentPopUp:this.handleAddRuleAntecedentPopUp,newRuleIdx:this.state.newRuleIdx,rules:this.state.rules,antecedents:this.state.antecedents,setAntecedentRuleLocal:this.setAntecedentRuleLocal}),Object(m.jsx)(W,{registerDevicePopUp:this.state.registerDevicePopUp,handleRegisterDevicePopUp:this.handleRegisterDevicePopUp,registerDeviceRequest:this.registerDeviceRequest}),Object(m.jsx)(F,{rules:this.state.rules,deviceAntecedentPopUp:this.state.deviceAntecedentPopUp,handleDeviceAntecedentPopUp:this.handleDeviceAntecedentPopUp,modifyDevice:this.state.modifyDevice,handleModifyDevice:this.handleModifyDevice,antecedents:this.state.antecedents,antecedentId:this.state.antecedentId,antecedentName:this.state.antecedentName,antecedentIdx:this.state.antecedentIdx,setNewAntecedent:this.setNewAntecedent,modifyAntecedentSetting:this.modifyAntecedentSetting,updateDeviceRequest:this.updateDeviceRequest,deleteDeviceRequest:this.deleteDeviceRequest,getDeviceMeasureRequest:this.getDeviceMeasureRequest,modifyAntecedentName:this.modifyAntecedentName,setNewRule:this.setNewRule,handleSetRulePopUp:this.handleSetRulePopUp}),Object(m.jsx)(z,{rules:this.state.rules,consequents:this.state.consequents,consequentId:this.state.consequentId,consequentName:this.state.consequentName,consequentIdx:this.state.consequentIdx,setNewConsequent:this.setNewConsequent,handleDeviceConsequentPopUp:this.handleDeviceConsequentPopUp,deviceConsequentPopUp:this.state.deviceConsequentPopUp,modifyDevice:this.state.modifyDevice,handleModifyDevice:this.handleModifyDevice,updateDeviceRequest:this.updateDeviceRequest,deleteDeviceRequest:this.deleteDeviceRequest,getDeviceMeasureRequest:this.getDeviceMeasureRequest,modifyConsequentName:this.modifyConsequentName,setNewRule:this.setNewRule,handleSetRulePopUp:this.handleSetRulePopUp})]}),Object(m.jsx)(B,{antecedents:this.state.antecedents,handleDeviceAntecedentPopUp:this.handleDeviceAntecedentPopUp,setNewAntecedent:this.setNewAntecedent,getAntecedentById:this.getAntecedentById}),Object(m.jsx)(L,{handleSetRulePopUp:this.handleSetRulePopUp,rules:this.state.rules,setNewRule:this.setNewRule,getRuleById:this.getRuleById}),Object(m.jsx)(M,{consequents:this.state.consequents,handleDeviceConsequentPopUp:this.handleDeviceConsequentPopUp,setNewConsequent:this.setNewConsequent,getConsequentById:this.getConsequentById})]})}}]),n}(c.a.Component);function K(e){return Object(m.jsxs)(b.a,{show:e.menuPopUp,onHide:function(){return e.handleMenuPopUp()},children:[Object(m.jsx)(b.a.Header,{closeButton:!0,children:Object(m.jsx)(b.a.Title,{children:'"MENU"'})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsxs)("div",{className:"MenuPopUp",children:[Object(m.jsx)("button",{onClick:function(){e.handleMenuPopUp(),e.handleRegisterDevicePopUp()},children:"ADD DEVICE"}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:function(){e.handleMenuPopUp(),e.handleAddRulePopUp(),e.handleModify()},children:"ADD RULE"}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{onClick:function(){e.handleLogOut()},children:"LOGOUT"})]})}),Object(m.jsx)(b.a.Footer,{children:Object(m.jsx)("button",{onClick:function(){return e.handleMenuPopUp()},children:"Close"})})]})}var X=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={},s}return Object(a.a)(n,[{key:"render",value:function(){return Object(m.jsx)(l.a,{children:Object(m.jsxs)(p.c,{children:[Object(m.jsx)(Q,{path:"/protected"}),Object(m.jsx)(g,{path:"/"})]})})}}]),n}(c.a.Component);function Q(e){var t=new URLSearchParams(Object(p.f)().search),n=t.get("userName"),s=t.get("idToken");return Object(m.jsx)(J,{idToken:s,user_name:n,user_id:"user"})}o.a.render(Object(m.jsx)(X,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.ce22e043.chunk.js.map