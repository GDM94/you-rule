{"version":3,"sources":["UserLoginProcess.js","UserRegisterProcess.js","UserAccessProcess.js","CreateRuleProcess.js","SetRuleProcess.js","AddRuleConsequentProcess.js","AddRuleAntecedentProcess.js","ViewRules.js","ViewAntecedents.js","ViewConsequents.js","DeviceAntecedentPopUp.js","RegisterDeviceProcess.js","DeviceConsequentPopUp.js","App.js","Main.js","index.js"],"names":["UserLoginProcess","props","setUserName","userName","setState","render","setPassword","password","state","Modal","show","this","userLoginPopUp","onHide","handleLoginPopUp","Header","closeButton","Title","Body","name","htmlFor","type","id","onChange","e","handleCheckUserLoginCorrect","NewName","target","value","style","display","checkUserLoginCorrect","Footer","onClick","UserLoginRequest","React","Component","UserRegisterProcess","checkuserNameFunction","newName","checkuserName","userNameList","some","username","userRegisterPopUp","handleRegisterPopUp","length","UserRegistrationRequest","jwt","require","UserAccessProcess","GetUserNameList","console","log","axios","get","process","then","res","data","catch","err","warn","user_name","url","encode","tokenId","redirect","check","setUser","idToken","className","variant","to","CreateRuleProcess","checkCreateNewRule","ruleName","rules","rule","AddRulePopUp","handleAddRulePopUp","checkCreateRuleFunction","createRuleRequest","SetRuleProcess","checkRuleNameFunction","checkRuleName","updateRuleName","update","updateName","ruleBody","classButtonRuleSelection","setRulePopUp","handleSetRulePopUp","AntecedentRulePopUpBody","modify","defaultValue","newRuleName","modifyRuleName","newRuleIdx","evaluation","ConsequentRulePopUpBody","RuleBody","newRuleId","deleteRuleConsequentRequest","deleteRuleAntecedentRequest","setNewRuleCondition","setNewStartValue","setNewStopValue","RuleFooter","handleAddRuleConsequentPopUp","handleAddRuleAntecedentPopUp","ruleIdx","antecedent","map","setRuleAntecedentRequest","consequent","setRuleConsequentRequest","handleModify","deleteRuleRequest","RuleConsequentDetails","RuleAntecedentDetails","consequents","idx","element","if_value","else_value","visibility","device_id","antecedents","element_idx","SetRuleCondition","condition","SetStartValueRuleAntecedent","start_value","SetStopValueRuleAntecedent","stop_value","oldCondition","elementId","oldValue","includes","SetStartValueTimer","min","max","step","SetStopValueTimer","AddRuleConsequentProcess","addRuleConsequentPopUp","AddRuleConsequentDevice","setConsequentRuleLocal","i","consequentRule","consequentsId","item","c","newConsequent","AddRuleAntecedentProcess","addRuleAntecedentPopUp","AddRuleAntecedentsDevice","setAntecedentRuleLocal","antecedentRule","antecedentsId","newAntecedent","ViewRules","ItemList","setNewRule","getRuleById","ruleIdList","index","indexOf","ViewAntecedents","handleDeviceAntecedentPopUp","setNewAntecedent","getAntecedentById","deviceIdList","ViewConsequents","handleDeviceConsequentPopUp","setNewConsequent","getConsequentById","DeviceAntecedentPopUp","checkDeviceNameFunction","devices","checkDeviceName","device","antecedentIdx","rulesName","rulesId","rulesIdList","ruleId","ruleIndex","GetRulesName","deviceAntecedentPopUp","modifyDevice","antecedentName","checkName","modifyAntecedentName","DeviceDetails","antecedentId","modifyAntecedentSetting","getDeviceMeasureRequest","updateDeviceRequest","handleModifyDevice","deleteDeviceRequest","deviceId","today","Date","time","getHours","getMinutes","getSeconds","setting","parseInt","measure_perc","measure","toFixed","ModifySetting","newSetting","RegisterDeviceProcess","registerDeviceError","newDeviceId","deviceRecognition","registerDevicePopUp","handleRegisterDevicePopUp","NewDeviceIdRegistration","CheckRegisterDeviceRecognition","newDevice","registerDeviceRequest","deviceInitialization","DeviceConsequentPopUp","consequentIdx","deviceConsequentPopUp","consequentName","modifyConsequentName","consequentId","App","getAllDeviceIdRegistered","allDeviceId","getAntecedents","params","user_id","getConsequents","getRules","newRule","newMeasure","rule_name","post","newRulesList","concat","rule_id","device_name","registerNewDeviceLocal","newAntecedents","newIndex","newConsequents","delete","NewRules","splice","deleteRuleConsequentLocal","idx_rule","idx_consequent","deleteRuleAntecedentLocal","idx_antecedent","rulesList","push","newCondition","newStart","newStop","antecendents","handleMenuPopUp","menuPopUp","handleLogOut","logout","defaults","headers","common","ButtonMenu","base_url","Main","PrivateRoute","path","query","URLSearchParams","useLocation","search","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.c6639f15.chunk.js","sourcesContent":["import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class UserLoginProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"\",\r\n            password: \"\"\r\n        }\r\n    }\r\n\r\n    setUserName = (userName) => {\r\n        this.setState({ userName: userName }, () => { this.render() })\r\n    }\r\n    setPassword = (password) => {\r\n        this.setState({ password: password }, () => { this.render() })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.userLoginPopUp} onHide={() => this.props.handleLoginPopUp()}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        \"LOGIN\"\r\n                        </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div>\r\n                        <form name=\"login\">\r\n                            <label htmlFor=\"name\">User Name: </label>\r\n                            <input type=\"text\" id=\"name\" name=\"name\"\r\n                                onChange={(e) => {\r\n                                    this.props.handleCheckUserLoginCorrect(true);\r\n                                    const NewName = e.target.value;\r\n                                    this.setUserName(NewName)\r\n                                }}\r\n                            />\r\n                            <br></br>\r\n                            <label htmlFor=\"password\">Password: </label>\r\n                            <input type=\"text\" id=\"password\" name=\"password\"\r\n                                onChange={(e) => {\r\n                                    this.props.handleCheckUserLoginCorrect(true);\r\n                                    const password = e.target.value;\r\n                                    this.setPassword(password)\r\n                                }}\r\n                            />\r\n                        </form>\r\n                    </div>\r\n                    <div>\r\n                        <p style={{ display: this.props.checkUserLoginCorrect ? 'none' : 'block' }}> Error: User Name or Password are not correct!</p>\r\n                    </div>\r\n\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <div>\r\n                        <button onClick={() => {\r\n                            this.props.UserLoginRequest(this.state.userName, this.state.password);\r\n                        }}>\r\n                            LOGIN\r\n                        </button>\r\n                    </div>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class UserRegisterProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkuserName: false,\r\n            userName: \"\",\r\n            password:\"\"\r\n        }\r\n    }\r\n\r\n    setUserName = (userName) => {\r\n        this.setState({ userName: userName }, () => { this.render() })\r\n    }\r\n    setPassword = (password) => {\r\n        this.setState({ password: password }, () => { this.render() })\r\n    }\r\n\r\n    checkuserNameFunction = (newName) => {\r\n        const userNameList = this.props.userNameList;\r\n        var checkuserName = false;\r\n        if (userNameList.some(username => username === newName)) {\r\n            checkuserName = true;\r\n        }\r\n        this.setState({\r\n            checkuserName: checkuserName\r\n        }, () => { this.render() });\r\n\r\n        return checkuserName\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.userRegisterPopUp} onHide={() => this.props.handleRegisterPopUp()}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        \"REGISTER\"\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div>\r\n                        <form name=\"login\">\r\n                            <label htmlFor=\"name\">User Name: </label>\r\n                            <input type=\"text\" id=\"name\" name=\"name\"\r\n                                onChange={(e) => {\r\n                                    const NewName = e.target.value;\r\n                                    var check = this.checkuserNameFunction(NewName);\r\n                                    if (!check) {\r\n                                        this.setUserName(NewName)\r\n                                    }\r\n                                }} />\r\n                            <br></br>\r\n                            <label htmlFor=\"password\">Password: </label>\r\n                            <input type=\"text\" id=\"password\" name=\"password\"\r\n                                onChange={(e) => {\r\n                                    const password = e.target.value;\r\n                                    this.setPassword(password)\r\n                                }} />\r\n                        </form>\r\n                    </div>\r\n                    <div>\r\n                        <p style={{ display: this.state.checkuserName ? 'block' : 'none' }}> Error: User Name already exist. Choose another name!</p>\r\n                    </div>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <div>\r\n                        <button onClick={() => {\r\n                            if (!this.state.checkuserName && this.state.userName.length > 1 && this.state.password.length > 1) {\r\n                                this.props.UserRegistrationRequest(this.state.userName, this.state.password);\r\n                            }\r\n                        }}>\r\n                            REGISTER\r\n                        </button>\r\n                    </div>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport axios from 'axios';\r\nimport UserLoginProcess from './UserLoginProcess'\r\nimport UserRegisterProcess from './UserRegisterProcess'\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nvar jwt = require('jwt-simple');\r\n\r\nexport default class UserAccessProcess extends React.Component {\r\n    constructor(props) {\r\n        \r\n        super(props);\r\n        this.state = {\r\n            userNameList: [],\r\n            userLoginPopUp: false,\r\n            userRegisterPopUp: false,\r\n            userName: \"\",\r\n            password: \"\",\r\n            redirect: \"\",\r\n            checkUserLoginCorrect: true,\r\n            idToken: \"\",\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.GetUserNameList();\r\n    }\r\n\r\n    GetUserNameList = () => {\r\n        console.log(\"UserAccess GET user name list\");\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/user/names\";\r\n        axios.get(url)\r\n            .then(res => {\r\n                const userNameList = res.data;\r\n                console.log(\"user name list:\", userNameList)\r\n                this.setState({ userNameList: userNameList }, () => { this.render() })\r\n            })\r\n            .catch(err => console.warn(err));\r\n    }\r\n\r\n    UserLoginRequest = (user_name, password) => {\r\n        console.log(\"UserAccess GET login\")\r\n        var access_token = jwt.encode({user_name: user_name, password: password}, process.env.REACT_APP_JWT_SECRET);\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/user/login?access_token=\"+access_token;\r\n        axios.get(url)\r\n            .then(res => {\r\n                const tokenId = res.data;\r\n                if (tokenId !== \"false\") {\r\n                    this.handleLoginPopUp();\r\n                    this.setState({ redirect: process.env.REACT_APP_PROTECTED_URL + '?userName=' + user_name + '&idToken=' + tokenId }, () => { this.render() });\r\n                }\r\n                else {\r\n                    this.handleCheckUserLoginCorrect(false);\r\n                }\r\n            })\r\n            .catch(err => console.warn(err));\r\n    }\r\n\r\n\r\n    UserRegistrationRequest = (user_name, password) => {\r\n        console.log(\"UserAccess POST registration\")\r\n        var access_token = jwt.encode({user_name: user_name, password: password}, process.env.REACT_APP_JWT_SECRET);\r\n        const url = process.env.REACT_APP_BACKEND_URL + \"/user/registration?access_token=\"+access_token;\r\n        axios.get(url)\r\n            .then(res => {\r\n                const tokenId = res.data;\r\n                this.handleRegisterPopUp();\r\n                this.setState({redirect: process.env.REACT_APP_PROTECTED_URL + '?userName=' + user_name + '&idToken=' + tokenId}, () => { this.render() });\r\n            })\r\n            .catch(err => console.warn(err));\r\n    }\r\n\r\n    handleCheckUserLoginCorrect = (check) => {\r\n        this.setState({ checkUserLoginCorrect: check });\r\n    }\r\n\r\n    handleLoginPopUp = () => {\r\n        this.setState({ userLoginPopUp: !this.state.userLoginPopUp })\r\n    }\r\n    handleRegisterPopUp = () => {\r\n        this.GetUserNameList();\r\n        this.setState({ userRegisterPopUp: !this.state.userRegisterPopUp })\r\n    }\r\n\r\n    setUser = (userName, idToken) => {\r\n        this.setState({\r\n            userName: userName,\r\n            idToken: idToken,\r\n            redirect: process.env.REACT_APP_PROTECTED_URL + '?userName=' + userName + '&idToken=' + idToken\r\n        })\r\n        console.log(\"redirect\")\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirect === \"\") {\r\n            return (\r\n                <div className=\"App\">\r\n                    <div className=\"TopBar\">\r\n                        <div className=\"TopBarElement\">\r\n                            WELCOME PORTAL\r\n                        </div>\r\n                        <div className=\"TopBarElement\">\r\n                            <button variant=\"primary\" onClick={() => { this.handleLoginPopUp() }}>LOGIN</button>\r\n                        </div>\r\n                        <div className=\"TopBarElement\">\r\n                            <button variant=\"primary\" onClick={() => { this.handleRegisterPopUp() }}>REGISTER</button>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <UserLoginProcess\r\n                            userLoginPopUp={this.state.userLoginPopUp}\r\n                            handleLoginPopUp={this.handleLoginPopUp}\r\n                            handleCheckUserLoginCorrect={this.handleCheckUserLoginCorrect}\r\n                            checkUserLoginCorrect={this.state.checkUserLoginCorrect}\r\n                            UserLoginRequest={this.UserLoginRequest}\r\n                            setUser={this.setUser}\r\n                        />\r\n                        <UserRegisterProcess\r\n                            userRegisterPopUp={this.state.userRegisterPopUp}\r\n                            handleRegisterPopUp={this.handleRegisterPopUp}\r\n                            userNameList={this.state.userNameList}\r\n                            UserRegistrationRequest={this.UserRegistrationRequest}\r\n                            setUser={this.setUser}\r\n                        />\r\n\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n                <Redirect to={this.state.redirect} />\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class CreateRuleProcess extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      checkCreateNewRule: false,\r\n      ruleName : \"\",\r\n    }\r\n\r\n  }\r\n\r\n  checkCreateRuleFunction(rules, ruleName) {\r\n    if (rules.some(rule => rule.name === ruleName)) {\r\n      this.setState({\r\n        checkCreateNewRule: true\r\n      })\r\n    }\r\n    else {\r\n      this.setState({\r\n        checkCreateNewRule: false,\r\n        ruleName: ruleName\r\n      })\r\n    }\r\n  }\r\n\r\n  \r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Modal show={this.props.AddRulePopUp} onHide={() => this.props.handleAddRulePopUp()}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>ADD RULE</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <div className=\"GenericModalBody\">\r\n              <p style={{ display: this.state.checkCreateNewRule ? 'block' : 'none' }}> Error: rule name already exist! Choose another name.</p>\r\n              <form>\r\n                <label htmlFor=\"ruleName\">RULE NAME: </label>\r\n                <input name=\"ruleName\" id=\"ruleName\" type=\"text\"\r\n                  onChange={(e) => {\r\n                    const ruleName = e.target.value;\r\n                    this.checkCreateRuleFunction(this.props.rules, ruleName);\r\n                  }}\r\n                />\r\n              </form>\r\n            </div>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <button onClick={() => {\r\n              if (!this.state.checkCreateNewRule) {\r\n                const ruleName = this.state.ruleName\r\n                this.props.createRuleRequest(ruleName);\r\n              }\r\n            }}>\r\n              NEXT\r\n                </button>\r\n            <button onClick={() => this.props.handleAddRulePopUp()}>Close</button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </div >)\r\n  }\r\n\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class SetRuleProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ruleBody: false,\r\n            checkRuleName: false,\r\n            updateName: false,\r\n            classButtonRuleSelection: \"AntecedentRuleSelection\"\r\n        }\r\n    }\r\n\r\n\r\n\r\n    AntecedentRulePopUpBody() {\r\n        this.setState({ ruleBody: false, classButtonRuleSelection: \"AntecedentRuleSelection\" })\r\n    }\r\n    ConsequentRulePopUpBody() {\r\n        this.setState({ ruleBody: true, classButtonRuleSelection: \"ConsequentRuleSelection\" })\r\n    }\r\n\r\n    checkRuleNameFunction = (rules, ruleName) => {\r\n        var checkRuleName = false;\r\n        if (rules.some(rule => rule.name === ruleName)) {\r\n            checkRuleName = true;\r\n        }\r\n        this.setState({\r\n            checkRuleName: checkRuleName\r\n        }, () => { this.render() });\r\n\r\n        return checkRuleName\r\n    }\r\n\r\n    updateRuleName = (update) => {\r\n        this.setState({ updateName: update })\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.rules.length > 0) {\r\n            return (\r\n                <div className=\"SetRulePopUp\">\r\n                    <Modal show={this.props.setRulePopUp} onHide={() => { this.props.handleSetRulePopUp(); this.AntecedentRulePopUpBody() }}>\r\n                        <Modal.Header closeButton>\r\n                            <Modal.Title>\r\n                                <div>\r\n                                    <p style={{ display: this.state.checkRuleName ? 'block' : 'none' }}> Error: rule name already exist! Choose another name.</p>\r\n                                    {this.props.modify ? ModifyNewRuleName(this.props, this.checkRuleNameFunction, this.updateRuleName) : \"Rule name: \" + this.props.newRuleName}\r\n                                </div>\r\n                                <div className=\"RuleEvaliation\">\r\n                                    Evaluation: {this.props.rules[this.props.newRuleIdx].evaluation}\r\n                                </div>\r\n                                <div className=\"RuleSectionButton\">\r\n                                    <button className={this.state.classButtonRuleSelection} type=\"button\" id=\"ruleAntecedentButton\" onClick={() => { this.AntecedentRulePopUpBody() }}>ANTECEDENT</button>\r\n                                    <button className={this.state.classButtonRuleSelection} id=\"ruleConsequentButton\" onClick={() => { this.ConsequentRulePopUpBody() }}>CONSEQUENT</button>\r\n                                </div>\r\n                            </Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body>\r\n                            <RuleBody\r\n                                ruleBody={this.state.ruleBody}\r\n                                rules={this.props.rules}\r\n                                newRuleId={this.props.newRuleId}\r\n                                newRuleIdx={this.props.newRuleIdx}\r\n                                deleteRuleConsequentRequest={this.props.deleteRuleConsequentRequest}\r\n                                deleteRuleAntecedentRequest={this.props.deleteRuleAntecedentRequest}\r\n                                modify={this.props.modify}\r\n                                setNewRuleCondition={this.props.setNewRuleCondition}\r\n                                setNewStartValue={this.props.setNewStartValue}\r\n                                setNewStopValue={this.props.setNewStopValue}\r\n                            />\r\n                        </Modal.Body>\r\n                        <Modal.Footer>\r\n                            <RuleFooter\r\n                                ruleBody={this.state.ruleBody}\r\n                                modify={this.props.modify}\r\n                                handleSetRulePopUp={this.props.handleSetRulePopUp}\r\n                                handleAddRuleConsequentPopUp={this.props.handleAddRuleConsequentPopUp}\r\n                                handleAddRuleAntecedentPopUp={this.props.handleAddRuleAntecedentPopUp}\r\n                            />\r\n                            <button onClick={() => {\r\n                                if (this.props.modify) {\r\n                                    const ruleIdx = this.props.newRuleIdx;\r\n                                    const rule = this.props.rules[ruleIdx]\r\n                                    if (this.state.updateName) {\r\n                                        this.updateRuleName(false);\r\n                                        this.props.updateRuleName();\r\n                                    }\r\n                                    rule.antecedent.map(antecedent => {\r\n                                        this.props.setRuleAntecedentRequest(antecedent);\r\n                                        return null;\r\n                                    });\r\n                                    rule.consequent.map(consequent => {\r\n                                        this.props.setRuleConsequentRequest(consequent);\r\n                                        return null;\r\n                                    });\r\n                                    this.props.handleModify();\r\n                                }\r\n                                else {\r\n                                    this.props.handleModify();\r\n                                }\r\n\r\n                            }}>\r\n                                {this.props.modify ? 'Save' : 'Modify'}\r\n                            </button>\r\n                            <button onClick={() => {\r\n                                if (this.props.modify) {\r\n                                    this.props.handleModify();\r\n                                    this.props.handleSetRulePopUp();\r\n                                    this.AntecedentRulePopUpBody();\r\n                                    this.props.deleteRuleRequest(this.props.newRuleId, this.props.newRuleIdx);\r\n                                } else {\r\n                                    this.AntecedentRulePopUpBody();\r\n                                    this.props.handleSetRulePopUp();\r\n                                }\r\n                            }}>\r\n                                {this.props.modify ? 'Delete' : 'Close'}\r\n                            </button>\r\n                        </Modal.Footer>\r\n                    </Modal>\r\n                </div >\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n\r\n                </div>\r\n            )\r\n        }\r\n\r\n    }\r\n}\r\n\r\nfunction ModifyNewRuleName(props, checkRuleNameFunction, updateRuleName) {\r\n    return (\r\n        <form name=\"ItemName\">\r\n            <label htmlFor=\"name\">Rule: </label>\r\n            <input type=\"text\" id=\"name\" name=\"name\"\r\n                defaultValue={props.newRuleName}\r\n                onChange={(e) => {\r\n                    const NewName = e.target.value;\r\n                    var checkRuleName = checkRuleNameFunction(props.rules, NewName)\r\n                    updateRuleName(true)\r\n                    if (!checkRuleName) {\r\n                        props.modifyRuleName(NewName)\r\n                    }\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\n\r\nfunction RuleBody(props) {\r\n    if (props.ruleBody) {\r\n        return (\r\n            <div className=\"RuleConsequentDetail\">\r\n                <div>\r\n                    <table id=\"rule\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>DEVICE</th>\r\n                                <th>IF</th>\r\n                                <th>ELSE</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <RuleConsequentDetails\r\n                                rules={props.rules}\r\n                                newRuleId={props.newRuleId}\r\n                                newRuleIdx={props.newRuleIdx}\r\n                                deleteRuleConsequentRequest={props.deleteRuleConsequentRequest}\r\n                                modify={props.modify}\r\n\r\n                            />\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <div className=\"RuleAntecedentDetail\">\r\n                <div>\r\n                    <table id=\"rule\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>DEVICE</th>\r\n                                <th>CONDITION</th>\r\n                                <th>START</th>\r\n                                <th>STOP</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <RuleAntecedentDetails\r\n                                rules={props.rules}\r\n                                newRuleId={props.newRuleId}\r\n                                newRuleIdx={props.newRuleIdx}\r\n                                deleteRuleAntecedentRequest={props.deleteRuleAntecedentRequest}\r\n                                modify={props.modify}\r\n                                setNewRuleCondition={props.setNewRuleCondition}\r\n                                setNewStartValue={props.setNewStartValue}\r\n                                setNewStopValue={props.setNewStopValue}\r\n                            />\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction RuleConsequentDetails(props) {\r\n    const ruleIdx = props.newRuleIdx;\r\n    const consequents = props.rules[ruleIdx].consequent;\r\n    var idx = -1;\r\n    return (consequents.map(element => {\r\n        idx++;\r\n        return (\r\n            <tr key={idx}>\r\n                <td>{element.name}</td>\r\n                <td>{element.if_value}</td>\r\n                <td>{element.else_value}</td>\r\n                <td className=\"deleteRuleRow\" style={{ visibility: props.modify ? 'visible' : 'hidden' }}>\r\n                    <button onClick={() => {\r\n                        props.deleteRuleConsequentRequest(props.newRuleId, element.device_id);\r\n                    }}>\r\n                        delete\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    })\r\n    )\r\n}\r\n\r\nfunction RuleAntecedentDetails(props) {\r\n    const ruleIdx = props.newRuleIdx;\r\n    const antecedents = props.rules[ruleIdx].antecedent;\r\n    var element_idx = -1;\r\n    return (antecedents.map(element => {\r\n        element_idx++;\r\n        return (\r\n            <tr key={element_idx}>\r\n                <td>{element.name}</td>\r\n                <td>{props.modify ? SetRuleCondition(props, element_idx, element.condition) : element.condition}</td>\r\n                <td>{props.modify ? SetStartValueRuleAntecedent(props, element.device_id, element_idx, element.start_value) : element.start_value}</td>\r\n                <td>{props.modify ? SetStopValueRuleAntecedent(props, element.device_id, element_idx, element) : element.stop_value}</td>\r\n                <td className=\"deleteRuleRow\" style={{ visibility: props.modify ? 'visible' : 'hidden' }}>\r\n                    <button onClick={() => { props.deleteRuleAntecedentRequest(props.newRuleId, element.device_id); }}>\r\n                        delete\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    })\r\n    )\r\n}\r\n\r\nfunction RuleFooter(props) {\r\n    if (props.ruleBody) {\r\n        return (\r\n            <button style={{ display: props.modify ? 'block' : 'none' }}\r\n                onClick={() => {\r\n                    props.handleSetRulePopUp();\r\n                    props.handleAddRuleConsequentPopUp();\r\n                }}>\r\n                Add Consequent\r\n            </button>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <button style={{ display: props.modify ? 'block' : 'none' }}\r\n                onClick={() => {\r\n                    props.handleSetRulePopUp();\r\n                    props.handleAddRuleAntecedentPopUp();\r\n                }}>\r\n                Add Antecedent\r\n            </button>\r\n        )\r\n    }\r\n}\r\n\r\nfunction SetRuleCondition(props, element_idx, oldCondition) {\r\n    return (\r\n        <form name=\"ruleCondition\">\r\n            <select name=\"condition\"\r\n                id=\"condition\"\r\n                defaultValue={oldCondition}\r\n                onChange={(e) => {\r\n                    props.setNewRuleCondition(props.newRuleIdx, element_idx, e.target.value)\r\n                }}>\r\n                <option value=\">\">{'>'}</option>\r\n                <option value=\"<\">{'<'}</option>\r\n                <option value=\"between\">'between'</option>\r\n            </select>\r\n        </form>\r\n    )\r\n}\r\n\r\nfunction SetStartValueRuleAntecedent(props, elementId, element_idx, oldValue) {\r\n    if (elementId.includes(\"timer\")) {\r\n        return SetStartValueTimer(props, element_idx, oldValue)\r\n    }\r\n    else {\r\n        return (\r\n            <form name=\"ruleAntecedentStartValue\">\r\n                <input id=\"StartValue\"\r\n                    name=\"StartValue\"\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max=\"100\"\r\n                    step=\"5\"\r\n                    defaultValue={oldValue}\r\n                    onChange={(e) => {\r\n                        if (e.target.value > 100) {\r\n                            e.target.value = 100;\r\n                        }\r\n                        else if (e.target.value < 0) {\r\n                            e.target.value = 0;\r\n                        }\r\n                        props.setNewStartValue(props.newRuleIdx, element_idx, e.target.value);\r\n                    }}\r\n                />\r\n            </form>\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction SetStopValueRuleAntecedent(props, elementId, element_idx, antecedent) {\r\n    if (elementId.includes(\"timer\")) {\r\n        return SetStopValueTimer(props, element_idx, antecedent)\r\n    }\r\n    else {\r\n        const condition = antecedent.condition;\r\n        if (condition === \"between\") {\r\n            return (\r\n                <form name=\"ruleAntecedentStopValue\">\r\n                    <input id=\"StopValue\"\r\n                        name=\"StopValue\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        step=\"5\"\r\n                        defaultValue={antecedent.stop_value}\r\n                        onChange={(e) => {\r\n                            if (e.target.value > 100) {\r\n                                e.target.value = 100;\r\n                            }\r\n                            else if (e.target.value < 0) {\r\n                                e.target.value = 0;\r\n                            }\r\n                            props.setNewStopValue(props.newRuleIdx, element_idx, e.target.value);\r\n                        }}\r\n                    />\r\n                </form>\r\n            )\r\n        }\r\n        else {\r\n            return (<div>{antecedent.stop_value}</div>)\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction SetStartValueTimer(props, element_idx, oldValue) {\r\n    return (\r\n        <form name=\"ruleAntecedentStartValue\">\r\n            <input id=\"time_start\"\r\n                name=\"time_start\"\r\n                type=\"time\"\r\n                defaultValue={oldValue}\r\n                onChange={(e) => {\r\n                    props.setNewStartValue(props.newRuleIdx, element_idx, e.target.value);\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\nfunction SetStopValueTimer(props, element_idx, antecedent) {\r\n    if (antecedent.condition === \"between\") {\r\n        return (\r\n            <form name=\"ruleAntecedentStopValue\">\r\n                <input id=\"time_stop\"\r\n                    name=\"time_stop\"\r\n                    type=\"time\"\r\n                    defaultValue={antecedent.stop_value}\r\n                    onChange={(e) => {\r\n                        props.setNewStopValue(props.newRuleIdx, element_idx, e.target.value);\r\n                    }}\r\n                />\r\n            </form>\r\n        )\r\n    }\r\n    else {\r\n        return (<div>{antecedent.stop_value}</div>)\r\n    }\r\n\r\n}\r\n\r\n","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class AddRuleConsequentProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.props.addRuleConsequentPopUp}\r\n                    onHide={() => {\r\n                        this.props.handleAddRuleConsequentPopUp();\r\n                        this.props.handleSetRulePopUp();\r\n                    }}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>\r\n                            <div>SWITCHES</div>\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"GenericModalBody\">\r\n                            <table>\r\n                                <tbody>\r\n                                    <AddRuleConsequentDevice\r\n                                        newRuleIdx={this.props.newRuleIdx}\r\n                                        rules={this.props.rules}\r\n                                        consequents={this.props.consequents}\r\n                                        setConsequentRuleLocal={this.props.setConsequentRuleLocal}\r\n                                    />\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            this.props.handleAddRuleConsequentPopUp();\r\n                            this.props.handleSetRulePopUp();\r\n                        }}>\r\n                            Close\r\n                        </button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction AddRuleConsequentDevice(props) {\r\n    var i = -1;\r\n    const ruleIdx = props.newRuleIdx;\r\n    const consequentRule = props.rules[ruleIdx].consequent;\r\n    var consequentsId = [];\r\n    if (consequentRule.length > 0) {\r\n        consequentsId = consequentRule.map(item => {\r\n            return (item.device_id)\r\n        })\r\n    }\r\n\r\n    return (\r\n        props.consequents.map(item => {\r\n            if (!consequentsId.some(c => c === item.id)) {\r\n                i++;\r\n                return (\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <button onClick={() => {\r\n                                const newConsequent = { device_id: item.id, name: item.name, if_value: \"on\", else_value: \"off\" };\r\n                                props.setConsequentRuleLocal(props.newRuleIdx, newConsequent);\r\n                            }}>\r\n                                {item.name}\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        })\r\n    )\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\nexport default class AddRuleAntecedentProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.props.addRuleAntecedentPopUp}\r\n                    onHide={() => {\r\n                        this.props.handleAddRuleAntecedentPopUp();\r\n                        this.props.handleSetRulePopUp();\r\n                    }}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>\r\n                            <div>SENSORS</div>\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"GenericModalBody\">\r\n                            <table>\r\n                                <tbody>\r\n                                    <AddRuleAntecedentsDevice\r\n                                        newRuleIdx={this.props.newRuleIdx}\r\n                                        rules={this.props.rules}\r\n                                        antecedents={this.props.antecedents}\r\n                                        setAntecedentRuleLocal={this.props.setAntecedentRuleLocal}\r\n                                    />\r\n                                </tbody>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            this.props.handleAddRuleAntecedentPopUp();\r\n                            this.props.handleSetRulePopUp();\r\n                        }}>\r\n                            Close\r\n                        </button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction AddRuleAntecedentsDevice(props) {\r\n    var i = -1;\r\n    const ruleIdx = props.newRuleIdx;\r\n    const antecedentRule = props.rules[ruleIdx].antecedent;\r\n    var antecedentsId = [];\r\n    if (antecedentRule.length > 0) {\r\n        antecedentsId = antecedentRule.map(item => {\r\n            return (item.device_id)\r\n        })\r\n    }\r\n\r\n    return (\r\n        props.antecedents.map(item => {\r\n            if (!antecedentsId.some(c => c === item.id)) {\r\n                i++;\r\n                return (\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <button onClick={() => {\r\n                                var newAntecedent = { device_id: item.id, name: item.name, start_value: \"0\", stop_value: \"0\", condition: \"between\" };\r\n                                if (item.id.includes(\"timer\")) {\r\n                                    newAntecedent.start_value=\"00:00\";\r\n                                    newAntecedent.stop_value=\"00:00\"\r\n                                }\r\n                                props.setAntecedentRuleLocal(props.newRuleIdx, newAntecedent);\r\n                            }}>\r\n                                {item.name}\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        })\r\n    )\r\n}","import React from 'react';\r\n\r\n\r\n\r\nexport default function ViewRules(props) {\r\n    return (\r\n        <div className=\"RuleContainer\">\r\n            <div className=\"MyList\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>\r\n                                RULE ENGINE\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <ItemList\r\n                            handleSetRulePopUp={props.handleSetRulePopUp}\r\n                            setNewRule={props.setNewRule}\r\n                            rules={props.rules}\r\n                            getRuleById={props.getRuleById}\r\n                        />\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nfunction ItemList(props) {\r\n    if (props.rules.length > 0) {\r\n        const ruleIdList = props.rules.map(rule => { return rule.id })\r\n        return (\r\n            props.rules.map(rule => {\r\n                var index = ruleIdList.indexOf(rule.id)\r\n                return (\r\n                    <tr key={index}>\r\n                        <td>\r\n                            <div>\r\n                                <button variant=\"primary\" onClick={() => {\r\n                                    props.getRuleById(rule.id);\r\n                                    props.setNewRule(rule.id, rule.name, index);\r\n                                    props.handleSetRulePopUp();\r\n                                }}>\r\n                                    {rule.name}\r\n                                </button>\r\n                            </div >\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            })\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <tr key={0}>\r\n                <td>\r\n                    \r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n","import React from 'react';\r\n\r\n\r\nexport default function ViewAntecedents(props) {\r\n    return (\r\n        <div className=\"AntecedentContainer\">\r\n            <div className=\"MyList\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>\r\n                                SENSORS\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <ItemList\r\n                            antecedents={props.antecedents}\r\n                            handleDeviceAntecedentPopUp={props.handleDeviceAntecedentPopUp}\r\n                            setNewAntecedent={props.setNewAntecedent}\r\n                            getAntecedentById={props.getAntecedentById}\r\n                        />\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ItemList(props) {\r\n    if (props.antecedents.length > 0) {\r\n        const deviceIdList = props.antecedents.map(antecedent => { return antecedent.id });\r\n        return (\r\n            props.antecedents.map(antecedent => {\r\n                var index = deviceIdList.indexOf(antecedent.id)\r\n                return (\r\n                    <tr key={index}>\r\n                        <td>\r\n                            <div>\r\n                                <button variant=\"primary\" onClick={() => {\r\n                                    props.getAntecedentById(antecedent.id);\r\n                                    props.setNewAntecedent(antecedent.id, antecedent.name, index);\r\n                                    props.handleDeviceAntecedentPopUp();\r\n                                }}>\r\n                                    {antecedent.name}\r\n                                </button>\r\n                            </div >\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            })\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <tr key={0}>\r\n                <td>\r\n\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n","import React from 'react';\r\n\r\n\r\n\r\nexport default function ViewConsequents(props) {\r\n    return (\r\n        <div className=\"ConsequentContainer\">\r\n            <div className=\"MyList\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>\r\n                                SWITCHES\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <ItemList\r\n                            consequents={props.consequents}\r\n                            handleDeviceConsequentPopUp={props.handleDeviceConsequentPopUp}\r\n                            setNewConsequent={props.setNewConsequent}\r\n                            getConsequentById={props.getConsequentById}\r\n                        />\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ItemList(props) {\r\n    if (props.consequents.length > 0) {\r\n        const deviceIdList = props.consequents.map(consequent => { return consequent.id });\r\n        return (\r\n            props.consequents.map(consequent => {\r\n                var index = deviceIdList.indexOf(consequent.id)\r\n                return (\r\n                    <tr key={index}>\r\n                        <td>\r\n                            <div>\r\n                                <button variant=\"primary\" onClick={() => {\r\n                                    props.getConsequentById(consequent.id);\r\n                                    props.setNewConsequent(consequent.id, consequent.name, index);\r\n                                    props.handleDeviceConsequentPopUp();\r\n                                }}>\r\n                                    {consequent.name}\r\n                                </button>\r\n                            </div >\r\n                        </td>\r\n                    </tr>\r\n                )\r\n            })\r\n        );\r\n    }\r\n    else {\r\n        return (\r\n            <tr key={0}>\r\n                <td>\r\n                    \r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nexport default class DeviceAntecedentPopUp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkDeviceName: false\r\n        }\r\n    }\r\n\r\n    checkDeviceNameFunction = (devices, newName) => {\r\n        var checkDeviceName = false;\r\n        if (devices.some(device => device.name === newName)) {\r\n            checkDeviceName = true;\r\n        }\r\n        this.setState({\r\n            checkDeviceName: checkDeviceName\r\n        }, () => { this.render() });\r\n\r\n        return checkDeviceName\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.antecedents.length > 0) {\r\n            const index = this.props.antecedentIdx;\r\n            const rulesName = GetRulesName(this.props);\r\n            return (\r\n                <Modal show={this.props.deviceAntecedentPopUp} onHide={() => this.props.handleDeviceAntecedentPopUp()}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>\r\n                            <p style={{ display: this.state.checkDeviceName ? 'block' : 'none' }}> Error: device name already exist! Choose another name.</p>\r\n                            {this.props.modifyDevice ? ModifyName(this.props, this.checkDeviceNameFunction) : this.props.antecedentName}\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div>\r\n                            <DeviceDetails\r\n                                antecedentIdx={this.props.antecedentIdx}\r\n                                antecedentId={this.props.antecedentId}\r\n                                antecedentName={this.props.antecedentName}\r\n                                antecedents={this.props.antecedents}\r\n                                index={index}\r\n                                rulesName={rulesName}\r\n                                modifyAntecedentName={this.props.modifyAntecedentName}\r\n                                modifyAntecedentSetting={this.props.modifyAntecedentSetting}\r\n                                modifyDevice={this.props.modifyDevice}\r\n                            />\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            this.props.getDeviceMeasureRequest(\"antecedent\");\r\n                        }}>\r\n                            Refresh\r\n                        </button>\r\n                        <button onClick={() => {\r\n                            if (this.props.modifyDevice) {\r\n                                this.props.updateDeviceRequest(\"antecedent\");\r\n                                this.props.handleModifyDevice();\r\n                            }\r\n                            else {\r\n                                this.props.handleModifyDevice();\r\n                            }\r\n                        }\r\n                        }>\r\n                            {this.props.modifyDevice ? 'Save' : 'Modify'}\r\n                        </button>\r\n                        <button\r\n                            onClick={() => {\r\n                                if (this.props.modifyDevice) {\r\n                                    this.props.handleModifyDevice();\r\n                                    this.props.handleDeviceAntecedentPopUp();\r\n                                    this.props.deleteDeviceRequest(\"antecedent\");\r\n                                }\r\n                                else {\r\n                                    this.props.handleDeviceAntecedentPopUp();\r\n                                }\r\n\r\n                            }}>\r\n                            {this.props.modifyDevice ? 'Delete' : 'Close'}\r\n                        </button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            )\r\n        }\r\n        else {\r\n            return (<div></div>)\r\n        }\r\n    }\r\n}\r\n\r\nfunction GetRulesName(props) {\r\n    const index = props.antecedentIdx;\r\n    const rulesId = props.antecedents[index].rules;\r\n    try {\r\n        const rulesId = props.antecedents[index].rules;\r\n        const rules = props.rules;\r\n        if (rulesId.length > 0 && rules.length > 0) {\r\n            const rulesIdList = rules.map(rule => { return rule.id });\r\n            const rulesNameList = rulesId.map(ruleId => {\r\n                var ruleIndex = rulesIdList.indexOf(ruleId);\r\n                return (<li key={ruleId}><button onClick={() => {\r\n                    props.setNewRule(ruleId, rules[ruleIndex].name, ruleIndex);\r\n                    props.handleDeviceAntecedentPopUp();\r\n                    props.handleSetRulePopUp();\r\n                }}>\r\n                    {rules[ruleIndex].name}\r\n                </button>\r\n                </li>)\r\n            })\r\n            return (rulesNameList)\r\n        }\r\n        else {\r\n            return (<li></li>)\r\n        }\r\n    }\r\n    catch (e) {\r\n        const rulesIdList = rulesId.map(ruleId => {\r\n            return (<li key={ruleId}>{ruleId}</li>)\r\n        })\r\n        return rulesIdList\r\n    }\r\n\r\n}\r\n\r\nfunction DeviceDetails(props) {\r\n    const deviceId = props.antecedentId;\r\n    if (deviceId.includes(\"timer\")) {\r\n        var today = new Date();\r\n        const time = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\r\n        return (\r\n            <ol>\r\n                <li key=\"type\">Type: sensor - timer</li>\r\n                <li key=\"id\">Id: {props.antecedentId}</li>\r\n                <li key=\"measure\">Measure: {time}</li>\r\n                <li key=\"rules\">Rules:</li>\r\n                <ul>\r\n                    {props.rulesName}\r\n                </ul>\r\n            </ol>\r\n        )\r\n\r\n    }\r\n    else if (deviceId.includes(\"PHOTOCELL\") || deviceId.includes(\"SOILMOISTURE\")) {\r\n        const setting = parseInt(props.antecedents[props.index].setting);\r\n        const measure = parseInt(props.antecedents[props.index].measure);\r\n        const measure_perc = ((measure * 100) / setting).toFixed(1)\r\n        return (\r\n            <ol>\r\n                <li key=\"type\">Type: sensor - {deviceId.includes(\"PHOTOCELL\") ? \"photocell\" : \"soil moisture\"}</li>\r\n                <li key=\"id\">Id: {props.antecedentId}</li>\r\n                <li key=\"measure\">Measure: {measure_perc} %</li>\r\n                <li key=\"rules\">Rules:</li>\r\n                <ul>\r\n                    {props.rulesName}\r\n                </ul>\r\n            </ol>\r\n\r\n        )\r\n\r\n    }\r\n    else if (deviceId.includes(\"WATERLEVEL\")) {\r\n        const setting = parseInt(props.antecedents[props.index].setting);\r\n        const measure = parseInt(props.antecedents[props.index].measure);\r\n        const measure_perc = ((measure * 100) / setting).toFixed(1)\r\n        return (\r\n            <ol>\r\n                <li key=\"type\">Type: sensor - water level</li>\r\n                <li key=\"id\">id: {props.antecedentId}</li>\r\n                <li key=\"measure\">measure: {measure_perc} %</li>\r\n                <li key=\"setting\">{props.modifyDevice ? ModifySetting(props) : \"Setting:\" + props.antecedents[props.index].setting}</li>\r\n                <li key=\"rules\">rules:</li>\r\n                <ul>\r\n                    {props.rulesName}\r\n                </ul>\r\n            </ol>\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction ModifyName(props, checkDeviceNameFunction) {\r\n    return (\r\n        <form name=\"ItemName\">\r\n            <label htmlFor=\"name\">Name: </label>\r\n            <input type=\"text\" id=\"name\" name=\"name\"\r\n                defaultValue={props.antecedentName}\r\n                onChange={(e) => {\r\n                    const NewName = e.target.value;\r\n                    var checkName = checkDeviceNameFunction(props.antecedents, NewName);\r\n                    if (!checkName) {\r\n                        props.modifyAntecedentName(NewName)\r\n                    }\r\n\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}\r\n\r\nfunction ModifySetting(props) {\r\n    const index = props.antecedentIdx;\r\n    return (\r\n        <form name=\"ItemSetting\">\r\n            <label htmlFor=\"setting\">Setting: </label>\r\n            <input type=\"number\" id=\"setting\" name=\"setting\"\r\n                defaultValue={props.antecedents[index].setting}\r\n                onChange={(e) => {\r\n                    const newSetting = e.target.value;\r\n                    props.modifyAntecedentSetting(newSetting);\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nexport default class RegisterDeviceProcess extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            registerDeviceError: false,\r\n            newDeviceId: \"\"\r\n        }\r\n    }\r\n\r\n    CheckRegisterDeviceRecognition() {\r\n        const deviceId = this.state.newDeviceId\r\n        var deviceRecognition = false;\r\n        if (deviceId.includes(\"SWITCH\")) {\r\n            deviceRecognition = true;\r\n        }\r\n        else if (deviceId.includes(\"PHOTOCELL\")) {\r\n            deviceRecognition = true\r\n        }\r\n        else if (deviceId.includes(\"WATERLEVEL\")) {\r\n            deviceRecognition = true\r\n        }\r\n        else if (deviceId.includes(\"SOILMOISTURE\")) {\r\n            deviceRecognition = true\r\n        }\r\n        this.setState({registerDeviceError: !deviceRecognition}, ()=>{this.render()})\r\n        return deviceRecognition\r\n    }\r\n\r\n    NewDeviceIdRegistration(newDeviceId){\r\n        this.setState({\r\n            newDeviceId: newDeviceId\r\n        }, ()=>{this.render()})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Modal show={this.props.registerDevicePopUp} onHide={() => this.props.handleRegisterDevicePopUp()}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>ADD DEVICE</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"GenericModalBody\">\r\n                            <p style={{ display: this.state.registerDeviceError ? 'block' : 'none' }} > Error: device Id is not correct!</p>\r\n                            <form>\r\n                                <label htmlFor=\"deviceId\">DEVICE ID: </label>\r\n                                <input name=\"deviceId\" id=\"deviceId\" type=\"text\"\r\n                                    onChange={(e) => {\r\n                                        var newDeviceId = e.target.value;\r\n                                        this.NewDeviceIdRegistration(newDeviceId);\r\n                                    }}\r\n                                />\r\n                            </form>\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            const checkRecognition = this.CheckRegisterDeviceRecognition();\r\n                            if (checkRecognition) {\r\n                                deviceInitialization(this.props, this.state.newDeviceId);\r\n                                this.props.handleRegisterDevicePopUp();\r\n                            }\r\n                        }}>\r\n                            NEXT\r\n                        </button>\r\n                        <button onClick={() => this.props.handleRegisterDevicePopUp()}>Close</button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction deviceInitialization(props, deviceId) {\r\n    var newDevice = null;\r\n    if (deviceId.includes(\"SWITCH\")) {\r\n        newDevice = { id: deviceId, name: \"switch\", measure: \"init\", rules: [] };\r\n        props.registerDeviceRequest(\"consequent\", newDevice);\r\n    }\r\n    else {\r\n        if (deviceId.includes(\"PHOTOCELL\")) {\r\n            newDevice = { id: deviceId, name: \"photocell\", setting: \"1024\", measure: \"init\", rules: [] };\r\n        }\r\n        else if (deviceId.includes(\"WATERLEVEL\")) {\r\n            newDevice = { id: deviceId, name: \"waterlevel\", setting: \"100\", measure: \"init\", rules: [] };\r\n        }\r\n        else if (deviceId.includes(\"SOILMOISTURE\")) {\r\n            newDevice = { id: deviceId, name: \"soilmoisture\", setting: \"1024\", measure: \"init\", rules: [] };\r\n        }\r\n        props.registerDeviceRequest(\"antecedent\", newDevice);\r\n    }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nexport default class DeviceConsequentPopUp extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checkDeviceName: false\r\n        }\r\n    }\r\n\r\n    checkDeviceNameFunction = (devices, newName) => {\r\n        var checkDeviceName = false;\r\n        if (devices.some(device => device.name === newName)) {\r\n            checkDeviceName = true;\r\n        }\r\n        this.setState({\r\n            checkDeviceName: checkDeviceName\r\n        }, () => { this.render() });\r\n\r\n        return checkDeviceName\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.consequents.length > 0) {\r\n            const index = this.props.consequentIdx;\r\n            var rulesName = GetRulesName(this.props);\r\n            return (\r\n                <Modal show={this.props.deviceConsequentPopUp} onHide={() => this.props.handleDeviceConsequentPopUp()}>\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>\r\n                            SWITCH\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div>\r\n                            <p style={{ display: this.state.checkDeviceName ? 'block' : 'none' }}> Error: device name already exist! Choose another name.</p>\r\n                            <ol>\r\n                                <li key=\"name\">{this.props.modifyDevice ? ModifyName(this.props, this.checkDeviceNameFunction) : \"Name: \" + this.props.consequentName}</li>\r\n                                <li key=\"id\">id: {this.props.consequentId}</li>\r\n                                <li key=\"measure\">measure: {this.props.consequents[index].measure}</li>\r\n                                <li key=\"rules\">rules:</li>\r\n                                <ul>\r\n                                    {rulesName}\r\n                                </ul>\r\n                            </ol>\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button onClick={() => {\r\n                            this.props.getDeviceMeasureRequest(\"consequent\");\r\n                        }}>\r\n                            Refresh\r\n                        </button>\r\n                        <button onClick={() => {\r\n                            if (this.props.modifyDevice) {\r\n                                this.props.updateDeviceRequest(\"consequent\");\r\n                                this.props.handleModifyDevice();\r\n                            }\r\n                            else {\r\n                                this.props.handleModifyDevice();\r\n                            }\r\n                        }}>\r\n                            {this.props.modifyDevice ? 'Save' : 'Modify'}\r\n                        </button>\r\n                        <button\r\n                            onClick={() => {\r\n                                if (this.props.modifyDevice) {\r\n                                    this.props.deleteDeviceRequest(\"consequent\");\r\n                                    this.props.handleModifyDevice();\r\n                                    this.props.handleDeviceConsequentPopUp();\r\n                                }\r\n                                else {\r\n                                    this.props.handleModifyDevice();\r\n                                    this.props.handleDeviceConsequentPopUp();\r\n                                }\r\n\r\n                            }}>\r\n                            {this.props.modifyDevice ? 'Delete' : 'Close'}\r\n                        </button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            )\r\n        }\r\n        else {\r\n            return (<div> </div>)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction GetRulesName(props) {\r\n    const index = props.consequentIdx;\r\n    const rulesId = props.consequents[index].rules;\r\n    try {\r\n        const rulesId = props.consequents[index].rules;\r\n        const rules = props.rules;\r\n        if (rulesId.length > 0 && rules.length > 0) {\r\n            const rulesIdList = rules.map(rule => { return rule.id });\r\n            const rulesNameList = rulesId.map(ruleId => {\r\n                var ruleIndex = rulesIdList.indexOf(ruleId);\r\n                return (<li key={ruleId}><button onClick={() => {\r\n                    props.setNewRule(ruleId, rules[ruleIndex].name, ruleIndex);\r\n                    props.handleDeviceConsequentPopUp();\r\n                    props.handleSetRulePopUp();\r\n                }}>\r\n                    {rules[ruleIndex].name}\r\n                </button>\r\n                </li>)\r\n            })\r\n            return (rulesNameList)\r\n        }\r\n        else {\r\n            return (<li></li>)\r\n        }\r\n    }\r\n    catch (e) {\r\n        const rulesIdList = rulesId.map(ruleId => {\r\n            return (<li key={ruleId}>{ruleId}</li>)\r\n        })\r\n        return rulesIdList\r\n    }\r\n\r\n}\r\n\r\nfunction ModifyName(props, checkDeviceNameFunction) {\r\n    return (\r\n        <form name=\"ItemName\">\r\n            <label htmlFor=\"name\">Name: </label>\r\n            <input type=\"text\" id=\"name\" name=\"name\"\r\n                defaultValue={props.consequentName}\r\n                onChange={(e) => {\r\n                    const NewName = e.target.value;\r\n                    var checkName = checkDeviceNameFunction(props.consequents, NewName);\r\n                    if (!checkName) {\r\n                        props.modifyConsequentName(NewName)\r\n                    }\r\n                }}\r\n            />\r\n        </form>\r\n    )\r\n}","import React from 'react';\nimport axios from 'axios';\nimport Modal from 'react-bootstrap/Modal'\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport CreateRuleProcess from './CreateRuleProcess'\nimport SetRuleProcess from './SetRuleProcess'\nimport AddRuleConsequentProcess from './AddRuleConsequentProcess'\nimport AddRuleAntecedentProcess from './AddRuleAntecedentProcess'\nimport ViewRules from './ViewRules'\nimport ViewAntecedents from './ViewAntecedents'\nimport ViewConsequents from './ViewConsequents'\nimport DeviceAntecedentPopUp from './DeviceAntecedentPopUp'\nimport RegisterDeviceProcess from './RegisterDeviceProcess'\nimport DeviceConsequentPopUp from './DeviceConsequentPopUp'\nimport { Redirect } from 'react-router-dom';\n\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    axios.defaults.headers.common['Authorization'] = this.props.idToken;\n    this.state = {\n      menuPopUp: false,\n      AddRulePopUp: false,\n      setRulePopUp: false,\n      addRuleAntecedentPopUp: false,\n      addRuleConsequentPopUp: false,\n      registerDevicePopUp: false,\n\n      newRuleId: 0,\n      newRuleIdx: 0,\n      newRuleName: \"\",\n      modify: false,\n\n      deviceAntecedentPopUp: false,\n      antecedentId: \"\",\n      antecedentName: \"\",\n      antecedentIdx: 0,\n\n      deviceConsequentPopUp: false,\n      consequentId: \"\",\n      consequentName: \"\",\n      consequentIdx: 0,\n\n      modifyDevice: false,\n\n      antecedents: [],\n      consequents: [],\n      rules: [],\n      allDeviceId: [],\n\n      logout: false,\n      \n\n    }\n  }\n\n  componentDidMount() {\n    this.getAntecedents();\n    this.getConsequents();\n    this.getRules();\n  }\n\n  //GET ALL\n  getAllDeviceIdRegistered = () => {\n    console.log('App GET all devices ID registered');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/get/all\";\n    axios.get(url)\n      .then(res => {\n        const data = res.data;\n        this.setState({ allDeviceId: data }, () => { this.render() })\n      })\n      .catch(err => console.warn(err));\n  }\n\n\n  //GET BY USER\n  getAntecedents = () => {\n    console.log('App GET antecedent By User');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/get/antecedents\";\n    axios.get(url, {}, {params:{user_id: this.props.user_id}})\n      .then(res => {\n        const data = res.data;\n        this.setState({ antecedents: data }, () => { this.render() });\n\n      })\n      .catch(err => console.warn(err));\n  }\n  getConsequents = () => {\n    console.log('App GET consequents By User');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/get/consequents\";\n    axios.get(url, {}, {params:{user_id: this.props.user_id}})\n      .then(res => {\n        const data = res.data;\n        this.setState({ consequents: data }, () => { this.render() });\n      })\n      .catch(err => console.warn(err));\n  }\n  getRules = () => {\n    console.log('App GET Rules by user');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/user\";\n    axios.get(url, {}, {params:{user_id: this.props.user_id}})\n      .then(res => {\n        const data = res.data;\n        this.setState({ rules: data }, () => { this.render() });\n      })\n      .catch(err => console.warn(err));\n  }\n\n  //GET BY ID\n  getAntecedentById = (antecedentId) => {\n    console.log('App GET antecedent By Id');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/antecedent/id/\" + antecedentId;\n    axios.get(url)\n      .then(res => {\n        const newAntecedent = res.data;\n        const idx = this.state.antecedentIdx;\n        var antecedents = this.state.antecedents;\n        antecedents[idx] = newAntecedent;\n        this.setState({ antecedents: antecedents }, () => { this.render() });\n      })\n  }\n  getConsequentById = (consequentId) => {\n    console.log('App GET consequent By Id');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/consequent/id/\" + consequentId;\n    axios.get(url)\n      .then(res => {\n        const newConsequent = res.data;\n        var consequents = this.state.consequents;\n        const consequentIdx = this.state.consequentIdx;\n        consequents[consequentIdx] = newConsequent;\n        this.setState({ consequents: consequents }, () => { this.render() });\n      })\n  }\n  getRuleById = (ruleId) => {\n    console.log('App GET Rule By ID');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/id/\" + ruleId;\n    axios.get(url, {}, {params:{user_id: this.props.user_id}})\n      .then(res => {\n        const newRule = res.data;\n        var rules = this.state.rules;\n        const idx = this.state.newRuleIdx;\n        rules[idx] = newRule;\n        this.setState({ rules: rules }, () => { this.render() });\n      })\n      .catch(err => console.warn(err));\n  }\n  getDeviceMeasureRequest = (type) => {\n    console.log('App GET device measure');\n    if (type === \"antecedent\") {\n      const url = process.env.REACT_APP_BACKEND_URL + \"/device/measure/\" + this.state.antecedentId;\n      axios.get(url)\n        .then(res => {\n          const newMeasure = res.data;\n          const index = this.state.antecedentIdx;\n          var antecedents = this.state.antecedents;\n          antecedents[index].measure = newMeasure;\n          this.setState({ antecedents: antecedents }, () => { this.render() });\n        })\n    }\n  }\n\n  //ADD and UPDATE ELEMENTS\n  createRuleRequest = (rule_name) => {\n    console.log('App POST create rule');\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/create/\" + rule_name;\n    axios.post(url,{}, {params:{user_id: this.props.user_id}})\n      .then(res => {\n        const ruleId = res.data;\n        const newRule = { id: ruleId, name: rule_name, antecedent: [], consequent: [] };\n        var rules = this.state.rules;\n        var idx = rules.length;\n        const newRulesList = rules.concat([newRule])\n        this.setState({\n          rules: newRulesList,\n          newRuleIdx: idx,\n          newRuleId: ruleId,\n          newRuleName: rule_name\n        }, () => {\n          this.render();\n          this.handleAddRulePopUp();\n          this.handleSetRulePopUp();\n        })\n      }).catch(err => console.warn(err));\n  }\n  setRuleAntecedentRequest = (newAntecedent) => {\n    console.log(\"App POST new rule antecedent\");\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set/antecedent\";\n    axios.post(url, {}, {\n      params: {\n        user_id: this.props.user_id,\n        rule_id: this.state.newRuleId,\n        device_id: newAntecedent.device_id,\n        start_value: newAntecedent.start_value,\n        stop_value: newAntecedent.stop_value,\n        condition: newAntecedent.condition\n      }\n    })\n      .catch(err => console.warn(err));\n  }\n  setRuleConsequentRequest = (newConsequent) => {\n    console.log(\"App POST new rule consequent\");\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set/consequent\";\n    axios.post(url, {}, {\n      params: {\n        user_id: this.props.user_id,\n        rule_id: this.state.newRuleId,\n        device_id: newConsequent.device_id,\n      }\n    })\n      .catch(err => console.warn(err));\n  }\n  updateDeviceRequest = (type) => {\n    console.log(\"App POST update device\");\n    var deviceId = \"\";\n    var device_name = \"\";\n    var setting = 0;\n    if (type === \"antecedent\") {\n      const index = this.state.antecedentIdx;\n      deviceId = this.state.antecedentId;\n      device_name = this.state.antecedentName;\n      setting = this.state.antecedents[index].setting;\n    }\n    else {\n      deviceId = this.state.consequentId;\n      device_name = this.state.consequentName;\n      setting = \"\";\n    }\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/update\";\n    axios.post(url, {}, {\n      params: {\n        user_id: this.props.user_id,\n        device_id: deviceId,\n        device_name: device_name,\n        setting: setting\n      }\n    }).catch(err => console.warn(err));\n\n  }\n  registerDeviceRequest = (type, newDevice) => {\n    console.log(\"App POST register device\");\n    const url = process.env.REACT_APP_BACKEND_URL + \"/device/register\";\n    axios.post(url, {}, {\n      params: {\n        device_id: newDevice.id,\n        device_name: newDevice.name,\n        user_id: this.props.user_id\n      }\n    }).catch(err => console.warn(err));\n    this.registerNewDeviceLocal(type, newDevice);\n  }\n  registerNewDeviceLocal = (type, newDevice) => {\n    if (type === \"antecedent\") {\n      var newAntecedents = this.state.antecedents;\n      const newIndex = newAntecedents.length;\n      this.setState({\n        antecedents: newAntecedents.concat([newDevice]),\n        antecedentId: newDevice.id,\n        antecedentName: newDevice.name,\n        antecedentIdx: newIndex,\n        modifyDevice: true,\n      },\n        () => {\n          this.render();\n          this.handleDeviceAntecedentPopUp();\n        })\n    }\n    else {\n      var newConsequents = this.state.consequents;\n      const newIndex = newConsequents.length;\n      this.setState({\n        consequents: newConsequents.concat([newDevice]),\n        consequentId: newDevice.id,\n        consequentName: newDevice.name,\n        consequentIdx: newIndex,\n        modifyDevice: true,\n      },\n        () => {\n          this.render();\n          this.handleDeviceConsequentPopUp();\n        })\n    }\n  }\n  updateRuleName = () => {\n    console.log(\"App POST update rule name\")\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/set/name\";\n    axios.post(url, {}, {\n      params: {\n        user_id: this.props.user_id,\n        rule_id: this.state.newRuleId,\n        rule_name: this.state.newRuleName\n      }\n    }).catch(err => console.warn(err));\n  }\n\n  // REMOVE ELEMENT FROM ARRAYS\n  deleteRuleRequest = (ruleId, ruleIdx) => {\n    console.log(\"App DELETE rule\")\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/delete/\" + ruleId;\n    axios.delete(url, {}, {params:{user_id: this.props.user_id}}).catch(err => console.warn(err));\n    var NewRules = this.state.rules;\n    NewRules.splice(ruleIdx, 1)\n    this.setState({ rules: NewRules, newRuleIdx: 0 }, () => {\n      this.render()\n    })\n  }\n  deleteRuleConsequentRequest = (ruleId, deviceId) => {\n    console.log(\"App DELETE rule consequent\")\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/delete/consequent/\" + ruleId + \"/\" + deviceId;\n    axios.delete(url, {}, {params:{user_id: this.props.user_id}}).catch(err => console.warn(err));\n    this.deleteRuleConsequentLocal(ruleId, deviceId)\n  }\n  deleteRuleConsequentLocal = (deviceId) => {\n    var rules = this.state.rules;\n    const idx_rule = this.state.newRuleIdx\n    var rule_consequent = rules[idx_rule].consequent\n    const idx_consequent = rule_consequent.indexOf(deviceId)\n    rules[idx_rule].consequent.splice(idx_consequent, 1);\n    this.setState({ rules: rules }, () => { this.render() });\n  }\n  deleteRuleAntecedentRequest = (ruleId, deviceId) => {\n    console.log(\"App DELETE rule antecedent\")\n    const url = process.env.REACT_APP_BACKEND_URL + \"/rule/delete/antecedent/\" + ruleId + \"/\" + deviceId;\n    axios.delete(url, {}, {params:{user_id: this.props.user_id}})\n      .catch(err => console.warn(err));\n    this.deleteRuleAntecedentLocal(deviceId)\n  }\n  deleteRuleAntecedentLocal = (deviceId) => {\n    var rules = this.state.rules;\n    const idx_rule = this.state.newRuleIdx\n    var rule_antecedent = rules[idx_rule].antecedent\n    const idx_antecedent = rule_antecedent.indexOf(deviceId)\n    rules[idx_rule].antecedent.splice(idx_antecedent, 1);\n    this.setState({ rules: rules }, () => { this.render() });\n  }\n  deleteDeviceRequest = (type) => {\n    console.log(\"App DELETE device\")\n    if (type === \"antecedent\") {\n      const url = process.env.REACT_APP_BACKEND_URL + \"/device/delete/\" + this.state.antecedentId;\n      var antecedents = this.state.antecedents;\n      const index = this.state.antecedentIdx;\n      antecedents.splice(index, 1);\n      axios.delete(url,{}, {params:{user_id: this.props.user_id}})\n        .then(this.setState({ antecedentIdx: 0, antecedents: antecedents }, () => { this.render() }))\n        .catch(err => console.warn(err));\n\n    }\n    else {\n      const url = process.env.REACT_APP_BACKEND_URL + \"/device/delete/\" + this.state.consequentId;\n      const index = this.state.consequentIdx;\n      var consequents = this.state.consequents;\n      consequents.splice(index, 1)\n      axios.delete(url, {}, {params:{user_id: this.props.user_id}})\n        .then(this.setState({ consequentIdx: 0, consequents: consequents }, () => { this.render() }))\n        .catch(err => console.warn(err));\n\n    }\n  }\n\n\n  //MODIFY AND SET RULE LOCAL\n  modifyRuleName = (newRuleName) => {\n    var rules = this.state.rules;\n    const index = this.state.newRuleIdx;\n    rules[index].name = newRuleName;\n    this.setState({\n      rules: rules,\n      newRuleName: newRuleName\n    }, () => { this.render() })\n  }\n  setConsequentRuleLocal = (newRuleIdx, newConsequent) => {\n    var rulesList = this.state.rules;\n    rulesList[newRuleIdx].consequent.push(newConsequent);\n    this.setState({ rules: rulesList }, () => {\n      this.render();\n      this.handleAddRuleConsequentPopUp();\n      this.handleSetRulePopUp();\n    });\n  }\n  setAntecedentRuleLocal = (newRuleIdx, newAntecedent) => {\n    var rulesList = this.state.rules;\n    rulesList[newRuleIdx].antecedent.push(newAntecedent);\n    this.setState({ rules: rulesList }, () => {\n      this.render();\n      this.handleAddRuleAntecedentPopUp();\n      this.handleSetRulePopUp();\n    });\n  }\n  setNewRuleCondition = (ruleIdx, index, newCondition) => {\n    const rules = this.state.rules;\n    rules[ruleIdx].antecedent[index].condition = newCondition;\n    if (newCondition === \"between\") {\n      rules[ruleIdx].antecedent[index].stop_value = rules[ruleIdx].antecedent[index].start_value;\n    }\n    else {\n      rules[ruleIdx].antecedent[index].stop_value = \"//\";\n    }\n    this.setState({ rules: rules }, () => { this.render() });\n  }\n  setNewStartValue = (ruleIdx, index, newStart) => {\n    const rules = this.state.rules;\n    rules[ruleIdx].antecedent[index].start_value = newStart;\n    this.setState({ rules: rules }, () => { this.render() });\n  }\n  setNewStopValue = (ruleIdx, index, newStop) => {\n    const rules = this.state.rules;\n    rules[ruleIdx].antecedent[index].stop_value = newStop;\n    this.setState({ rules: rules }, () => { this.render() });\n  }\n\n  //MODIFY DEVICES LOCAL\n  modifyAntecedentSetting = (newSetting) => {\n    var antecendents = this.state.antecedents;\n    const index = this.state.antecedentIdx;\n    antecendents[index].setting = newSetting;\n    this.setState({ antecendents: antecendents }, () => {\n      this.render()\n    })\n  }\n  modifyAntecedentName = (newName) => {\n    var antecendents = this.state.antecedents;\n    const index = this.state.antecedentIdx;\n    antecendents[index].name = newName;\n    this.setState({ antecendents: antecendents, antecedentName: newName }, () => {\n      this.render()\n    })\n  }\n  modifyConsequentName = (newName) => {\n    var consequents = this.state.consequents;\n    const index = this.state.consequentIdx;\n    consequents[index].name = newName;\n    this.setState({ consequents: consequents, consequentName: newName }, () => {\n      this.render()\n    })\n  }\n\n  // CURRENT SELECTED ITEM VARIABLES\n  setNewRule = (ruleId, ruleName, ruleIdx) => {\n    this.setState({\n      newRuleIdx: ruleIdx,\n      newRuleId: ruleId,\n      newRuleName: ruleName\n    }, () => { this.render() })\n  }\n  setNewAntecedent = (antecedentId, antecedentName, antecedentIdx) => {\n    this.setState({\n      antecedentId: antecedentId,\n      antecedentName: antecedentName,\n      antecedentIdx: antecedentIdx\n    }, () => { this.render() })\n  }\n  setNewConsequent = (consequentId, consequentName, consequentIdx) => {\n    this.setState({\n      consequentId: consequentId,\n      consequentName: consequentName,\n      consequentIdx: consequentIdx\n    }, () => { this.render() })\n  }\n\n\n\n\n  handleMenuPopUp = () => {\n    this.setState({\n      menuPopUp: !this.state.menuPopUp\n    })\n  }\n  handleAddRulePopUp = () => {\n    this.setState({\n      AddRulePopUp: !this.state.AddRulePopUp\n    })\n  }\n  handleSetRulePopUp = () => {\n    this.setState({\n      setRulePopUp: !this.state.setRulePopUp\n    })\n  }\n  handleModify = () => {\n    this.setState({\n      modify: !this.state.modify\n    })\n  }\n  handleModifyDevice = () => {\n    this.setState({\n      modifyDevice: !this.state.modifyDevice\n    })\n  }\n  handleAddRuleAntecedentPopUp = () => {\n    this.setState({ addRuleAntecedentPopUp: !this.state.addRuleAntecedentPopUp })\n  }\n  handleAddRuleConsequentPopUp = () => {\n    this.setState({ addRuleConsequentPopUp: !this.state.addRuleConsequentPopUp })\n  }\n  handleRegisterDevicePopUp = () => {\n    this.setState({ registerDevicePopUp: !this.state.registerDevicePopUp })\n  }\n  handleDeviceAntecedentPopUp = () => {\n    this.setState({ deviceAntecedentPopUp: !this.state.deviceAntecedentPopUp })\n  }\n  handleDeviceConsequentPopUp = () => {\n    this.setState({ deviceConsequentPopUp: !this.state.deviceConsequentPopUp })\n  }\n  handleLogOut = () => {\n    this.setState({ logout: true }, () => { this.render() });\n  }\n\n\n\n\n\n  render() {\n    if (this.state.logout) {\n      return (\n        <Redirect to={process.env.REACT_APP_LOGIN_URL} />\n      )\n    }\n    else {\n      return (\n        <div className=\"App\">\n          <div className=\"TopBar\">\n            <div className=\"TopBarElement\">\n              Welcome {this.props.user_name}\n            </div>\n            <div className=\"TopBarButtonMenu\">\n              <button onClick={() => { this.handleMenuPopUp() }}>MENU</button>\n            </div>\n            <ButtonMenu\n              menuPopUp={this.state.menuPopUp}\n              handleMenuPopUp={this.handleMenuPopUp}\n              handleAddRulePopUp={this.handleAddRulePopUp}\n              handleRegisterDevicePopUp={this.handleRegisterDevicePopUp}\n              handleModify={this.handleModify}\n              handleLogOut={this.handleLogOut}\n            />\n            <CreateRuleProcess\n              AddRulePopUp={this.state.AddRulePopUp}\n              rules={this.state.rules}\n              user_id={this.props.user_id}\n              base_url={process.env.REACT_APP_BACKEND_URL}\n              handleAddRulePopUp={this.handleAddRulePopUp}\n              createRuleRequest={this.createRuleRequest}\n            />\n            <SetRuleProcess\n              setRulePopUp={this.state.setRulePopUp}\n              handleSetRulePopUp={this.handleSetRulePopUp}\n              rules={this.state.rules}\n              newRuleIdx={this.state.newRuleIdx}\n              newRuleId={this.state.newRuleId}\n              newRuleName={this.state.newRuleName}\n              deleteRuleConsequentRequest={this.deleteRuleConsequentRequest}\n              deleteRuleAntecedentRequest={this.deleteRuleAntecedentRequest}\n              handleModify={this.handleModify}\n              modify={this.state.modify}\n              setNewRuleCondition={this.setNewRuleCondition}\n              setNewStartValue={this.setNewStartValue}\n              setNewStopValue={this.setNewStopValue}\n              handleAddRuleAntecedentPopUp={this.handleAddRuleAntecedentPopUp}\n              handleAddRuleConsequentPopUp={this.handleAddRuleConsequentPopUp}\n              setRuleAntecedentRequest={this.setRuleAntecedentRequest}\n              setRuleConsequentRequest={this.setRuleConsequentRequest}\n              deleteRuleRequest={this.deleteRuleRequest}\n              modifyRuleName={this.modifyRuleName}\n              updateRuleName={this.updateRuleName}\n            />\n            <AddRuleConsequentProcess\n              addRuleConsequentPopUp={this.state.addRuleConsequentPopUp}\n              handleSetRulePopUp={this.handleSetRulePopUp}\n              handleAddRuleConsequentPopUp={this.handleAddRuleConsequentPopUp}\n              newRuleIdx={this.state.newRuleIdx}\n              rules={this.state.rules}\n              consequents={this.state.consequents}\n              setConsequentRuleLocal={this.setConsequentRuleLocal}\n            />\n            <AddRuleAntecedentProcess\n              addRuleAntecedentPopUp={this.state.addRuleAntecedentPopUp}\n              handleSetRulePopUp={this.handleSetRulePopUp}\n              handleAddRuleAntecedentPopUp={this.handleAddRuleAntecedentPopUp}\n              newRuleIdx={this.state.newRuleIdx}\n              rules={this.state.rules}\n              antecedents={this.state.antecedents}\n              setAntecedentRuleLocal={this.setAntecedentRuleLocal}\n            />\n            <RegisterDeviceProcess\n              registerDevicePopUp={this.state.registerDevicePopUp}\n              handleRegisterDevicePopUp={this.handleRegisterDevicePopUp}\n              registerDeviceRequest={this.registerDeviceRequest}\n            />\n            <DeviceAntecedentPopUp\n              rules={this.state.rules}\n              deviceAntecedentPopUp={this.state.deviceAntecedentPopUp}\n              handleDeviceAntecedentPopUp={this.handleDeviceAntecedentPopUp}\n              modifyDevice={this.state.modifyDevice}\n              handleModifyDevice={this.handleModifyDevice}\n              antecedents={this.state.antecedents}\n              antecedentId={this.state.antecedentId}\n              antecedentName={this.state.antecedentName}\n              antecedentIdx={this.state.antecedentIdx}\n              setNewAntecedent={this.setNewAntecedent}\n              modifyAntecedentSetting={this.modifyAntecedentSetting}\n              updateDeviceRequest={this.updateDeviceRequest}\n              deleteDeviceRequest={this.deleteDeviceRequest}\n              getDeviceMeasureRequest={this.getDeviceMeasureRequest}\n              modifyAntecedentName={this.modifyAntecedentName}\n              setNewRule={this.setNewRule}\n              handleSetRulePopUp={this.handleSetRulePopUp}\n            />\n\n            <DeviceConsequentPopUp\n              rules={this.state.rules}\n              consequents={this.state.consequents}\n              consequentId={this.state.consequentId}\n              consequentName={this.state.consequentName}\n              consequentIdx={this.state.consequentIdx}\n              setNewConsequent={this.setNewConsequent}\n              handleDeviceConsequentPopUp={this.handleDeviceConsequentPopUp}\n              deviceConsequentPopUp={this.state.deviceConsequentPopUp}\n              modifyDevice={this.state.modifyDevice}\n              handleModifyDevice={this.handleModifyDevice}\n              updateDeviceRequest={this.updateDeviceRequest}\n              deleteDeviceRequest={this.deleteDeviceRequest}\n              getDeviceMeasureRequest={this.getDeviceMeasureRequest}\n              modifyConsequentName={this.modifyConsequentName}\n              setNewRule={this.setNewRule}\n              handleSetRulePopUp={this.handleSetRulePopUp}\n            />\n\n\n          </div>\n          <ViewAntecedents\n            antecedents={this.state.antecedents}\n            handleDeviceAntecedentPopUp={this.handleDeviceAntecedentPopUp}\n            setNewAntecedent={this.setNewAntecedent}\n            getAntecedentById={this.getAntecedentById}\n          />\n          <ViewRules\n            handleSetRulePopUp={this.handleSetRulePopUp}\n            rules={this.state.rules}\n            setNewRule={this.setNewRule}\n            getRuleById={this.getRuleById}\n          />\n          <ViewConsequents\n            consequents={this.state.consequents}\n            handleDeviceConsequentPopUp={this.handleDeviceConsequentPopUp}\n            setNewConsequent={this.setNewConsequent}\n            getConsequentById={this.getConsequentById}\n          />\n\n\n\n        </div>\n      );\n    }\n  }\n}\n\nfunction ButtonMenu(props) {\n  return (\n    <Modal show={props.menuPopUp} onHide={() => props.handleMenuPopUp()}>\n      <Modal.Header closeButton>\n        <Modal.Title>\"MENU\"</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div className=\"MenuPopUp\">\n          <button onClick={() => {\n            props.handleMenuPopUp();\n            props.handleRegisterDevicePopUp();\n          }}>\n            ADD DEVICE\n          </button>\n          <br></br>\n          <button onClick={() => {\n            props.handleMenuPopUp();\n            props.handleAddRulePopUp();\n            props.handleModify()\n          }}>\n            ADD RULE\n            </button>\n          <br></br>\n          <button\n            onClick={() => {\n              props.handleLogOut();\n            }}\n          >\n            LOGOUT\n            </button>\n        </div>\n      </Modal.Body>\n      <Modal.Footer>\n        <button onClick={() => props.handleMenuPopUp()}>Close</button>\n      </Modal.Footer>\n    </Modal>\n  )\n}\n\n","import React from \"react\";\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    useLocation\r\n} from \"react-router-dom\";\r\nimport UserAccessProcess from \"./UserAccessProcess\";\r\nimport App from './App'\r\n\r\n\r\nexport default class Main extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <Switch>\r\n                    <PrivateRoute\r\n                        path={process.env.REACT_APP_PROTECTED_URL}\r\n\r\n\r\n                    />\r\n                    <UserAccessProcess\r\n                        path={process.env.REACT_APP_LOGIN_URL}\r\n\r\n                    />\r\n\r\n                </Switch>\r\n            </Router>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nfunction PrivateRoute(props) {\r\n    let query = new URLSearchParams(useLocation().search);\r\n    const user_name = query.get(\"userName\")\r\n    const idToken = query.get(\"idToken\")\r\n    return (\r\n        <App\r\n            idToken={idToken}\r\n            user_name={user_name}\r\n            user_id=\"user\"\r\n        />\r\n    )\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './App.css';\nimport Main from './Main'\n\n\nReactDOM.render(\n  <Main/>,\n\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}